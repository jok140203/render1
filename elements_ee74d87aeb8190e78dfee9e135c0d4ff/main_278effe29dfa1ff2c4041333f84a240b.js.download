define("analytics/channel/experimentImpressionChannel",["require","blue/event/channel"],function(e){var t,n=e("blue/event/channel");return{getInstance:function(e,i){return t||(t=new n),t}}}),define("analytics/scroll/elementInViewport",[],function(){return function(e,t){t||(t=50);var n=e.getBoundingClientRect();return n.bottom-n.height*t/100-window.innerHeight<1}}),define("analytics/channel/scrollStopChannel",["require","blue/event/channel","blue/event/channel/domEvents"],function(e){var t=new(e("blue/event/channel")),n=e("blue/event/channel/domEvents");return function(e){return t.plug(n.asEventStream("scroll").debounce(e)),t}}),define("analytics/scroll/experimentWatcher",["require","exports","module","analytics/channel/experimentImpressionChannel","analytics/scroll/elementInViewport","blue/event/channel/component","analytics/channel/scrollStopChannel"],function(e,t,n){var i,r,a,o=e("analytics/channel/experimentImpressionChannel"),s=e("analytics/scroll/elementInViewport"),c=e("blue/event/channel/component"),l=e("analytics/channel/scrollStopChannel"),d=n.config(),u={},p=["style","content","template"];function f(e){var t=Object.create(null);return t.data=e.context,t.name=e.name,t}function m(e){var t=document.querySelectorAll(e);return 1===t.length?t[0]:void 0}function g(e,t,n){(i=e[t].filter(function(e){return e.component===n.componentName}))&&i.length>0&&function(e,t,n){e.forEach(function(e){var t=m(e.selector);t&&(s(t,d.visibilityPercentage)?o.getInstance().emit(f({name:e.component,context:{experimentId:e.experimentId,choice:e.choice}})):(u[n]||(u[n]=[]),u[n].push({selector:e.selector,context:{experimentId:e.experimentId,choice:e.choice},name:e.component})))})}(i,0,n.componentInstanceName)}return function(e){a=e,r||(r=l(d.delay||1e3).asEventStream().onValue(function(){var e,t;Object.keys(u).forEach(function(n){for(t=u[n],e=t.length-1;e>-1;e--)s(m(t[e].selector),d.visibilityPercentage)&&(o.getInstance().emit(f(t[e])),t.splice(e,1))})})),c.on("ready",function(e){var t=a&&(a[e.target.context.areaName]||a.app);t&&p.forEach(function(n){t[n]&&g(t,n,e)})}),c.on("destroy",function(e){u[e.target.key]&&u[e.target.key].splice(0)})}}),define("analytics/util/experimentActionHelper",[],function(){var e;return{setExperimentData:function(t){e=t},getExperimentData:function(){return e},getExperimentActions:function(){var e=this.getExperimentData(),t=e&&Object.create(null),n=e&&Object.keys(e)||[],i=function(e,n){n&&n.forEach(function(n){for(var i=n.actions&&n.actions.length||0,r=0;r<i;r++)t[e+"."+n.component+"."+n.actions[r]]={experimentId:n.experimentId,choice:n.choice,action:n.actions[r]}})};return n.forEach(function(t){i(t,e[t].style),i(t,e[t].template),i(t,e[t].content)}),t}}}),define("appkit-utilities/common/constants",{SYMBOLS:{POUND:"#",PERIOD:".",SLASH:"/",UNDERSCORE:"_"},VALUE:{THOUSAND:1e3,MILLION:1e6,BILLION:1e9,TRILLION:1e12},BRAND_ID:{JPMORGAN:"JPMORGAN"},DETAIL_TYPE:{MERCHANT:"MSA"}}),define("appkit-utilities/accountInfo/accountInfo",["require","blue/siteData","blue/log","appkit-utilities/common/constants"],function(e){var t=e("blue/siteData"),n=e("blue/log")("[accountInfo]"),i=e("appkit-utilities/common/constants"),r={profileType:{personal:["PER"],gemini:["GEM","GNC","GNM"],multiTin:["MUL","GNM","GMC"],multiChannel:["CHN"],businessBanking:["BUS","GNM","GNC","MUL","GEM"]},segmentType:{commercial:["CML","CRE"],smallBusiness:["BMG","BMS","BPL","BPS","BOH","BOS"],businessBanking:["BOH","BMG","BPL","PVB","WTH"],wealthy:["PVB","PCB","WTH"],jpmSecurities:["PCB"],privateBanking:["PVB","WTH"]},userType:{subUser:["SU"]},accountTypes:{managed:["WR2"],brokerage:["BR2"],margin:["MAR"],investmentManage:["MAN"]}};function a(e,t){if(!(r=t||r).profileType)throw new Error('missing customMapper properties "profileType"');if(!e||!e.profileType)throw new Error('missing accountInfo property "profileType"');this.profileType=e.profileType,e.segmentType&&(this.segmentType=e.segmentType),e.userType&&(this.userType=e.userType),e.accountTypes&&(this.accountTypes=e.accountTypes)}function o(){return this.segmentType||(this.segmentType=t.getData("segment"),this.segmentType||n.warn("Caller attempted to get segment from siteData before siteData was initialized.")),this.segmentType}function s(){if(!this.accountTypes){var e=t.getData("accountTypes");this.accountTypes=e&&!Array.isArray(e)?e.split("+"):e,this.accountTypes||n.warn("Caller attempted to get accountType from siteData before siteData was initialized.")}return this.accountTypes}function c(e){return"segmentType"===e?o.call(this):"accountTypes"===e?s.call(this):this[e]}return a.prototype={constructor:a,isAvailableInMapperList:function(e,t){if(r[e]&&r[e][t]){var n=c.call(this,e);if("string"==typeof n)return-1!==r[e][t].indexOf(c.call(this,e));if(n instanceof Array)for(var i=0;i<n.length;i++)if(r[e][t].indexOf(n[i])>=0)return!0}return!1},isCommercialUser:function(){return this.isAvailableInMapperList("segmentType","commercial")},isWealthyUser:function(){return this.isAvailableInMapperList("segmentType","wealthy")},isSmallBusinessUser:function(){return this.isAvailableInMapperList("segmentType","smallBusiness")},isBusinessBankingUser:function(){return this.isAvailableInMapperList("segmentType","businessBanking")},isGWMUser:function(){return this.isPrivateBankUser()||this.isJPMSecuritiesUser()},isBusinessUser:function(){return this.isCommercialUser()||this.isSmallBusinessUser()},isPersonalUser:function(){return this.isAvailableInMapperList("profileType","personal")},isGeminiUser:function(){return this.isAvailableInMapperList("profileType","gemini")},isMultiTinUser:function(){return this.isAvailableInMapperList("profileType","multiTin")},isMultiChannelUser:function(){return this.isAvailableInMapperList("profileType","multiChannel")},isBusinessBankingUserProfile:function(){return this.isAvailableInMapperList("profileType","businessBanking")},isSubUser:function(){return this.isAvailableInMapperList("userType","subUser")},isJPMSecuritiesUser:function(){return this.isAvailableInMapperList("segmentType","jpmSecurities")},isPrivateBankUser:function(){return this.isAvailableInMapperList("segmentType","privateBanking")},isFinancialAdvisor:function(){return t.getData("userType")?t.getData("userType").indexOf("FinancialAdvisor")>-1:(n.warn("siteData.userType is not set."),!1)},isGWMEmulationMode:function(){return this.isFinancialAdvisor()&&this.isWealthyUser()},isManagedBrokerage:function(){return this.isAvailableInMapperList("accountTypes","managed")},isBrokerage2:function(){return this.isAvailableInMapperList("accountTypes","brokerage")},isMargin:function(){return this.isAvailableInMapperList("accountTypes","margin")},isOlympic:function(){return this.isAvailableInMapperList("accountTypes","investmentManage")},isEligibleForRealTimeData:function(){return this.isBrokerage2()||this.isManagedBrokerage()||this.isMargin()||this.isOlympic()},isMerchantServicesUser:function(){return e=i.DETAIL_TYPE.MERCHANT,t.getData("accountTypes")?t.getData("accountTypes").indexOf(e)>-1:(n.warn("siteData.accountTypes is not set."),!1);var e},getSegment:o,getAccountType:s},a}),define("appkit-utilities/aop/console",["require","blue/root","blue/intercept","blue/log"],function(e){return function(t){var n=e("blue/root");if("console"in n&&t.ccLogs&&!0===t.ccLogs.enabled){var i,r=[],a=e("blue/intercept").before,o=e("blue/log"),s=["DEBUG","WARN","ERROR"],c={info:0,debug:0,log:0,warn:1,error:2,assert:2},l=2,d=t.ccLogs.level;return d===s[1]?l=1:d===s[0]&&(l=0),Object.keys(c).forEach(function(e){if(e in n.console&&c[e]>=l){var t="Console client error logs : "+e+": ",s=o(t);i=a(n.console,e,function(){arguments[0]!==t&&s.error.apply(s,arguments)}),r.push(i)}}),{removeConsoleLog:function(){for(var e=0;e<r.length;e++)r[e].remove()}}}}}),define("appkit-utilities/cookie/cookie",["require","blue/store/enumerable/cookie","blue/util","blue/is","blue/dom","blue/log"],function(e){var t=new(e("blue/store/enumerable/cookie"))(null,!0),n=e("blue/util").object.extend,i=e("blue/is"),r=e("blue/dom"),a=e("blue/log")("[Cookie]"),o=r.location&&r.location.hostname,s=r.location&&r.location.protocol,c="."+o.split(".").slice(-2).join("."),l=/^https:$/i.test(s),d={expires:1,path:"/",domain:"localhost"!==o&&o?c:"localhost"};function u(e,r,o){var s=new Date,c=o&&o[e]||{},u=c&&c.name||"",p=n({},d,c);if(u)return i.undefined(r)?t.get(u):(null!==r&&s.setYear(s.getFullYear()+p.expires),null===c.expiry&&(s=null),i.boolean(c.secure)&&(l=c.secure),t.set(u,r,s,p.path,p.domain,l),t.get(u));a.warn("cookie "+e+" not exist!")}return function(e,t){if(i.string(e)&&i.object(arguments[arguments.length-1])){if(2===arguments.length)return u(e,void 0,t);if(3===arguments.length)return u.apply(this,arguments)}a.warn("Please provide the correct arguments")}}),define("appkit-utilities/data/converter",[],function(){return{b64toBlob:function(e,t,n){t=t||"",n=n||512;for(var i=atob(e),r=[],a=0;a<i.length;a+=n){for(var o=i.slice(a,a+n),s=new Array(o.length),c=0;c<o.length;c++)s[c]=o.charCodeAt(c);var l=new Uint8Array(s);r.push(l)}return new Blob(r,{type:t})}}}),define("appkit-utilities/formUtil/formUtil",["require","blue/$","blue/log","blue-app/cache/sessionCache"],function(e){var t=e("blue/$"),n=e("blue/log")("[formUtil]"),i=e("blue-app/cache/sessionCache"),r={},a=function(e){return e.params&&e.params.isPopUp},o=function(e){return a(e)?e.formAttr.title:e.formAttr.target?e.formAttr.target:e.formAttr.downLoad?"_self":"_blank"},s=function(e){var r,a=e.serviceUrl||"service-/svc/rl/accounts/secure/v1/csrf/token/list",s=i.get(a),c=s?s.response.csrfToken:"",l=t("<form></form>").attr({method:e.formAttr.method,action:e.formAttr.action,target:o(e)}).hide();Object.keys(e.inputData).forEach(function(n){var i=t("<input>").attr({type:"hidden",name:n,value:e.inputData[n]});l.append(i)});var d=t("<input>").attr({type:"hidden",name:"csrftoken",value:c});l.append(d),r=t("<input>").attr({type:"submit",name:"submit",value:"Submit"}),t("body").append(l.append(r)),r.click(),n.info(">>>>>Form post done"),l.remove()};return{dynamicFormSubmit:function(e){a(e)?function(e){var t=r[e.formAttr.title],n=!1;try{n=t&&t.opener}catch(e){}n?t.focus():(r[e.formAttr.title]=window.open("",e.formAttr.title,e.params.isPdf?"pdf":"resizable=1,width="+e.params.popUpWidth+",height="+e.params.popUpHeight),s(e))}(e):s(e)}}}),define("appkit-utilities/personalization/personalization",["require","blue/is","blue-app/settings","blue-app/validate/var/ZIP_CODE_REGEX","blue/store/enumerable/cookie","blue/siteData","blue/declare"],function(e){var t=e("blue/is"),n=e("blue-app/settings"),i=e("blue-app/validate/var/ZIP_CODE_REGEX"),r=new(e("blue/store/enumerable/cookie"))(null,!0),a=e("blue/siteData");return e("blue/declare")({constructor:function(e,t){var i=n.get("persona");this.persona=i||{},this.geoFreshnessCookieName=t||"_geoFreshness",this.geoZipCookieName=e||"_geoZip"},getPersona:function(){return this.persona},getZipCode:function(){var e=this.persona.zip||a.getData("geoZip");return e&&(e=e.substring(0,5),i.test(e))?e:null},getEci:function(){return this.persona.ECI||null},getSegment:function(){return this.persona.segment||null},getLocale:function(){var e=this.persona.locale;return e&&t.string(e)||(e=null),e&&(e=e.replace("_","-")),e||"en-us"},getGeoZipCode:function(){var e=r.get(this.geoZipCookieName);return e||(e=this.getZipCode())&&r.set(this.geoZipCookieName,e,null,"/",".chase.com",!0),e},getGeoImageFreshness:function(){var e=r.get(this.geoFreshnessCookieName);return e||(e=(new Date).getMonth(),r.set(this.geoFreshnessCookieName,e,null,"/",".chase.com",!0)),e}})}),define("appkit-utilities/language/helper",["require","blue-app/settings","blue/siteMode","blue/resource/persona","appkit-utilities/personalization/personalization","blue/store/enumerable/cookie"],function(e){var t=e("blue-app/settings"),n=e("blue/siteMode"),i=e("blue/resource/persona"),r=new(e("appkit-utilities/personalization/personalization")),a=new(e("blue/store/enumerable/cookie"))("splash",!1,null,"/",".chase.com",!0),o=function(){return t.get("language",t.Type.PERM)||t.get("language")||t.get("languageDefault")||"en-us"},s=function(){return!n.isModeEnabled("internationalizationSplash")},c=function(){return s()?o():"en-us"},l=function(){return c().split("-")[0]};return{getLanguage:c,getUserLanguage:o,getLanguagePrefix:function(){return c().replace("-","_")},isUserAllowedForeignLanguage:s,getContentLanguage:l,isLanguageSetTo:function(e){if("string"!=typeof e)throw new Error('argument "language" should be a 2 characters string, e.g. "en"');return l()===e},isPersonaLocaleForeignLanguage:function(){var e=(new i).read(),t=e&&e.locale?e.locale.replace("_","-"):"";return!!t&&"en-us"!==t},isCurrentLanguageSetToDefault:function(){return t.get("languageDefault")?r.getLocale()===t.get("languageDefault"):"en-us"===r.getLocale()},isInternationalizationEnabled:function(e){var n=r.getSegment()||"",i=t.get("languageSplashUnavailableSegments");if(!i)throw new Error('setting "languageSplashUnavailableSegments" is undefined');return!e&&-1===i.indexOf(n.toUpperCase())},clearSplashViewed:function(){a.remove("internationalizationSplashSeen")},setSplashViewed:function(){a.set("internationalizationSplashSeen",!0)},getSplashViewed:function(){return a.get("internationalizationSplashSeen")}}}),define("appkit-utilities/podCookie/podCookie",["require","blue/log","blue/store/enumerable/cookie","blue/siteData","blue/root"],function(e){return function(t){var n=t&&t.name||"POD",i=e("blue/log")("["+n+"Cookie]"),r=new(e("blue/store/enumerable/cookie"))(null,!0),a=e("blue/siteData"),o=t&&a.getData(t.siteDataPodID),s=t&&t.podCookieName||"podKey",c=o||t&&t.podCookieDefaultValue||1,l=e("blue/root"),d=l.location&&l.location.hostname||"",u=d&&"."+d.split(".").slice(-2).join("."),p=""===d?"":("localhost"===d?"localhost":t&&t.domain)||u,f=t&&t.path||"/",m=t&&t.expires||new Date((new Date).setYear((new Date).getFullYear()+1));i.warn("podCookie has been DEPRECATED, please use appkit/cookie/cookie.js."),r.set(s,c,m,f,p,!0),i.debug("Created "+n+" cookie")}}),define("appkit-utilities/rapidash/rapidash",["require","blue/util","blue/intercept","blue/log"],function(e){var t,n=e("blue/util"),i=e("blue/intercept"),r=e("blue/log")("[rapidash]"),a=function(e){return null!=e&&"object"==typeof e&&!Array.isArray(e)},o=function(e){return e?e.toString():""},s=function(e){return o(e).toUpperCase()},c=function(e){return function(){var t=Array.prototype.slice.call(arguments),i=t[0];return Array.isArray(i)?n.array[e].apply(this,t):"object"==typeof i?n.object[e].apply(this,t):void 0}};return t={combine:n.array.combine,compact:n.array.compact,difference:n.array.difference,intersection:n.array.intersection,invoke:n.array.invoke,range:n.array.range,sort:n.array.sort,union:n.array.union,unique:n.array.unique,toHtmlString:function(e){for(var t='<ul class="account-service-list">',n=0,i=e.length;n<i;n++)t+="<li>"+e[n]+"</li>";return t+"</ul>"},objToHtmlString:function(e,t){for(var n='<ul class="account-service-list">',i=0,r=e.length;i<r;i++)n+="<li>"+e[i][t]+"</li>";return n+"</ul>"},flatten:function(e){for(var t=[],n=0,i=e.length;n<i;n++)Array.isArray(e[n])?t=t.concat(e[n]):t.push(e[n]);return t},findByKey:function(e,t,i){return n.array.find(e,function(e){return e[t]===i})},compose:n.function.compose,debounce:n.function.debounce,partial:n.function.partial,prop:n.function.prop,series:n.function.series,times:n.function.times,wrap:n.function.wrap,equals:n.object.equals,every:n.object.every,extend:n.object.extend,filter:n.object.filter,find:n.object.find,functions:n.object.functions,get:n.object.get,has:n.object.has,map:n.object.map,merge:n.object.merge,set:n.object.set,unset:n.object.unset,deepCopy:function(e){var t={};return n.object.extend(!0,t,e),t},restructureObject:function(e){if(a(e)){var t={};return Object.keys(e).forEach(function(i){a(n.object.get(t,i))||n.object.set(t,i,e[i])}),t}return e},intersectObjects:function(e,t){if(!a(e)||!a(t))throw new Error('type error: function "intersectObjects" argument "o1, o2" must be type "object"');for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]||(t[n]=null))},values:function(e){var t=[];if(a(e))for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t},bindMethods:function(e){Object.getOwnPropertyNames(e.constructor.prototype).forEach(function(t){"function"==typeof e[t]&&(e[t]=e[t].bind(e))})},subclass:function(e,t){return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t},camelCase:n.string.camelCase,escapeHtml:n.string.escapeHtml,hyphenate:n.string.hyphenate,interpolate:n.string.interpolate,makePath:n.string.makePath,properCase:n.string.properCase,properCaseForNames:function(e){return function(e){return o(e).toLowerCase()}(e).replace(/^\w|\s\w|[-'](?=[a-zA-z])[a-zA-z]/g,s)},removeNonASCII:n.string.removeNonASCII,removeNonWord:n.string.removeNonWord,stripHtmlTags:n.string.stripHtmlTags,truncate:n.string.truncate,typecast:n.string.typecast,unCamelCase:n.string.unCamelCase,unescapeHtml:n.string.unescapeHtml,unhyphenate:n.string.unhyphenate,snakeCase:function(e){return n.string.unCamelCase(e,"_")},lispCase:function(e){return n.string.unCamelCase(e,"-")},max:c("max"),min:c("min"),pick:c("pick"),pluck:c("pluck"),forEach:function(e,t){var n;if(Array.isArray(e))e.forEach(t);else if("object"==typeof e)for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])},serialize:function(e,t,i){var r={};i.forEach(function(e,n){r[t+"["+n+"]"]=e}),n.object.extend(!1,e,r)},updateModel:function(e,t){var n;if(!a(t))throw new Error('type error: function "update" argument "object" must be type "object"');for(var i in t)if(t.hasOwnProperty(i))if(Array.isArray(t[i])){var r,o=0;for(r=(n=t[i]).length,e.set(i,[]);o<r;o++)e.set(i+"."+o,n[o])}else e.set(i,t[i])},isObject:a,toObject:function(e){var t={};return void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return/function ([^(]*)/.exec(this+"")[1]}}),e.forEach(function(e){"function"==typeof e?t[e.name]=e:t[e]=e}),t},setValueOrDefault:function(e,t){return e||t||""}},r.warn("Appkit Rapidash is deprecated. Please start using blue/util directly or move logics into your scrum codes"),Object.keys(t).forEach(function(e){i.after(t,e,function(){r.warn("rapidash."+e+" is deprecated. Please start using blue/util directly.")})}),t}),define("appkit-utilities/xDomainChannel/connector",["require","exports","module"],function(e,t,n){return function(){var e,t,n=function(e,t){for(t=e="";e++<36;t+=51*e&52?(15^e?8^Math.random()*(20^e?16:4):4).toString(16):"-");return t},i={};function r(){return i}function a(e,n){var i=r();if(!i.appContext||n){if(e||"number"==typeof e||(e=Date.now()),t)if((t[i.hostId]||"")===e)return;o({action:"add",id:i.hostId,time:e})}}function o(t){e&&e.contentWindow.postMessage(t,r().target)}return{init:function(i){var o=r();return function(e,t){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.id=e.id||"smframe",t.hostId=n(window.location.href),t.target=e.target||"http://localhost",t.host=e.host||"http://localhost",t.url=t.target+"?host="+t.host+"&id="+t.hostId}(i,o),o.appContext&&o.appContext.on("timeout:resetTime",function(){a(Date.now(),!0)}),window.addEventListener("message",function(e){t=e.data||{},o.peerActivityCallback&&o.peerActivityCallback.call(this,e.data)}),e=function(e){var t,n=e||r();if(n.url&&n.id)return(t=document.createElement("iframe")).src=n.url,t.id=n.id,t.width=0,t.height=0,t.style="width:0; height:0; border:0; border:none;",document.body.insertAdjacentElement("afterend",t),t}(o),o.hostId},update:a,logoff:function(){o({action:"logoff",id:r().hostId})},getId:function(){if(!i.hostId)throw new Error("xDomainChannel().init() must be invoked prior to requesting getId()");return i.hostId}}}}),define("appkit-utilities/sessionTimeout/timeout",["require","exports","module","blue/site","blue/hash","blue-app/settings","blue/event/channel/domEvents","appkit-utilities/xDomainChannel/connector"],function(e,t,n){"use strict";var i,r,a=e("blue/site"),o=e("blue/hash"),s=e("blue-app/settings"),c=e("blue/event/channel/domEvents"),l=0,d=!1,u=!1,p=null,f=Date.now||(new Date).getTime,m=function(){var e=f(),t=(s.get("lastServiceCallTime")||f())+1e3*r.sessionDelay,n=p+1e3*r.areYouThereDelay,a=p+1e3*r.serviceDelay;n<=e&&!u&&(i.broadcast("timeout:showModal"),u=!0),t<=e&&(i.logger.debug("time to call service"),i.broadcast("timeout:extendSession")),a<=e&&i.broadcast("timeout:proceedToLogoff",{isSessionTimeout:!0,needToHideOverlay:!1})},g=function(){i.logger.debug("User activity detected: "+p),p=f(),i.emit("timeout:resetTime",p)},h=function(){clearInterval(l),l=0},v=function(){return 0!==l},b=function(){!function(e){if(d=!1,r.excludedActions)for(var t=0;t<r.excludedActions.length;++t)if(e===r.excludedActions[t])return d=!0;return d}(o.getHashArr()[1]||"index")?v()||(g(),l=setInterval(m,1e3*r.timeoutInterval)):h()},y=function(){i.logger.debug("Extend Session"),p=f(),u=!1},C=function(){i.logger.debug("No activity, Logging off"),u=!1,h()};return{init:function(t,o){var l=s.get("lastServiceCallTime")||f(),m=t.allowOverrideTimeout&&window.location.href.indexOf("?A59")>0;t.serviceDelay=m?120:t.serviceDelay,t.areYouThereDelay=m?60:t.areYouThereDelay,t.sessionDelay=m?80:t.sessionDelay,r=t,p=f(),(i=o||a.context).logger.debug("Session Timeout Initialized"),s.set({lastServiceCallTime:l},s.Type.USER),c.on(function(e){!v()||d||e.target!==window||"keydown"!==e.type&&"click"!==e.type||u||g()}),i.on({"blue:routeChange":b,"timeoutComponent:requestSessionExtension":y,"timeoutComponent:proceedToLogoff":C,"messenger:userActivity":function(){u||g()}});var h=n.config()||{};if("object"==typeof h&&h.enableCrossDomainCommunication){var A,I=e("appkit-utilities/xDomainChannel/connector")();i.on("timeoutComponent:beginCrossDomainSession",function(){!A&&h.target&&h.host&&(A=I.init({target:h.target,host:h.host,peerActivityCallback:function(e){i.logger.debug("User activity detected in partner site"),"logoff"===e[e.lastUpdatedBy]?i.emit("timeoutComponent:proceedToLogoff"):i.emit("messenger:userActivity")},appContext:i}))})}b()}}}),define("appkit-utilities/VOC/util",["require","blue-app/with/locationAPI","blue/siteData","blue/log","appkit-utilities/language/helper","blue/routeHistory","blue/is","blue/util"],function(e){var t=new(e("blue-app/with/locationAPI")),n=e("blue/siteData"),i=e("blue/log")("[VOCUtil]"),r=e("appkit-utilities/language/helper"),a=new(e("blue/routeHistory")),o=e("blue/is"),s=e("blue/util").object.extend,c={resizable:"yes",location:"no",status:"no",scrollbars:1,width:570,height:630,top:parseInt((screen.height-570)/2),left:parseInt((screen.width-630)/2)};function l(e){var o,c,l,d,u=r.isLanguageSetTo("es")?"/lang=es":"",p=t.getLocationProtocolAndServer()+t.getLocationPath()+"#",f=a.getHistory(0)?p+a.getHistory(0).url:"",m="",g=t.getLocationURL(),h=(new Date).getTime(),v={profileId:n.getData("ssv_pfid")||"",bSeg:n.getData("segment")||""};try{d=v,m="{"+Object.keys(d).map(function(e){return e+": '"+d[e]+"'"}).join(", ")+"}"}catch(e){i.warn("Error while performing JSON.stringify:",e)}if(l=e&&e.opinionLabParamsData&&e.opinionLabParamsData.referer||g){!l.endsWith("/")&&l.indexOf(";")<0&&(l+="/");try{l.endsWith("/")||(l+=";"),l+="bSeg="+n.getData("segment")+";brand="+n.getData("brandId")+u}catch(e){i.error("Error while performing referer URL")}l=encodeURIComponent(l)}return o={width:screen.width,height:screen.height,referer:encodeURIComponent(l),time1:h,time2:h,currentURL:encodeURIComponent(g+u),customVars:encodeURIComponent(m).replace(/'/g,"%27"),_rev:"2",custom_vars:"",ocodeVersion:"5.9",prev:encodeURIComponent(f),type:"Popup"},e&&e.opinionLabParamsData&&e.opinionLabParamsData.referer&&(e.opinionLabParamsData.referer=l),c=s({},o,e&&e.opinionLabParamsData),Object.keys(c).map(function(e){return e+"="+c[e]}).join("&")}return{openVOCSurvey:function(e,t,n){var r,a,d,u,p,f,m;p=e&&o.string(e)?e:t,n=e&&o.string(e)&&t?t:n,p||o.string(p)?(e&&o.object(e)&&i.warn('voc/util: param "context" is no longer needed'),!n||o.plainObject(n)?(r=n&&n.windowName||"OnlineOpinion",a=l(n),d=s({},c,n&&n.windowFeatures),u="resizable="+(m=d).resizable+",location="+m.location+",status="+m.status+",scrollbars="+m.scrollbars+",width="+m.width+",height="+m.height+",top="+m.top+",left="+m.left,p+="?"+a,(f=window.open(p,r,u))&&f.focus()):i.error("options must be a plain object")):i.error("surveyUrl must be a string")}}}),define("appkit-utilities/jsBridge/jsBridge",["require","blue/root"],function(e){"use strict";var t,n,i=e("blue/root"),r={};function a(e,r){var a,o,s,c=function(){n.logger.info('calling javaScript bridge "'+e+'"'),void 0!==r?i.JPKJavaScriptBridgeHandler[e](r):i.JPKJavaScriptBridgeHandler[e]()};i.hybrid&&(a=e,s=0,new Promise(function(e,n){o=setInterval(function(){i.JPKJavaScriptBridgeHandler&&i.JPKJavaScriptBridgeHandler[a]?(clearInterval(o),e()):s>=t?(clearInterval(o),n()):s++},10)})).then(function(){setTimeout(c,1)}).catch(function(){n.logger.error('javaScript bridge "'+e+'" is not available')})}return r.init=function(e,o,s){var c;if(!e||!o)throw new Error("jsBridge: missing appContext or settings. jsBridge init failed.");if("function"!=typeof o)throw new Error("jsBridge: settings must be a function. Please follow the documentation.");t=s||500,c=o(a,i,n=e),Object.keys(c).forEach(function(e){r[e]?n.logger.warn("jsBridge."+e+' already exists. Please rename method "'+e+'"'):r[e]=c[e]})},r}),define("appkit-utilities/analytics/data/hooks",[],function(){return[{module:"appkit-utilities/content/dcu",ref:"dynamicSettings",method:"get"},{module:"appkit-utilities/content/dcu",ref:"dynamicSettings",method:"set"},{module:"appkit-utilities/content/dcu",ref:"dynamicContent",method:"get"},{module:"appkit-utilities/content/dcu",ref:"dynamicContent",method:"set"}]}),define("appkit-utilities/analytics/overlay",["require","blue/event/channel/component","blue/log"],function(e){var t={},n=e("blue/event/channel/component"),i=e("blue/log")("[analytics-overlay]");function r(e){if(e&&e.output&&e.context&&e.context.is)return!0;var t=e&&e.name;return i.warn("INVALID_COMPONENT "+t),!1}function a(e,t){if(e.context.is.string(t)&&(r=t,a="Overlay",String.prototype.endsWith?r.endsWith(a):-1!==r.indexOf(a,r.length-a.length))){var n="";return e.spec&&e.spec.states&&e.spec.states[t]||(n="UNDEFINED_STATE "+t+" in "+e.name,i.warn(n)),{errorMsg:n}}var r,a;return i.warn("INVALID_STATE "+t+" in "+e.name),!1}function o(e,t,n,i){var r={value:t,overlayStatus:n,errorMsg:i};e.output.emit("state",r)}function s(e,n){var i=t[n];e.context.is.array(i)&&i.map(function(e){e()}),delete t[n]}function c(e,i,r,a,c){return new Promise(function(l){var d=function(e,t,n){return e.name+"__"+t+"__"+n}(e,c,i);s(e,d),t[d]=n.on("action/"+c,function(){o(e,i,r,a),s(e,d),l&&l()})})}return{showOverlay:function(e,t,n){var i=r(e)&&a(e,t);if(i){if(n)return c(e,t,"show",i.errorMsg,n);o(e,t,"show",i.errorMsg)}},hideOverlay:function(e,t,n){return r(e)&&a(e,t)?c(e,t,"hide","",n):Promise.reject(new Error("Invalid component or invalid state."))}}}),define("appkit-utilities/common/mediaQueryListener",["require","blue/$"],function(e){var t=e("blue/$"),n={XS:"xs",SM:"sm",MD:"md",LG:"lg"},i=function(){return!!window.getComputedStyle&&window.getComputedStyle(document.body,":after")},r=function(e){return null===e.afterElement&&(e.afterElement=i()),null===e.afterElement?n.XS:e.afterElement.getPropertyValue&&e.afterElement.getPropertyValue("content").replace(/['"]+/g,"")},a=function(){this.afterElement=i(),this.currentBreakpoint=r(this),this.lastBreakpoint=this.currentBreakpoint,this.BREAKPOINT=n,this.init()};return a.prototype={init:function(){!1!==this.afterElement&&this._resizeListener()},_resizeListener:function(){var e=this;t(window).on("resize orientationchange load",function(){e.currentBreakpoint=r(e),e.currentBreakpoint!==e.lastBreakpoint&&(t(window).trigger("breakpoint-change",e.currentBreakpoint),e.lastBreakpoint=e.currentBreakpoint)})}},new a}),define("appkit-utilities/common/timerAPI",[],function(){"use strict";var e={};return{timerMark:function(t,n){var i=(n=n||{}).timestamp||Date.now(),r=n.startStop||"";"start"===r&&(t="!"+t),"stop"===r&&(t+="!"),e[t]=i},timerReport:function(){var t=["LOAD TIMER"],n=[];for(var i in e)e.hasOwnProperty(i)&&n.push(e[i]+":"+i);if(n.length<2)return"";n.sort();var r,a,o=n[0].split(":")[1],s=n[0].split(":")[0];return n.length&&t.push(n[0].split(":")[0]+" : "+n[0].split(":")[1]),n.forEach(function(e,n,i){if(0!==n){var c=e.split(":")[1],l=e.split(":")[0],d=c.indexOf("!");0===d&&(s=l,o=c),d>0&&(a=l,r=c),t.push(l+" : "+c+" ( "+(l-i[n-1].split(":")[0])+"ms )")}}),a||(a=n[n.length-1].split(":")[0],r=n[n.length-1].split(":")[1]),t.push("Total ("+o+" -> "+r+"): "+(a-s)+"ms"),t.join("\n").replace(/\!/g,"")}}}),define("appkit-utilities/dataSet/util",[],function(){function e(e,t){return e[t]}function t(e){return void 0===e?Number.NEGATIVE_INFINITY:"string"==typeof e?e.toUpperCase():e}function n(){}return n.prototype.sort=function(n,i,r){var a="asc"===r||!0===r?-1:1,o=-1===a?1:-1;return n.sort(function(n,r){if(Array.isArray(i))for(var s,c,l=0;l<i.length;){if(s=e(n,i[l]),c=e(r,i[l]),(s=t(s))!==(c=t(c))){n=s,r=c;break}l++}else n=e(n,i),r=e(r,i),n=t(n),r=t(r);return n<r?a:n>r?o:0})},n.prototype.search=function(e,t,n){if((t=(t="number"==typeof t?String(t):t).trim())&&t.length>0){var i=new RegExp(t,"i");e=e.filter(function(e){if(n)return i.test(e[n]);for(var t in e)if(e.hasOwnProperty(t)&&i.test(e[t]))return!0})}return e},new n}),define("appkit-utilities/experimentation/config/experimentationConfig",[],function(){return{CommonAreas:[],ContentComponentSpecs:["UPDATE_PAPERLESS_PREFERENCES"],targetElements:[]}}),define("appkit-utilities/content/dcu",["require","blue/is","blue/util","blue-app/settings","blue/log"],function(e){var t,n,i=e("blue/is"),r=e("blue/util"),a="LOCALIZED_CONTENT",o=e("blue-app/settings"),s=e("blue/log")("[appkit dcu]");function c(e){var t;return t=a,r.object.has(e,"context.area.areaName")?t=a+"_"+e.context.area.areaName.toString().toLowerCase():e.area&&(t=a+"_"+e.area.name.toString().toLowerCase()),t}function l(e){return r.object.has(e,"spec.name")?e.spec.name:e.context?e.context.componentName:e.name}function d(e,t){var n,s=l(e),d=o.get(a+"_app"),u=o.get(c(e)),p=e.globalSpecs,f=function(e,n){return-1!==n.indexOf(t+".")};if(n=function(e,t,n){return e&&e[n]?e[n]:t&&t[n]?t[n]:void 0}(u,d,s)||{},i.plainObject(n)){n=r.object.filter(n,function(e,n){return-1!==n.indexOf(t+".")});for(var m=0;p&&m<p.length&&0===Object.keys(n).length;m++)n=r.object.filter(d[p[m]],f)}return n}function u(e,t,n,d){var u,p=n,f=d,m=e.globalSpecs||[];return i.plainObject(n)&&(p=d,f=n),u=function(e,t,n,s){var d,u=null,p=l(e),f=o.get(a+"_app"),m=n?t+"."+n:t;return d=function(e,t,n,i){return e&&e[n]?e:t&&t[n]?t:t&&function(e,t){if(t)for(var n=0,i=t.length;n<i;n++)if(e[t[n]])return!0;return!1}(t,i)?t:void 0}(o.get(c(e)),f,p,s),i.plainObject(d)&&((u=d[p]&&r.object.get(d[p],m))||(u=d[p]&&d[p][m]?d[p][m]:function(e,t,n){for(var i,r=0;t&&r<t.length;r++)if(i=e[t[r]][n])return i}(f,s,m))),u}(e,t,p,m),i.undefined(u)&&s.warn("Content was undefined: contentKey:"+t+", variation:"+n),u=i.defined(u)&&i.defined(f)&&i.plainObject(f)?r.string.interpolate(u,f):u}function p(e,t,n,a){var o=u.call(this,e,t,n,a);return i.undefined(o)&&s.warn("Content was undefined: contentKey:"+t+", variation:"+n),e[r.string.camelCase(t)]=o,o}function f(e,t,r){var a={};if(!i.array(t))throw s.warn("arrayOfContentKeys must be an array containing objects in the following format: {key, variation, props}"),new Error("arrayOfContentKeys must be an array containing objects in the following format: {key, variation, props}");for(var o=0;o<t.length;o++){var c=t[o];a[c.key]=r?n.get(e,c.key,c.variation,c.props):n.set(e,c.key,c.variation,c.props)}return a}return t={dynamicSettings:{get:u,set:p},dynamicContent:{get:u,set:p,getMultiple:function(e,t){return f(e,t,!0)},setMultiple:function(e,t){return f(e,t,!1)},getList:function(e,t,n,i){var r,a,o=d(e,t),s=[];return Object.keys(o).forEach(function(e){r={},(a=e.split(".")).length>1&&(r[n]=o[e],r[i]=a[1],s.push(r))}),s},getVariations:d,getGlobal:function(e,t){var r=e,a=t,o="GLOBAL";i.object(e)&&(r=e.label,a=e.variation,o=e.globalName||o);var s={area:{name:"app"},spec:{name:o}};return n.get(s,r,a)}}},n=t.dynamicContent,t}),define("appkit-utilities/experimentation/content/contentOverride",["require","appkit-utilities/experimentation/config/experimentationConfig","blue/intercept","blue-view/nodeDictionary","blue-app/settings","blue/is","appkit-utilities/content/dcu","blue/log"],function(e){var t,n=e("appkit-utilities/experimentation/config/experimentationConfig"),i=e("blue/intercept"),r=e("blue-view/nodeDictionary"),a=e("blue-app/settings"),o=e("blue/is"),s=e("appkit-utilities/content/dcu"),c=e("blue/log")("[contentOverride]"),l={};function d(e,t,n,i,r){var a=e.EXPERIMENTS;return a&&a[t]&&a[t][r+"."+n]&&a[t][r+"."+n][i]}function u(e){for(var t,n,i,r,a,c=0,d=e.length,u=0;c<d;c++)if(e[c].experimentId,t=e[c].parameter,e[c].choice,n=e[c].component,i=l[n],o.defined(i))for(u=i.length;u--;)a=i[u].component,o.defined(a)&&(t=t.split("."),r=s.dynamicSettings.set(a,t[0],t[1]),o.undefined(t[1])&&(i[u].component.spec.settings[t[0]].value=r));delete l[n]}return{init:function(){var e,a,s,c,d=this,u=n.ContentComponentSpecs||[],p=[];e=u.length,t=i.on(r,"add",function(){s=arguments[1],a=s.component&&s.component.name,!o.defined(a)||-1===u.indexOf(a)&&0!==e||(c=l[a],(p=c||[]).push(s),l[a]=p),0!==e&&e===Object.keys(l).length&&(d.overrideExperimentContent(),d.unplugComponentRegister())})},unplugComponentRegister:function(){setTimeout(t&&t.remove,1e3)},setExperiment:function(e){this.experiments=e},getExperiment:function(){return this.experiments},overrideExperimentContent:function(){var e=this.getExperiment();if(o.defined(e)){for(var t,n,i,r=Object.keys(e),s=0,c=this,l=r.length;s<l;s++)t=r[s],n=t.toString().toLowerCase(),i=a.get("LOCALIZED_CONTENT_"+n),o.defined(i)&&o.defined(e[t].content)&&!o.empty(i)&&(i=c.overrideCq5Content(i,t),a.set("LOCALIZED_CONTENT_"+n,i,a.Type.ENV),u(e[t].content));this.unplugComponentRegister()}},overrideCq5Content:function(e,t){var n=this.getExperiment();if(o.defined(e)&&o.defined(n)&&!o.empty(n)){var i,r,a,s,l,u=n[t],p=0,f=0;if(u=u&&u.content,o.defined(u))if(e.EXPERIMENTS)for(p=u.length;f<p;f++)i=u[f].experimentId,r=u[f].parameter,a=u[f].choice,s=u[f].component,"control"!==a&&(e[s]&&e[s][r]?(l=d(e,i,r,a,s))?e[s][r]=l:c.error("Experimentation overrideCq5Content failed: cannot get choice "+a+" for setting '"+r+"' in component '"+s+"' in cq5 bundle of area '"+t+"'"):c.warn("Experimentation overrideCq5Content failed: content for setting '"+r+"' does not exist in component '"+s+"' area '"+t+"'"));else c.error("Experimentation overrideCq5Content failed: EXPERIMENTS does not exist in cq5 bundle of area '"+t+"'")}return e}}}),define("appkit-utilities/content/contentSvc",["require","exports","module","blue/is","blue/device","blue/log","blue-app/settings","blue/resource/persona","appkit-utilities/experimentation/content/contentOverride","blue/util","blue/root"],function(e,t,n){"use strict";var i=e("blue/is"),r=e("blue/device"),a=e("blue/log")("[contentService]"),o=e("blue-app/settings"),s=e("blue/resource/persona"),c=e("appkit-utilities/experimentation/content/contentOverride"),l=e("blue/util").object.extend,d=e("blue/root").hybrid;return function(e){this.context||(this.context={});var t=this.context.brandIdCookie&&this.context.brandIdCookie(),u=r.shortLang,p=void 0===typeof e?d:e,f=n.config()?n.config():{},m=function(e,t){return i.defined(f[e])?f[e]:o.has(e)?o.get(e):t},g={ignoreSiteAndVersion:m("ignoreSiteAndVersion",!1),localBackup:m("localBackup",!1),useLocalContent:m("useLocalContent",!1),remoteContentUrl:m("remoteContentUrl",""),localContentUrl:m("localContentUrl",""),contentSite:m("contentSite",""),contentVersion:m("contentVersion",""),contentBrand:t||(i.defined(f.contentBrand)?f.contentBrand:""),contentViewType:p?"HYBRID":""},h=function(e){var t=f.contentUrls[e];return!!i.defined(t)&&i.defined(f.useLocalContent?t.local:t.remote)},v=function(e,t){var n=e?e.toString().toLowerCase():"app";if(t.success&&i.plainObject(t.result)){if(t.result.language===u&&(g.ignoreSiteAndVersion||t.result.version===g.contentVersion&&t.result.site===g.contentSite)){var r=c.overrideCq5Content(t.result.bundles,e);return o.set("LOCALIZED_CONTENT_"+n,r,o.Type.ENV),t}return a.warn("Remote content server response does not match requested language, version, or site"),o.set("LOCALIZED_CONTENT_"+n,{},o.Type.ENV),{}}return a.warn("Remove content server response was not successful or was formatted incorrectly"),o.set("LOCALIZED_CONTENT_"+n,{},o.Type.ENV),{}},b=function(e,t,n){var i={url:e.getContentUrl(t)};return n&&l(i,n),e.remoteContent({},i).then(v.bind(e,t)).catch(function(e){var t=e?e.toString().toLowerCase():"app";return o.set("LOCALIZED_CONTENT_"+t,{},o.Type.ENV),{}}.bind(e,t))};!p&&o.has("contentLanguage")?u=o.get("contentLanguage"):i.defined(f.contentLanguage)&&(u=f.contentLanguage),this.hasAreaBasedContentSupport=i.defined(f.contentUrls),this.hasAreaBasedContentSupport||(f.contentUrls={app:{remote:g.remoteContentUrl,local:g.localContentUrl}}),this.hasContentLocation=h("app"),this.getContentUrl=function(e){var t=f.contentUrls[e||"app"];return t?function(e){if(!e)return"";for(var t=!0===f.useBrandContent&&g.contentBrand||"",n=e,i=/:[a-zA-Z]+/g,r={":language":u,":site":g.contentSite,":version":g.contentVersion,":brand":t,":viewtype":g.contentViewType},a=null;a=i.exec(e);){var o=a[0],s=r[o]||"";n=n.replace(o,s)}return n.replace(/([^a-zA-Z])_/g,"$1").replace(/_([^a-zA-Z])/g,"$1").replace(/([^:])\/+/g,"$1/")}(f.useLocalContent?t.local:t.remote):""},this.checkContentMapping=h,this.getAppContent=function(e){return h("app")?b(this,"app",e):Promise.reject("App specific content bundle not available")},this.getAreaContent=function(e,t){return e&&!h(e)?Promise.reject("Area based content not available"):b(this,e,t)},this.setLanguage=function(e){var t=new s,n=t.read(),r=e.replace("-","_");o.set("language",e,o.Type.PERM),o.set("contentLanguage",e.split("-")[0]),this.settings("remoteContent").url=this.getContentUrl("app"),1===r.split("_").length&&(r+="_us"),i.defined(n)&&i.plainObject(n)&&(n.locale=r,t.update(n))},this.serviceCalls={remoteContent:{settings:{method:"GET",redirect:!0,timeout:3e4,xhrFields:{withCredentials:!1},disableCsrf:!0,byPassUserProfileService:!0,url:this.getContentUrl("app")}}}}}),define("appkit-utilities/content/globalContentMixin",["require","blue-app/settings"],function(e){var t,n=e("blue-app/settings"),i=function(){};return function(e,r){var a,o,s,c,l,d=this,u=d.context.is,p=n.get("LOCALIZED_CONTENT_app",n.Type.ENV);function f(e,t){d.model.set(e,t),Object.defineProperty(d,e,{get:function(){return d.model.get(e)},set:function(t){d.model.set(e,t)},configurable:!0,enumerable:!0}),d._("settings")[e]||(d._("settings")[e]={value:t})}function m(e){var t,n;if(!u.object(o))return!1;n=(t=Object.keys(o)).length;for(var i=0;i<n;i++){var r=t[i].split(".");if(r[0]===e)return 1===r.length?o[e]:null}return!1}if(a=(l=r)&&l.indexOf("GLOBAL")>=0?r:"GLOBAL",o=p&&p[a],!u.defined(e))throw d.context.logger.warn("contentKeys must be defined. A string or array of string keys is acceptable."),new Error("contentKeys must be defined. A string or array of string keys is acceptable.");if(!u.string(e)&&!u.array(e))throw d.context.logger.warn("contentKeys must be a string or an array."),new Error("contentKeys must be a string or an array.");u.string(e)&&(e=[e]),(s=d.globalSpecs||[]).push!==i&&(t=s.push,s.push=i),-1===s.indexOf(a)&&t.apply(s,[a]),d.globalSpecs&&delete d.globalSpecs,Object.defineProperty(d,"globalSpecs",{value:s,writable:!1,configurable:!0}),c=e.length;for(var g=0;g<c;g++){var h=e[g],v=m(h);v||null===v?f(h,v):d.context.logger.warn("GlobalContentMixin: contentKey that was passed in does not exist in the global spec. Key: "+h)}}}),define("appkit-utilities/content/interceptor/validator",[],function(){"use strict";var e=!1;return{around:function(t){return new Promise(function(n,i){t.proceed().then(function(i){try{if(e=e||"SHOWCONTENTLABELS"===t.target.context.state().query.string)return void n(function(e){if(e&&e.result&&e.result.bundles){var t=e.result.bundles;for(var n in t)for(var i in t[n])t[n][i]=i}return e}(i))}catch(e){}n(i)}).catch(function(e){i(e)})})}}}),define("appkit-utilities/messenger/protocolManager",[],function(){"use strict";var e=function(e,t,n){return this.current=n[e]===t?n:null,null!==this.current};function t(){this.protocols=[],this.current={commandList:[]}}return t.prototype=Object.create(null),t.prototype.constructor=t,t.prototype.clear=function(){this.protocols=[],this.current={commandList:[]}},t.prototype.inject=function(e){this.locate(e.protocol)?e.commandList.every(this.injectCommand.bind(this)):(this.protocols.push(e),this.current=this.protocols[this.protocols.length-1])},t.prototype.injectCommand=function(e){for(var t=0;t<this.current.commandList.length;t++)if(this.current.commandList[t].command===e.command)return this.current.commandList[t].action=e.action,!0;return this.current.commandList.push(e),!0},t.prototype.locate=function(t,n){if(this.protocols.some(e.bind(this,"protocol",t)))return n&&this.current.commandList.some(e.bind(this,"command",n)),this.current},t}),define("appkit-utilities/messenger/messengerProtocols",[],function(){"use strict";return{protocols:[{protocol:"handshake",commandList:[{command:"ready",action:function(){}}]},{protocol:"sessionTimeout",commandList:[{command:"userActivity",action:function(){}}]},{protocol:"childEvent",commandList:[{command:"cancel",action:function(){this.shutdown()}},{command:"setTitle",action:function(){}},{command:"returnToAccounts",action:function(){this.shutdown()}},{command:"navigate",action:function(){this.shutdown()}},{command:"documentsnavigate",action:function(){this.shutdown()}},{command:"logoff",action:function(){this.shutdown()}},{command:"viewRendered",action:function(){}},{command:"error",action:function(){}},{command:"authSuccess",action:function(){this.shutdown()}},{command:"updateState",action:function(){}},{command:"stickyData",action:function(){}},{command:"interaction",action:function(){}},{command:"logService",action:function(){}}]},{protocol:"displayEvent",commandList:[{command:"resize",action:function(){}},{command:"scrollTo",action:function(){}},{command:"getParentOffset",action:function(){}},{command:"focus",action:function(){}}]},{protocol:"parentEvent",commandList:[{command:"requestState",action:function(){}}]}]}}),define("appkit-utilities/messenger/messenger",["require","blue/log","appkit-utilities/messenger/protocolManager","blue/root","blue/is","appkit-utilities/messenger/messengerProtocols"],function(e){var t={},n=e("blue/log")("[messenger]"),i=new(e("appkit-utilities/messenger/protocolManager")),r=e("blue/root"),a=e("blue/is"),o=e("appkit-utilities/messenger/messengerProtocols"),s={},c=!1,l=!1,d=[],u=[],p=null,f=null,m=null,g=null,h=null,v=null,b=null,y=null,C=null,A=null,I=null,S=null,w=function(e,t,n){n||(n=r);for(var i=e.split(" "),a=0,o=i.length;a<o;a++)n.addEventListener(i[a],t,!1);u.push({type:e,node:n,listener:t})},E=function(e,t,n){for(var i=e.split(" "),r=0,a=i.length;r<a;r++)t.removeEventListener(i[r],n,!1)},D=function(){for(var e,t=0,n=u.length;t<n;t++)e=u[t],E(e.type,e.node,e.listener);u=[],l=!1,A=!1,c=!1},k=function(){try{if(d.length>0)for(n.info("draining queue of "+d.length+" messages");d.length>0;){var e=d.shift();p?S.postMessage(e,h):top.postMessage(e,h)}}catch(e){n.warn("Got postMessage domain error while draining queue: "+e)}},x=function(e){return(e.location.protocol+"//"+e.location.hostname+(e.location.port?":"+e.location.port:"")).toLowerCase()},T=function(){return r.document.location.origin||x(r.document)},M=function(){p?(g=f,v="parent",h=m,b="child"):(g=m,v="child",h=f,b="parent")},O=function(e){if("object"==typeof e&&void 0!==e.command){if(e.domain||(e.domain=g),c&&l)k();else{if(!c)return n.info("Attempt to post a message ("+e.command+") before initialization complete, storing"),void d.push(e);if("ready"!==e.command)return n.info("Attempt to post a message ("+e.command+") when parent not loaded - storing"),void d.push(e)}n.info("Sending message: "+e.command);try{p?S.postMessage(e,h):top.postMessage(e,h)}catch(e){n.warn("postMessage error: "+e)}}else n.info("Message in invalid format: "+e+" ignoring")},P=function(e){switch(n.info("Got <"+e.command+"> command from domain "+e.domain),e.command){case"ready":p?(l&&A&&(l=!1,A=!1,R(!0)),l=!0,k(),A||(O({protocol:"handshake",command:"ack",ackCommand:"ready",domain:g,message:v+" ready"}),A=!0,s&&s[e.command]&&s[e.command]())):(n.info(v+" is ready. We are ready to go"),l=!0,k(),O({command:"ack",ackCommand:"ready",domain:g,message:v+" ready ACK"}));break;case"ack":n.info("Got ack, "+b+" domain is "+e.domain+" and current "+b+" domain is "+h),l=!0;break;default:!function(e){var r=i.locate(e.protocol,e.command),a="messenger:"+e.command;r?(n.info("Match found for <"+e.command+"> executing"),(s&&s[e.command]?s[e.command]:r.action.bind(t))(e),e.context?e.context.eventId=a:e.context={eventId:a},y&&y.broadcast(e.context.eventId,e.context)):n.info("Protocol unrecognized: "+e.command+". Aborting.")}(e)}},L=function(e){if(n.info("Listener entered. Origin is "+e.origin),e.origin===h)n.info("Origin ok");else{var t=e.origin.toLowerCase();if(!(I.indexOf(t)>=0))return void n.info("Received message from unrecognized origin: "+e.origin+" - ignoring");n.info("Switching receivingDomain from ["+h+"] to ["+t+"]"),h=t,p&&(m=t,S=r.document.getElementById(C).contentWindow)}if(e&&e.data){var i=e.data;if(!i.command)return void n.info("Message unrecognized, ignoring");P(i)}else n.info("Missing event or event data, ignoring")}.bind(this),N=function(){w("message onmessage",function(e){L(e)}),w("unload",D)},R=function(e){var t,i=r.document.getElementById(C);if(i)if(n.debug("Found the iframe with id = "+C),t=i.src){S=i.contentWindow;var a=t.split("/");m=""===a[0]?x(S):(a[0]+"//"+a[2]).toLowerCase(),f=T(),M(),n.debug("Found domains | "+v+" domain: "+g+" | "+b+" domain: "+h),c=!0,e||(N(),n.debug("Initialized OK"),O({command:"ready",domain:g,message:v+" ready"}))}else n.warn("FATAL iframe source not set");else n.warn("FATAL iframe not located in document")},F=function(){n.info("Initializing");for(var e=0;e<o.protocols.length;++e)i.inject(o.protocols[e]);if(c=!1,l=!1,p)R();else{if(m=T(),!f||!m)return void n.warn("messenger init failed...parentDomain or childDomain was undefined.");M(),n.info("Found domains | "+v+" domain: "+g+" | "+b+" domain: "+h),c=!0,N(),O({protocol:"handshake",command:"ready",domain:g,message:v+" ready"})}};return t.activate=function(){N()},t.init=function(e){if(c)n.warn("Messenger has already been initialized!");else{if(f=a.defined(e.parentDomain)?e.parentDomain:null,y=a.defined(e.appContext)?e.appContext:null,p=!t.isFramedIn(),a.defined(e.whiteListDomains)?I=e.whiteListDomains:(n.warn("Failing to set 'whiteListDomains' property can cause errors in the production multi-pod environment that don't show up in the test environments, which don't have multiple pods."),I=[]),p){if(!e.iframeId)return void n.warn("FATAL iframe id not specified");C=e.iframeId}s=e.overrideProtocolActions,e.isStandalone||!y?F():(y.on("messenger:sendMessage",function(e){var t={};e.protocol&&(t.protocol=e.protocol),e.command&&(t.command=e.command),e.data&&(t.data=e.data),O(t)}),y.on("messenger:initMessenger",function(){F()}),y.on("messenger:activateListeners",function(){N()}),y.on("messenger:shutdownMessenger",function(){D()}))}},t.isFramedIn=function(){return r!==r.top},t.sendMessage=function(e){O(e)},t.shutdown=function(){D()},t}),define("appkit-utilities/messenger/multiMessengerProtocols",[],function(){"use strict";return{protocols:[{protocol:"handshake",commandList:[{command:"ready",action:function(){}}]},{protocol:"sessionTimeout",commandList:[{command:"userActivity",action:function(){}}]},{protocol:"childEvent",commandList:[{command:"cancel",action:function(e){this.shutdown({id:e.id})}},{command:"setTitle",action:function(){}},{command:"returnToAccounts",action:function(e){this.shutdown({id:e.id})}},{command:"navigate",action:function(e){this.shutdown({id:e.id})}},{command:"documentsnavigate",action:function(e){this.shutdown({id:e.id})}},{command:"logoff",action:function(e){this.shutdown({id:e.id})}},{command:"viewRendered",action:function(){}},{command:"error",action:function(){}},{command:"authSuccess",action:function(e){this.shutdown({id:e.id})}},{command:"updateState",action:function(){}},{command:"stickyData",action:function(){}},{command:"interaction",action:function(){}},{command:"logService",action:function(){}}]},{protocol:"displayEvent",commandList:[{command:"resize",action:function(){}},{command:"scrollTo",action:function(){}},{command:"getParentOffset",action:function(){}},{command:"focus",action:function(){}}]},{protocol:"parentEvent",commandList:[{command:"requestState",action:function(){}}]}]}}),define("appkit-utilities/messenger/multiMessenger",["require","blue/log","appkit-utilities/messenger/protocolManager","blue/root","appkit-utilities/messenger/multiMessengerProtocols"],function(e){"use strict";var t={},n=e("blue/log"),i=n("[messenger]"),r=new(e("appkit-utilities/messenger/protocolManager")),a=e("blue/root"),o=e("appkit-utilities/messenger/multiMessengerProtocols"),s=[],c=[],l=function(e,t,n,i){i||(i=a),i.addEventListener(t,n,!1),e.domEvents=e.domEvents||[],e.domEvents.push({type:t,listener:n,node:i})},d=function(e){return s.find(function(t){return t.id===e})},u=function(){return a.name||"unnamed"},p=function(e){e.logger.info("Shutting down messenger");for(var t,n,i,r=e.domEvents,a=0,o=r&&r.length;a<o;a++)t=r[a],n=t.type,i=t.listener,t.node.removeEventListener(n,i,!1);e.domEvents=[],e.destinationReady=!1,e.ackSent=!1,e.initialized=!1,e.logger.info("Messenger has been shutdown")},f=function(e,t){t.isParent?t.contentWindow.postMessage(e,t.childDomain):top.postMessage(e,t.receivingDomain)},m=function(e){if(c.length){e.logger.info("Attempting to drain "+c.length+" messages in queue");try{for(var t=c.length-1;t>=0;t--){var n=c[t];n.id&&n.id!==e.id?e.logger.warn("Message id doesn’t match recipient, ignoring"):(f(n,e),c.splice(t,1))}}catch(t){e.logger.warn("Got postMessage domain error while draining queue: "+t)}}},g=function(e){return(e.location.protocol+"//"+e.location.hostname+(e.location.port?":"+e.location.port:"")).toLowerCase()},h=function(){return a.document.location.origin||g(a.document)},v=function(e){e.isParent?(e.sendingDomain=e.parentDomain,e.sendingName="parent:"+e.parentName,e.receivingDomain=e.childDomain,e.receivingName="child:"+e.childName):(e.sendingDomain=e.childDomain,e.sendingName="child:"+e.childName,e.receivingDomain=e.parentDomain,e.receivingName="parent:"+e.parentName)},b=function(e){var i;e.isParent=!t.isFramedIn(),e.isParent?(i=e.id,e.parentName=i,e.childName=i,e.logger=n("[messenger:parent:"+e.parentName+"]")):(i=u(),e.childName=i,e.parentName=i,e.logger=n("[messenger:child:"+e.childName+"]"))},y=function(e,t){if("object"==typeof e&&e.command){if(t&&(b(t),e.domain||(e.domain=t.sendingDomain),e.id||(e.id=t.id)),t&&t.initialized&&t.destinationReady)m(t);else{if(!t||t&&!t.initialized)return i.info("Attempt to post a message <"+e.command+"> before initialization complete, storing"),void c.push(e);if("ready"!==e.command)return i.info("Attempt to post a message <"+e.command+"> before recipient has loaded, storing"),void c.push(e)}t.logger.info("Sending message: "+e.command);try{f(e,t)}catch(e){t.logger.warn("postMessage error: "+e)}}else i.info("Message in invalid format, aborting")},C=function(e,n){switch(n.logger.info("Got <"+e.command+"> command from domain "+e.domain),e.command){case"ready":n.isParent?(n.ackSent&&(n.ackSent=!1),n.destinationReady=!0,m(n),n.ackSent||(y({protocol:"handshake",command:"ack",ackCommand:"ready",message:n.sendingName+" ready"},n),n.ackSent=!0,n.overrideProtocolActions&&n.overrideProtocolActions[e.command]&&n.overrideProtocolActions[e.command](e))):(n.logger.info(n.sendingName+" is ready. We are ready to go"),n.destinationReady=!0,m(n),y({command:"ack",ackCommand:"ready",message:n.sendingName+" ready ACK"},n));break;case"ack":n.logger.info("Got ack, "+n.receivingName+" domain is "+e.domain+" and current "+n.receivingName+" domain is "+n.receivingDomain),n.destinationReady=!0;break;default:!function(e,n){var i=n.protocolManager.locate(e.protocol,e.command),r="messenger:"+e.command;i?(n.logger.info("Match found for <"+e.command+">, executing"),(n.overrideProtocolActions&&n.overrideProtocolActions[e.command]?n.overrideProtocolActions[e.command]:i.action.bind(t))(e),e.context?e.context.eventId=r:e.context={eventId:r},n.appContext&&n.appContext.broadcast(r+":"+e.id,e.context)):n.logger.info("Protocol unrecognized <"+e.command+">, aborting")}(e,n)}},A=function(e){e.initialized?e.logger.info("Listeners already activated for messenger, ignoring"):(e.initialized=!0,e.logger.info("Listeners attached for "+e.id),l(e,"message",function(n){!function(e,n){var i=e.origin.toLowerCase(),r=e.data,a=e.source;if(n.logger.info("Listener entered. Origin is "+i),t.isFramedIn()||n===s.find(function(e){return e.contentWindow===a})){if(n.receivingDomain===i)n.logger.info("Origin ok");else{if(!(n.whiteListDomains.indexOf(i)>-1))return void n.logger.info("Received message from unrecognized origin: "+i+", ignoring");n.isParent&&(n.logger.info("Reassiging childDomain and contentWindow for "+n.id+" from "+n.childDomain+" to "+i),n.childDomain=i,n.contentWindow=a),n.logger.info("Switching receivingDomain from "+n.receivingDomain+" to "+i),-1===n.whiteListDomains.indexOf(n.receivingDomain)&&n.whiteListDomains.push(n.receivingDomain),n.receivingDomain=i}if(r){if(!r.command)return void n.logger.info("Message unrecognized, ignoring");r.id||(r.id=n.id),C(r,n)}else n.logger.info("Missing event or event data, ignoring")}else n.logger.info("Message window does not match iframe window, ignoring")}(n,e)}),l(e,"unload",function(){p(e)}))},I=function(e){if(b(e),e.initialized)e.logger.warn("Messenger has already been initialized!");else{e.logger.info("Initializing");for(var t=0;t<o.protocols.length;++t)r.inject(o.protocols[t]);if(e.protocolManager=r,e.initialized=!1,e.destinationReady=!1,e.isParent)!function(e){var t,n=a.document.getElementById(e.id);n?n.src?(e.el=n,e.contentWindow=n.contentWindow,e.src=n.src,e.ackSent=!1,e.destinationReady=!1,e.logger.info("Found the iframe with id of "+e.id),""===(t=e.src.split("/"))[0]?e.childDomain=g(e.contentWindow):e.childDomain=(t[0]+"//"+t[2]).toLowerCase(),e.parentDomain=h(),v(e),e.logger.info("Found domains | "+e.sendingName+" domain: "+e.sendingDomain+" | "+e.receivingName+" domain: "+e.receivingDomain),A(e),e.logger.info("Initialized ok"),y({command:"ready",message:e.sendingName+" ready"},e)):e.logger.warn("Iframe "+e.id+" source not set, aborting"):e.logger.warn("Iframe "+e.id+" not located in document, aborting")}(e);else{if(e.childDomain=h(),!e.parentDomain||!e.childDomain)return void e.logger.warn("Messenger init failed… parentDomain or childDomain is undefined, aborting");v(e),e.logger.info("Found domains | "+e.sendingName+" domain: "+e.sendingDomain+" | "+e.receivingName+" domain: "+e.receivingDomain),A(e),y({protocol:"handshake",command:"ready",message:e.sendingName+" ready"},e)}}};return t.activate=function(e){var t;if(e&&e.id){var n=e.id;if(!(t=d(n)))return void i.info("Activate called with an id "+n+" that doesn’t match any initialized messengers, ignoring")}else{var r=s.length;if(!r)return void i.info("Activate called when there are no messengers, ignoring");t=s[r-1],i.info("Activate called without specifying id. Assuming most recent messenger.")}A(t)},t.init=function(e){var t=e.iframeId||u(),n=d(t)||{id:t};if(n.logger=i,b(n),n&&n.initialized)n.logger.warn("Messenger has already been initialized!");else{if(n.isParent){if(!e.iframeId)return void n.logger.warn("IframeId not specified, aborting");n.id=e.iframeId}else{"unnamed"===u()&&n.logger.warn("Please add a name attribute to the iframe that equals the id attribute"),n.parentDomain=e.parentDomain||null}e.whiteListDomains?n.whiteListDomains=e.whiteListDomains:(n.logger.warn("Failing to set whiteListDomains property can cause errors in the production multi-pod environment that don’t show up in the test environments, which don’t have multiple pods"),n.whiteListDomains=[]),n.overrideProtocolActions=e.overrideProtocolActions,n.appContext=e.appContext||null,n.isStandalone=e.isStandalone||!n.appContext,d(n.id)||s.push(n),n.isStandalone?I(n):(n.appContext.on("messenger:sendMessage",function(e){var t={};e.protocol&&(t.protocol=e.protocol),e.command&&(t.command=e.command),e.data&&(t.data=e.data),y(t,n)}),n.appContext.on("messenger:initMessenger",function(){I(n)}),n.appContext.on("messenger:activateListeners",function(){A(n)}),n.appContext.on("messenger:shutdownMessenger",function(){p(n)}))}},t.isFramedIn=function(){return a!==a.top},t.sendMessage=function(e){var t;if(e.id)t=d(e.id);else{var n=s.length;n&&(t=s[n-1])}y(e,t)},t.shutdown=function(e){var t;if(e&&e.id){var n=e.id;if(!(t=d(n)))return void i.info("Shutdown called with an id "+n+" that doesn’t match any initialized messengers, ignoring")}else{var r=s.length;if(!r)return void i.info("Shutdown called when there are no messengers, ignoring");t=s[r-1],i.info("Shutdown called without specifying id. Assuming most recent messenger.")}p(t)},t}),define("appkit-utilities/validation/variations",[],function(){var e="INVALID_FORMAT",t={Date:"INVALID_DATE",Length:e};return{Range:"INVALID_DATE",Ssn:e,Date:e,City:e,Email:e,Money:e,Numbers:e,Numeric:e,Pattern:e,ZipCode:e,PostalCode:e,Boolean:"MISSING_MANDATORY_DATA",Length:"INVALID_LENGTH",Characters:e,AddressLine:e,Description:e,AlphaNumeric:e,ConstraintSet:e,NotBlank:"MISSING_MANDATORY_DATA",PhoneNorthAmerica:e,PasswordCharacters:e,NotPhoneEmail:"EMAIL_ADDRESS_CANNOT_BE_PHONE_NUMBER",NotBeginWith1:"INVALID_FIRST_CHARACTER",SsnOao:"INVALID_SOCIAL_SECURITY_NUMBER",NonRepeatingCharacters:"INVALID_FORMAT_IDENTICAL_CHARACTERS",NonRepeatingAlphaNumerics:"INVALID_FORMAT_IDENTICAL_CHARACTERS",NonConsecutiveAlphaNumerics:"INVALID_FORMAT_CONSECUTIVE_CHARACTERS",phoneNumber:{NonConsecutiveAlphaNumerics:"INVALID_PHONE_NUMBER"},dateOfBirth:t,expirationDate:t,socialSecurityNumber:{NonConsecutiveAlphaNumerics:"INVALID_SOCIAL_SECURITY_NUMBER"},PersonalName:e,DateRange:"INVALID_DATE",confirmedCardId:{Numeric:"MISMATCHED_CONFIRMATION_DATA"}}}),define("appkit-utilities/validation/validationEngineAdapter",["require","blue/is","blue/util"],function(e){var t,n=e("blue/is"),i=e("blue/util"),r=function(e){return function(n,i){var r={errorType:"",isValid:e.validator(i),compareTo:e.alsoValidate||[]};return e.message&&e.message.variation?r.errorType=r.isValid?"":e.message.variation:t.warn("No variation was provided for custom validator containing these fields: "+e.fields),r}},a=function(e,i,a){for(var o=0;o<e.length;o++){var s=e[o];if(n.function(s.validator))for(var c="required"===a?s.validator:r(s),l=0;s.fields&&l<s.fields.length;l++){var d=s.fields[l];i[d]||(i[d]=[]),i[d].push({validator:c,type:a})}else t.warn("No function was provided for the custom validator, it is required.")}return i};return{processValidators:function(e,r){t=r;var o={};return e?(e.requiredValidations&&(o=a(e.requiredValidations,o,"required")),e.customValidations&&(o=a(e.customValidations,o,"custom")),e.pageValidators&&(o=function(e,i){for(var r=0;r<e.length;r++){var a=e[r];n.function(a.validator)?(i.formValidators||(i.formValidators=[]),i.formValidators.push(a.validator)):t.warn("No function was provided for the custom validator, it is required.")}return i}(e.pageValidators,o)),i.object.equals(o,{})&&(Object.keys(e).forEach(function(t){n.function(e[t])&&(e[t]=[e[t]])}),o=e),e.requiredFields&&(o.requiredFields=e.requiredFields),o):{}}}}),define("appkit-utilities/validation/componentValidate",["require","appkit-utilities/validation/variations","appkit-utilities/content/dcu","appkit-utilities/validation/validationEngineAdapter"],function(e){"use strict";var t,n,i,r,a,o,s,c,l,d,u,p,f=e("appkit-utilities/validation/variations"),m=e("appkit-utilities/content/dcu"),g=e("appkit-utilities/validation/validationEngineAdapter"),h=function(e){return e.list||e.item},v=function(e){return e.v||{}},b=function(e,t,n,i){return p.get(e,t+"Error",n,i)||"["+t+"Error."+n+"]"},y=function(e,t,n,i,r,a){return r.loadErrorsOnDemand?void(r.errorMessageStore[a]={errorType:n,props:i}):b(e,t,n,i)},C=function(e){var t={},n=e.split("."),i=["list","idx","item"];return t.item=n[0],n.length>1&&(t.path=e,n.forEach(function(e,n){t[i[n]]=e})),t},A=function(e,t){var n,a,o,s;return r(e)&&!i(e)?e:(i(e)?(t=t||{},e.forEach(function(e){if(n=C(e),s=Number(n.idx),n.list&&n.idx&&n.item){o=t[n.list]||[],a=o.length;for(var i=s;i>a;i--)o.push({});void 0===o[s]&&o.push({}),r(o[s])||!0===o[s]||1===o[s]||(o[s]={}),!0!==o[s]&&1!==o[s]&&(o[s][n.item]=!0),t[n.list]=o}else t[n.item]=!0})):console.warn("Invalid Whitelist. White list must be set as an object (preferred) or array."),t)},I=function(e,t,n,i,a,o){var s,c=v(e),l=e.model.get();return l.whiteList=A(l.whiteList||{}),s=function(e){var t=[];return r(e)?t=Object.keys(e):console.warn("Invalid Whitelist. White list must be set as an object (preferred) or array."),t.length>0?t:void 0}(l.whiteList),{model:l,validators:t,formValidators:n,validations:c,validatedComponent:e.validate(a||s),props:e.context.props,specData:e.spec.data,variations:e.context.variations||f,requiredErrorType:e.context.requiredErrorType||"MISSING_MANDATORY_DATA",loadErrorsOnDemand:l.loadErrorsOnDemand||o,errorMessageStore:i}},S=function(e,t){var n=[];return i(t)?n=function(e,t){var n=[],i=[];return t.forEach(function(t,r){Object.keys(t).forEach(function(t){(n=[]).push(e),n.push(r),n.push(t),i.push(C(n.join(".")))})}),i}(e,t):n.push(C(e)),n},w=function(e,t,n){var i={};return n&&n[e]&&(i=n[e][t]),i},E=function(e,t){var n=!0,i=e[t.property];return i&&(n=i.errorType!==t.errorType),n},D=function(e,t){return e.dtm=Date.now(),e.isFormValid=t.isValid,e[t.property]=t,e},k=function(e,t){var n=t.validation,i=t.property+t.idx+n,o=!a(e[i]&&e[i].isValid)||e[i].isValid;return!o&&t.item&&r(t.item)&&(o=!!t.item[n]),o},x=function(e,t){for(var n,i=!0,r=t.property,a=e.validators,s=Object.keys(a[r]),c=s.length,l=0;l<c;l++)if(n=s[l],o(a[r][n])&&(t.validation=n,!(i=k(e.validations,t))))return i;return i},T=function(e,t,n,i){var a,o,s,c=!1,l=t.length;for(a=0;a<l&&(s=t[a].index,o=t[a].property,(c=!!n[s])&&r(n[s])&&(c=-1!==i.indexOf(e+s+o)||!!n[s][o]),c);a++);return c},M=function(e,t){var n;if(!s(t)||0===Object.keys(t).length)return!0;if(!(e.list&&e.idx&&e.item))return t[e.item];if(n=t[e.list]){if(!i(n))return!0;if(1===n.length)return n[0][e.item];if(n.length>1&&e.idx<n.length)return n[e.idx][e.item]||!0===n[e.idx]||1===n[e.idx]}return!1},O=function(e,t){var n,o=e.list||e.item,l=t&&t[o];if(!s(t)||0===Object.keys(t).length)return!1;if(i(l)&&l.length>0){if(n=1===l.length?l[0]:l[e.idx],r(n))return!!n[e.item];if(c(n)||a(n))return!!n}else if(l)return!0;return!1},P=function(e,t,n){var o=e.model,s=e.validators,c=e.validations;return i(s[t])?(n=!!(!c[t]||a(c[t].isValid)&&c[t].isValid))||(n=!(!o.byPass||!o.byPass[t])):r(s[t])&&(n=function(e,t){var n,i={},a=!0,o=e.model,s=o.byPass&&o.byPass[t],c=o[t].length;for(n=0;n<c&&((a=!(!s||!s[n]||r(s[n])))||(i.idx=n,i.property=t,i.item=s&&s[n],a=x(e,i)));n++);return a}(e,t)),n},L=function(e){var t=e.validations,n=e.validatedComponent.failed,a={};return Object.keys(t).forEach(function(e){var n=t[e],i=n.fullPath||e;r(n)&&!n.isValid&&Object.keys(n).indexOf("isValid")>=0&&(a[e]=i)}),Object.keys(n).forEach(function(e){var t=n[e];i(t)?t.forEach(function(e){e.result&&!e.result.isValid&&(a[e.dataPath.replace(/\./g,"")]=e.dataPath)}):r(t)&&!t.isValid&&(a[e]=e)}),a},N=function(e){var t=function(e){var t=[];return Object.keys(e).forEach(function(n){a(e[n].isRequired)&&!e[n].isRequired&&t.push(n)}),t}(e.validations),n=e.validatedComponent,r=L(e),o=n.isValid&&0===Object.keys(r).length||function(e,t,n,r,a){var o,s,c,d,u,p,f=!1,m=l.deepClone(e);if(r){u=(s=Object.keys(m)).length;for(var g=0;g<u;g++)p=m[c=s[g]],d=C(p),-1===a.indexOf(c)&&M(d,r)||delete m[c];0===Object.keys(m).length&&(f=!0)}if(n&&!f){u=(s=Object.keys(t)).length;for(var h=0;h<u&&(o=s[h],(f=-1!==a.indexOf(o)||!!n[o])&&i(t[o])&&i(n[o])&&(f=T(o,t[o],n[o],a)),f);h++);}return f}(r,n.failed,e.model.byPass,e.model.whiteList,t);if(o)for(var s=Object.keys(e.validators),c=s.length,d=0;d<c&&(o=P(e,s[d],o));d++);return!!o&&B(e.formValidators,e.model)},R=function(e,t,n,i){for(var a,s=e.length,c=t.compareTo||[],l=0;l<s;l++){if(a=e[l],r(a)){if("required"===a.type)continue;if(!o(a.validator))continue;t=a.validator(i,n)}else t=a(i,n);if(!t.isValid)return t;for(var d=0;t.compareTo&&d<t.compareTo.length;d++)c.indexOf(t.compareTo[d])<0&&c.push(t.compareTo[d])}return t.compareTo=c,t},F=function(e,t,n,i){for(var s,c=e.length,l=0;l<c&&r(e);l++)if("required"===(s=e[l]).type&&o(s.validator)&&(t=s.validator(i,n),a(t)&&(t={isRequired:t}),t.isValid=!0,t.isRequired))return t;return t},_=function(e,t,n){var s=(t.path||t.item).indexOf(".")>=0?t.path:null,c=(t.path||t.item).replace(/\./g,""),d={isValid:!0,errorType:void 0,property:c,fullPath:s},p=l.deepClone(d),f=function(e,t,n){var r=h(t),a=e.failed[r],o=e.passed[r];return!n||a||o||(a=(e=n.validate(r)).failed[r]),i(a)&&(a=a.filter(function(e){return e.dataPath===t.path})[0]),a}(e.validatedComponent,t,n),m=function(e,t){var n,r=e[h(t)];return i(r)&&t.list&&t.idx&&t.item&&(n=parseInt(t.idx),r=e[t.list][n]?e[t.list][n][t.item]:""),r}(e.model,t);return m||a(m)||!t.isRequired||(p={isValid:!1,errorType:e.requiredErrorType,props:w(t.item,e.requiredErrorType,e.props)}),!p.isValid||(p=function(e,t,n){var a,o=h(n),s=t.validators;return i(s[o])?e=F(s[o],e,t.model,n):r(s[n.list])&&(a=s[n.list][n.item],i(a)&&(e=F(a,e,t.model,n))),e}(p,e,t),!a(p.isRequired)||p.isRequired||m||a(m))?(f&&p.isValid&&(p.isValid=!1,p.errorType=function(e,t,n){var i,r,a="",o=e.failedConstraints||e.result&&e.result.failedConstraints,s=o.length;for(i=0;i<s;i++){a=o[i].type;break}return(r=n[t]&&n[t][a])?r:(n[a]||u.warn('The constraint "'+a+'" does not have a definition in the variations object.The error message will be undefined until an entry is made for it onto "this.context.variations" Please consult AppKitvalidation documentation for more details.'),n[a])}(f,t.item,e.variations),p.props=w(t.item,p.errorType,e.props)),p.isValid&&((p=function(e,t,n){var a,s=h(n),c=t.validators;return i(c[s])?e=R(c[s],e,t.model,n):r(c[n.list])&&(a=c[n.list][n.item],o(a)?e=a(n,t.model):i(a)&&(e=R(a,e,t.model,n))),e}(p,e,t)).props||(p.props=w(t.item,p.errorType,e.props))),p.property||(p.property=c),p.isValid&&(p.errorMessage=""),p.fullPath=s,p):(d.isRequired=!1,d)},V=function(e,t){return e.indexOf(t)>=0},q=function(e,t,n,i){var r,a,o={},s=n.validations;return t.forEach(function(t){r=C(t),a=r.path||r.item,s[a.replace(/\./g,"")]&&M(r,n.model.whiteList)&&(r.isRequired=V(i,h(r)),o=_(n,r,e),E(s,o)&&(o.isValid||(o.errorMessage=y(e,r.item,o.errorType,o.props,n)),s=D(s,o)))}),s},U=function(e){var t=e.validatedComponent,n=l.merge(t.updated,t.failed),i=[];return Object.keys(n).forEach(function(t){"List"===e.specData[t].type?e.specData[t].items&&Object.keys(e.specData[t].items).forEach(function(n){for(var r=0;e.model[t]&&r<e.model[t].length;r++)i.push([t,r,n].join("."))}):i.push(t)}),i},j=function(e,t,n){n[e]&&"List"===n[e].type?t&&Object.keys(t).forEach(function(n){0===n.indexOf(e)&&delete t[n]}):t&&delete t[e]},B=function(e,t){for(var n=!0,i=0;e&&i<e.length&&(n=e[i](t));i++);return n},G=function(e,t){var n=t||{};n.getErrorCount=e.getErrorCount,e.v=n};return function(e,f){var w,k,x,T=this,P={},R=!1,F=null;p=e.dcu&&e.dcu.dynamicContent||m.dynamicContent,t=e.is.empty,n=e.is.string,i=e.is.array,r=e.is.object,a=e.is.boolean,o=e.is.function,c=e.is.number,s=e.is.defined,l=e.util.object,d=e.util.array,u=e.logger,w=l.deepClone(f),w=g.processValidators(w,u),k=w.formValidators||[],x=w.requiredFields||[],delete w.formValidators,delete w.requiredFields,T.addToWhiteList=function(e){var t=T.model.get(),a=t.whiteList,o=T.spec.data;n(e)&&(e=[e]),i(e)?(e=function(e,t,n){var i,r=[];return e.forEach(function(e){(i=t[e])&&"List"===i.type?i.items?Object.keys(i.items).forEach(function(t){for(var i=0;n[e]&&i<n[e].length;i++)r.push([e,i,t].join("."))}):u.warn('componentValidate.addToWhiteList can only add a root level array if the comp spec has "items" defined.'):r.push(e)}),r}(e,o,t),a&&i(a)?(a=a.slice(),T.model.set("whiteList",d.combine(a,e))):(a=r(a)?a:{},0===Object.keys(a).length&&T.v&&Object.keys(T.v).forEach(function(t){var n={};T.v[t].fullPath&&(n=C(T.v[t].fullPath)),(o[t]||o[n.list])&&-1===e.indexOf(n.path)&&-1===e.indexOf(t)&&-1===e.indexOf(n.list)&&delete T.v[t]}),T.model.set("whiteList",A(e,a))),T.validateDataItems(e,!0)):u.warn("componentValidate.addToWhiteList should takes a string or array as params")},T.removeFromWhiteList=function(e){var t,r,a,o=T.model.get("whiteList"),s=T.spec.data;!e||(e=n(e)?[e]:e,i(e))?(void 0===e&&o?o.slice().forEach(function(e){o.splice(o.indexOf(e),1),j(e,T.v,s)}):o&&i(o)?(o=o.slice(),e.forEach(function(e){(t=o.indexOf(e))>-1?o.splice(t,1):o.slice().forEach(function(t){t.split(".")[0]===e&&o.splice(o.indexOf(t),1)}),j(e,T.v,s)})):o&&e.forEach(function(e){e.indexOf(".")>=0?(a=C(e),(r=o[a.list])[a.idx]&&delete r[a.idx][a.item],T.v&&delete T.v[e.replace(/\./g,"")]):(delete o[e],j(e,T.v,s))}),T.model.set("whiteList",o),T.verifyForm()):u.warn("componentValidate.removeFromWhiteList should takes a string or array as params")},T.validateDataItems=function(e,t){var n={};e.forEach(function(e){n={context:{name:e}},T.validateDataItem(n,t)})},T.validateDataItem=function(e,n){var i,r,a,o,s,c,l,d,u,p=(d=e.context).name||d.groupName||d.checkedBinding||d.id,f=C(p),m=h(f),g=p.replace(/\./g,"");R||(R=!0,o=I(T,w,k,P),a=U(o),F=a.slice(),(l=a.indexOf(p))>=0&&a.splice(l,1),T.validateDataItems(a,!0)),i=(o=I(T,w,k,P,m,n)).validatedComponent,r=o.validations,f.isRequired=(u=e).context&&u.context.required||V(x,m),M(f,o.model.whiteList)&&(O(f,o.model.byPass)||((c=_(o,f)).isValid&&delete P[g],i.updated[m]||E(r,c)?(c.isValid||(delete P[g],c.errorMessage=y(T,f.item,c.errorType,c.props,o,g)),r=D(r,c),s=c.compareTo||[],t(s)||(r=q(T,s,o,x)),r.isFormValid&&(r.isFormValid=N(o)),G(T,r)):T.getErrorMessage({context:{name:p}})))},T.validateFormData=function(){var e,n,i,r={},a=I(T,w,k,P),o=U(a),s=a.validations;R||(R=!0,F=o.slice()),F&&(o=d.combine(o,F)),o.length>0&&o.forEach(function(n){S(n,T[n]).forEach(function(n){var i=h(n),o=(n.path||n.item).replace(/\./g,"");M(n,a.model.whiteList)&&(O(n,a.model.byPass)||(n.isRequired=V(x,i),r=_(a,n),delete P[o],r.isValid||(r.errorMessage=y(T,n.item,r.errorType,r.props,a,o)),s=D(s,r),e=r.compareTo||[],t(e)||(s=q(T,e,a,x))))})}),s.isFormValid=N(a),G(T,s),s.isFormValid||(n=L({validations:s,validatedComponent:{failed:{}}}),Object.keys(n).forEach(function(e){i=n[e],P[e]&&T.getErrorMessage({context:{name:i}})}))},T.verifyForm=function(){for(var e,t,n,i=!0,a=T.model.get(),o=v(T),s=Object.keys(o),c=s.length,l=0;l<c;l++)if(t=s[l],e=C(t),M(e,A(a.whiteList||{}))&&!O(e,a.byPass)&&(n=o[t],r(n)&&-1!==Object.keys(n).indexOf("isValid")&&!n.isValid)){i=!1;break}o.isFormValid=!!i&&B(k,T.model.get()),G(T,o)},T.getErrorMessage=function(e){var t,n=e.context&&e.context.name,i=C(n),r=h(i),a=n.replace(/\./g,""),o=T.v;if(!r)return u.warn("event context did not include a name, getErrorMessage failed."),"";t=P[a],o&&!o[a]&&(o[a]={}),t&&(o[a].errorMessage=b(T,i.item,t.errorType,t.props),delete P[a],G(T,o))},T.getErrorCount=function(){var e,t=0;return Object.keys(T.v).forEach(function(n){(e=T.v[n])&&e.errorMessage&&t++}),t}}}),define("appkit-utilities/validation/controllerValidate",[],function(){return function(e){var t=this,n=e.is.array,i=e.is.function;t.validateComponents=function(e){var r=(e=e||{}).exclusions,a=e.hideErrors,o=e.exitOnInvalid,s=!0,c=Object.keys(t.components);n(r)&&r.length&&(c=c.filter(function(e){return r.indexOf(e)<0}));for(var l=c.filter(function(e){return t.registry.hasComponent(e)}),d=0;d<l.length;d++){var u=t.components[l[d]];if(i(u.validateFormData)&&(a?u.verifyForm():u.validateFormData(),s=s&&u.v.isFormValid,o&&!s))break}return s}}}),define("appkit-utilities/validation/customValidators/addressValidators",[],function(){var e=/^[0-9]+$/;function t(e){return e&&e.toString&&e.toString()}return{zipCodeFormatValidator:function(n){return!(!(n=t(n))||!n.match(e))},zipCodeLengthValidator:function(e,n){return!!(e=t(e))&&(n?4===e.length:5===e.length)}}}),define("appkit-utilities/formatters/formattersUtil",[],function(){return{dateFormats:{L:function(){return"L"},l:function(){return"l"},LL:function(){return"LL"},ll:function(){return"ll"},LLL:function(){return"LLL"},lll:function(){return"lll"},LLLL:function(){return"LLLL"},llll:function(){return"llll"},"MM/YYYY":function(){return"MM/YYYY"},"MMM DD":function(){return"MMM DD"},"MM/DD/YYYY":function(){return"MM/DD/YYYY"},"MM-DD-YYYY":function(){return"MM-DD-YYYY"},"YYYY-MM-DD":function(){return"YYYY-MM-DD"},"MMM DD YYYY":function(){return"MMM DD YYYY"},"MMM Do YYYY":function(){return"MMM Do YYYY"},"MMM DD, YYYY":function(){return"MMM DD, YYYY"},"MMM D, YYYY":function(){return"MMM D, YYYY"},"MMMM D, YYYY":function(){return"MMMM D, YYYY"},YYYYMMDD:function(){return"YYYYMMDD"},MMDDYYYY:function(){return"MMDDYYYY"},default:function(){return"L"},LT:function(){return"LT"},LTS:function(){return"LTS"}}}}),define("appkit-utilities/formatters/dateTime",["require","moment","blue/is","blue/log","blue/util","appkit-utilities/content/dcu","appkit-utilities/formatters/formattersUtil","moment/locale/es"],function(e){var t=e("moment"),n=e("blue/is"),i=e("blue/log")("[dateTime]"),r=e("blue/util").object.extend,a=e("appkit-utilities/content/dcu"),o=e("appkit-utilities/formatters/formattersUtil").dateFormats,s=null;function c(e,t){return s||(s={hyphen:a.dynamicContent.getGlobal("hyphenSymbol"),doubleHyphen:a.dynamicContent.getGlobal("doubleHyphenSymbol"),defaultNull:a.dynamicContent.getGlobal("notAvailableLabel")}),i.warn("data '"+e+"' is invalid, please provide a valid one"),s[t]||s.defaultNull}function l(e){return n.function(o[e])?o[e]():(i.warn("Date format '"+e+"' not supported, return default MM/DD/YYYY"),o.default())}function d(e,n){var i=r({},{inputFormat:"",outputFormat:"MM/DD/YYYY",exceptionValue:"defaultNull"},n);return e&&t(e,i.inputFormat).isValid()?"en"===this.lang||"es"===this.lang?t(e,i.inputFormat).locale(this.lang).format(l(i.outputFormat)):t(e,i.inputFormat).format(l(i.outputFormat)):c(e,i.exceptionValue)}function u(e){var n=t(e),i=n.isDST()?-4:-5;return n.utc().utcOffset(i)}function p(e,t){return(e.military?"H:mm":"h:mm A")+(" ["+t+"]")+(n.string(e.dateFormat)&&0===e.dateFormat.length?"":" "+l(e.dateFormat))}function f(e,n,i,r){return t(e,n).isValid()?t(e,n).format(i):c(e,r)}return e("moment/locale/es"),t.locale("en"),{dateFormatter:function(e,t){return 1!==arguments.length||"en"!==e&&"es"!==e?d(e,t):d.bind({lang:e})},showDateTime:function(e,n){n=n||{};var i,r=t(e);return r.isValid()?(i=p(n,r.isDST()?"EDT":"EST"),u(e).format(i)):c(e,n.exceptionValue)},showDateTimeET:function(e,n){var i;return n=n||{},t(e).isValid()?(i=p(n,a.dynamicContent.getGlobal("timeZoneAbbreviation","EASTERN_TIME")),u(e).format(i)):c(e,n.exceptionValue)},timeFormatter:function(e,t){if(e&&n.string(e))return t=t||"defaultNull",function(e){return-1===e.toLowerCase().indexOf("am")&&-1===e.toLowerCase().indexOf("pm")}(e)?f(e,"H:mm","h:mm a",t):f(e,"h:mm a","H:mm",t);i.warn("Please provide the correct timeStr")},isValidDate:function(e,n,i){return t(e,n,i).isValid()},currentDayAndTime:function(e){return e?t().format(l(e)):t()}}}),define("appkit-utilities/validation/customValidators/dateValidators",["require","moment","appkit-utilities/formatters/dateTime","blue/log"],function(e){var t=e("moment"),n=e("appkit-utilities/formatters/dateTime"),i=e("blue/log")("[dateValidators]");return{checkDateRange:function(e,n,i,r){var a=t(e,r=r||"MM/DD/YYYY"),o=t(n,r),s=t(i,r);if(a.isValid()&&o.isValid()&&s.isValid())return s.isAfter(o)?1:s.isBefore(a)?-1:0},checkDateExpired:function(e,n){var r=t(e,n);if(r.isValid())return r.diff(Date(),"days")<0;i.warn("date is not valid")},isValidDate:n.isValidDate}}),define("appkit-utilities/validation/customValidators/numberValidators",["require","blue/is"],function(e){var t=e("blue/is");return{phoneNumberValidator:function(e,t){return t=t||/^[2-9][0-8][0-9][2-9][0-9][0-9][0-9]{4}$/,!(!(e=(e=e&&e.toString&&e.toString())&&e.replace(/\D/g,""))||!e.match(t))},checkNumberRange:function(e,n,i,r){var a,o,s,c=r&&r.parseFn||parseFloat,l=r&&r.rangeOption||"[]";if(t.function(c)&&function(e,n){var i=t[e];if(i){for(var r=0;r<n.length;r++)if(("number"!==e||n[r]!==1/0)&&n[r]!==-1/0&&!i(n[r]))return!1;return!0}}("number",[a=c(e),o=c(n),s=c(i)]))return function(e,t,n,i){switch(e){case"[]":return t<=i&&i<=n?0:i>n?1:-1;case"(]":return t<i&&i<=n?0:i<=t?-1:1;case"[)":return t<=i&&i<n?0:i>=n?1:-1;case"()":return t<i&&i<n?0:i>=n?1:-1}}(l,a,o,s)}}}),define("appkit-utilities/validation/customValidators/util",["require","appkit-utilities/validation/customValidators/addressValidators","appkit-utilities/validation/customValidators/dateValidators","appkit-utilities/validation/customValidators/numberValidators"],function(e){return{addressValidators:e("appkit-utilities/validation/customValidators/addressValidators"),dateValidators:e("appkit-utilities/validation/customValidators/dateValidators"),numberValidators:e("appkit-utilities/validation/customValidators/numberValidators")}}),define("appkit-utilities/validation/trigger",{validateField:{action:"validateDataItem"},validateForm:{action:"validateFormData"},getErrorMessage:{action:"getErrorMessage"},getErrorCount:{action:"getErrorCount"},verifyForm:{action:"verifyForm"}}),define("appkit-utilities/validation/util",[],function(){var e=function(e){var t={};return t.isValid=!!e,t.errorType=t.isValid?"":"MISSING_MANDATORY_DATA",t},t=function(e,t,n,i){var r={},a=!t||e>=t,o=!n||e<=n;return r.isValid=o&&a,r.errorType=r.isValid?"":i,r},n=function(e,t){var n={};return n.isValid=t.test(e)&&e.trim().length>0,n.errorType=n.isValid?"":"INVALID_FORMAT",n},i=function(e,t){var n=t[e.list||e.item];return e.list&&(n=n[e.idx]&&n[e.idx][e.item]),n},r=function(e,t,i){return e.isValid&&(e=n(t,i)),e};return{getProperty:i,isValidDate:function(n,i,r,a){var o=e(n),s=n.split("/"),c=parseInt(s[1],10),l=parseInt(s[0],10),d=parseInt(s[2],10),u=new Date(d,l-1,c);return o=o.isValid?t(u,i,r,a):o},isValidFormat:n,checkValidChar:function(e,t){var n={};return n.isValid=t.test(e),n.errorType=n.isValid?"":"INVALID_CHARACTERS",n},checkWithinRange:t,checkInvalidData:function(e,t,n){var i={};return i.isValid=!e.match(t),i.errorType=i.isValid?"":n,i},checkMissingMandatory:e,validateProperty:function(t,n,a){var o=i(t,n),s=e(o);return s=r(s,o,a)},validateOptionalProperty:function(e,t,n){var a={isValid:!0,errorType:""},o=i(e,t);return o&&(a=r(a,o,n)),a},validateSelection:function(t,n){var r=i(t,n);return e(r)}}}),define("appkit-utilities/experimentation/style/mutationObserverChannel",["require","blue/event/channel"],function(e){var t,n=new(e("blue/event/channel"));return{getInstance:function(e){return t||(t=function(e){return new MutationObserver(function(t){t.forEach(function(t){e.forEach(function(e){null!=t.target.querySelector(e)&&n.emit("domMutationEvent",{targetElement:t.target})})})}).observe(document,{childList:!0,subtree:!0}),n}(e)),t}}}),define("appkit-utilities/experimentation/style/areaEventChannel",["require","blue/event/channel"],function(e){var t,n=e("blue/event/channel");return{getInstance:function(e){return t||(t=function(e){var t=new n;return e.on("processRoute",function(e){var n=e&&e.area;t.emit("areaEvent",{area:n})}),t}(e)),t}}}),define("appkit-utilities/experimentation/style/styleOverrideUtility",[],function(){var e,t=function(e,t){var n=t&&t.component&&t.parameter&&[t.component,t.parameter].join(".");if(e&&e.attributes["data-attr"]&&e.attributes["data-attr"].value===n&&t.properties)for(var i in t.properties)t.properties.hasOwnProperty(i)&&(e.style[i]=t.properties[i])},n=function(e,n,i){i.forEach(function(i){var r=n&&n[i];r&&r.style&&0!==r.style.length&&r.style.forEach(function(n){t(e.querySelector(n.selector),n)})})};return{applyStyleOnEvent:function(t,i,r){r=r||[],"areaEvent"===t.type?e=t.area:"domMutationEvent"===t.type&&"function"==typeof t.targetElement.querySelector&&(r.push(e),n(t.targetElement,i,r),r.pop())},handleAreaStyles:n,overrideStyleProperties:t}}),define("appkit-utilities/experimentation/style/styleOverride",["require","appkit-utilities/experimentation/style/mutationObserverChannel","appkit-utilities/experimentation/style/areaEventChannel","appkit-utilities/experimentation/config/experimentationConfig","appkit-utilities/experimentation/style/styleOverrideUtility","blue/is","blue/observable"],function(e){var t=e("appkit-utilities/experimentation/style/mutationObserverChannel"),n=e("appkit-utilities/experimentation/style/areaEventChannel"),i=e("appkit-utilities/experimentation/config/experimentationConfig"),r=e("appkit-utilities/experimentation/style/styleOverrideUtility"),a=e("blue/is"),o=e("blue/observable");return function(e,s,c){if(a.defined(e)){var l=t.getInstance(i.targetElements).asEventStream(),d=n.getInstance(s).asEventStream();o.merge([l,d]).onValue(function(t){r.applyStyleOnEvent(t,e,c)})}}}),define("appkit-utilities/experimentation/bootExperimentation",["require","exports","module","appkit-utilities/experimentation/style/mutationObserverChannel","appkit-utilities/experimentation/style/areaEventChannel","appkit-utilities/experimentation/content/contentOverride","appkit-utilities/experimentation/style/styleOverride","appkit-utilities/experimentation/style/styleOverrideUtility","appkit-utilities/experimentation/config/experimentationConfig","blue-app/cache/sessionCache","blue-app/cache/oneTimeCache","blue/observable","blue/is"],function(e,t,n){var i,r,a,o,s=e("appkit-utilities/experimentation/style/mutationObserverChannel"),c=e("appkit-utilities/experimentation/style/areaEventChannel"),l=e("appkit-utilities/experimentation/content/contentOverride"),d=e("appkit-utilities/experimentation/style/styleOverride"),u=e("appkit-utilities/experimentation/style/styleOverrideUtility"),p=e("appkit-utilities/experimentation/config/experimentationConfig"),f=e("blue-app/cache/sessionCache"),m=e("blue-app/cache/oneTimeCache"),g=e("blue/observable"),h=e("blue/is"),v=[],b=n.config().enableExperiments,y="service-"+window.domainUrl+"/svc/rl/accounts/secure/v1/user/metadata/list";return{init:function(e){var t,n;b&&(r=e,l.init(),t=s.getInstance(p.targetElements).asEventStream(),n=c.getInstance(r.context).asEventStream(),h.undefined(a)&&(a=g.merge([t,n]).onValue(function(e){v.push(e)})),o=p.CommonAreas||[])},getExperimentData:function(e,t){return new Promise(function(n,a){r=h.defined(t)?t:r,h.defined(e)?h.defined(i)&&!h.empty(i)?n(i):r.services.experimentationService["experimentation.svc"](JSON.stringify({customerId:e})).then(function(e){e&&e.success?(i=e.result,n(i)):a()},function(e){a({statusText:"Service failure with status = "+e.status})}):a({statusText:"Undefined profile Id"})})},experimentationMixin:function(e){var t;b&&(f.has(y)&&(t=f.get(y).response.experimentEnabled),h.undefined(t)&&m.has(y)&&(t=m.get(y).response.experimentEnabled),!0===t)&&this.getExperimentData(e).then(function(e){l.setExperiment(e),l.overrideExperimentContent(),function(){h.function(a)&&a(),d(i,r,o);for(var e=v.length;e--;)u.applyStyleOnEvent(v.shift(),i,o)}(),requirejs(["analytics/scroll/experimentWatcher","analytics/util/experimentActionHelper"],function(e,t){e(i),t.setExperimentData(i)})}.bind(this),function(e){h.function(a)&&a(),l.unplugComponentRegister(),e&&r.context.logger.error("Experimentation not loading due to ->",e.statusText)})}}}),define("appkit-utilities/experimentation/service/experimentationService",["require","exports","module"],function(e,t,n){return function(){var e=n.config()||{};this.serviceCalls={"experimentation.svc":{settings:{type:"POST",url:window.domainUrl+"/events/svc/config/v1/decision/list",contentType:"application/json",timeout:e.serviceTimeout||3e4,disableDefaultError:!0,xhrFields:{withCredentials:!1},disableCsrf:!1}}}}}),define("appkit-utilities/formatters/number",["require","appkit-utilities/common/constants","blue/is","mout/number/currencyFormat","blue/log","blue/util","appkit-utilities/content/dcu"],function(e){var t=e("appkit-utilities/common/constants").VALUE,n=e("blue/is"),i=e("mout/number/currencyFormat"),r=e("blue/log")("[formatNumberUtil]"),a=e("blue/util").object.extend,o=e("appkit-utilities/content/dcu"),s=null;function c(e){return s||(s={hyphen:o.dynamicContent.getGlobal("hyphenSymbol"),doubleHyphen:o.dynamicContent.getGlobal("doubleHyphenSymbol"),defaultNull:o.dynamicContent.getGlobal("notAvailableLabel")}),s[e]}return{percentageFormatter:function(e,t,i){var a=parseFloat(e).toFixed(2);return n.number(parseInt(a))?t?o.dynamicContent.getGlobal("openParenthesesSymbol")+a+o.dynamicContent.getGlobal("percentageSymbol")+o.dynamicContent.getGlobal("closeParenthesesSymbol"):a+o.dynamicContent.getGlobal("percentageSymbol"):(r.warn("percentageFormatter: data '"+e+"' is invalid, please provide a valid number"),c(i)||c("defaultNull"))},decimalFormatter:function(e,t){var s=a({},{decimalPlaces:2,requireSign:!1,exceptionValue:"defaultNull"},t);return n.number(parseInt(e))?s.requireSign&&e>0?o.dynamicContent.getGlobal("plusSymbol")+i(e,s.decimalPlaces):i(e,s.decimalPlaces):(r.warn("decimalFormatter: data "+e+" is invalid, please provide a valid number"),c(s.exceptionValue)||c("defaultNull"))},prettifyNumber:function(e,i){if(!n.number(parseInt(e)))return r.warn("prettifyNumber: data "+e+" is invalid, please provide a valid number"),c(i)||c("defaultNull");switch(!0){case e>=t.TRILLION:return parseFloat(e/t.TRILLION).toFixed(2)+"T";case e>=t.BILLION&&e<t.TRILLION:return parseFloat(e/t.BILLION).toFixed(2)+"B";case e>=t.MILLION&&e<t.BILLION:return parseFloat(e/t.MILLION).toFixed(2)+"M";case e>=t.THOUSAND&&e<t.MILLION:return parseFloat(e/t.THOUSAND).toFixed(2)+"K";case e<t.THOUSAND:return parseFloat(e).toFixed(2)}},currencyFormatter:function(e,t){var s,l,d=a({},{decimalPlaces:2,dollarSign:!0,requireSign:!1,exceptionValue:"defaultNull"},t),u=o.dynamicContent.getGlobal("currencyDollarSymbol")||"$",p=o.dynamicContent.getGlobal("minusSymbol"),f=new RegExp("^\\"+p+"?\\"+u+"?|,","g"),m=new RegExp("^\\"+p,"g"),g=null;return n.string(e)&&(e[0]===p&&1===e.match(m).length&&(g=!0),(e=e.replace(f,""))==(s=parseFloat(e))&&(e=s)),n.number(e)?(e<0&&(e*=-1,g=!0),l=i(e,d.decimalPlaces),d.dollarSign&&(l=u+l),g?l=p+l:d.requireSign&&(l=o.dynamicContent.getGlobal("plusSymbol")+l),l):(r.warn("currencyFormatter: data "+e+" is invalid, please provide a valid number"),c(d.exceptionValue)||c("defaultNull"))},phoneFormatter:function(e,t,i){var a=e&&e.match&&e.match(/\d/g)&&e.match(/\d/g).join("");return!a||a&&10!==a.length?(r.warn("phoneFormatter: phone number "+e+" is invalid, please provide a valid phone number"),c(i)||c("defaultNull")):n.undefined(t)?a:"-"===t?a.substr(0,3)+o.dynamicContent.getGlobal("hyphenSymbol")+a.substr(3,3)+o.dynamicContent.getGlobal("hyphenSymbol")+a.substr(6,4):"("===t?o.dynamicContent.getGlobal("openParenthesesSymbol")+a.substr(0,3)+o.dynamicContent.getGlobal("closeParenthesesSymbol")+" "+a.substr(3,3)+o.dynamicContent.getGlobal("hyphenSymbol")+a.substr(6,4):(r.warn("phoneFormatter: second parameter sign "+t+" is not a valid sign, please provide a valid sign from either '-' or '(' "),c(i)||c("defaultNull"))},removeChar:function(e,t){return n.string(e)||n.number(e)?e.match?e.match(/\d*/g).join(""):e:(r.warn("removeChar: numberStr: "+e+" is not a string, please provide a string"),c(t)||c("defaultNull"))}}}),define("appkit-utilities/formatters/formatters",["require","appkit-utilities/formatters/number","appkit-utilities/formatters/dateTime"],function(e){return{number:e("appkit-utilities/formatters/number"),date:e("appkit-utilities/formatters/dateTime")}}),define("appkit-utilities/fileUtil/defaultTemplate",[],function(){return{v:4,t:[{t:4,f:[{t:4,f:[{t:2,r:"."},{t:2,x:{r:["i","header","delimiter"],s:'Object.keys(_1).indexOf(_0)<Object.keys(_1).length-1?_2:""'}}],n:52,i:"i",r:"header"},{t:2,r:"newline"}],n:50,r:"header"},{t:4,f:[{t:4,f:[{t:2,r:"."},{t:2,x:{r:["j","../","delimiter"],s:'Object.keys(_1).indexOf(_0)<Object.keys(_1).length-1?_2:""'}}],n:52,i:"j",r:"."},{t:2,x:{r:["i","data.length","newline"],s:'_0<(_1-1)?_2:""'}}],n:52,i:"i",r:"data"}],e:{}}}),define("appkit-utilities/fileUtil/downloader",["require","blue/is","blue-view-ractive/ractive","blue/root","blue/log","./defaultTemplate","blue/util","mout/object/values","papaparse","blue/util"],function(e){"use strict";var t=e("blue/is"),n=e("blue-view-ractive/ractive"),i=e("blue/root"),r=e("blue/log")("[appkit-downloader]"),a=e("./defaultTemplate"),o=e("blue/util").object.extend,s=e("mout/object/values"),c=e("papaparse"),l=e("blue/util").object.extend,d={".txt":{delimiter:"\t",newline:"\r\n"},".csv":{delimiter:",",newline:"\r\n"},".xls":{delimiter:",",newline:"\r\n"}};function u(){}return u.prototype={download:function(e,u,p,f){var m,g,h,v,b,y,C,A,I,S=!1,w=!1,E=[];function D(e,t){e&&(r.warn(t),S=!0)}if(u.v&&u.t?(v=u,b=p,y=l({},f)):(v=a,b=u,y=l({},p),/txt|text|csv|xls/.test(b.extension)&&(w=!0)),D(!t.object(b)||t.array(b),"settings is required and must be an object"),D(!t.string(b.name)||""===b.name,"settings.name must be a string"),D(!t.string(b.extension||""===b.extension),"settings.extension must be a string"),y&&(D(y.data,"options should not have data property"),D(y.header&&(!t.object(y.header)||t.array(y.header)),"options.header must be an object"),D(y.keyOrder&&!t.array(y.keyOrder),"options.keyOrder must be an array")),!S){var k,x;if(/text/.test(b.extension)?b.extension=".txt":0!==b.extension.indexOf(".")&&(b.extension="."+b.extension),g=b.name+(navigator.userAgent.toLowerCase().indexOf("android")>-1?"_"+(new Date).getTime().toString():"")+b.extension,(y=y||{}).data=e,d[b.extension]&&(y.delimiter=y.delimiter||d[b.extension].delimiter,y.newline=y.newline||d[b.extension].newline),y.header||!1===y.defaultHeader||(y.header={},Object.keys(e[0]).forEach(function(e){y.header[e]=e}),r.warn("define header based on data keys")),y.keyOrder&&(e.forEach(function(e){A={},y.keyOrder.forEach(function(t){if(!e[t])throw new Error("downloader: missing data for ordered key "+t);A[t]=e[t]}),E.push(A)}),y.data=E,y.header&&(w?(I=[],y.keyOrder.forEach(function(e){I.push(y.header[e])}),y.header=I):(I=JSON.parse(JSON.stringify(y.header)),y.header={},y.keyOrder.forEach(function(e){y.header[e]=I[e]})))),w?(C=o({},d[b.extension]),h=c.unparse({fields:s(y.header),data:(k=y.data,x=[],k.forEach(function(e){x.push(s(e))}),x)},C)):h=new n({template:v,data:y}).toHTML(),(m=t.defined(Blob)&&new Blob([h],{type:"text/csv"}))||r.warn("Blob data is undefined"),navigator.msSaveBlob)return navigator.msSaveBlob(m,g);var T=i.document.createElement("a");if(void 0===T.download){var M=new FileReader;M.onload=function(){window.open(M.result,"_blank").focus()},M.readAsDataURL(m)}else{var O;O=y.isLargeData?URL.createObjectURL(m):"data:attachment/csv;charset=utf-8,%EF%BB%BF"+encodeURIComponent(h),T.setAttribute("href",O),T.setAttribute("download",g),T.style.display="none",i.document.body.appendChild(T),T.click(),i.document.body.removeChild(T),t.defined(URL)&&URL.revokeObjectURL(O)}}}},u}),define("appkit-utilities/fileUtil/uploadConfig",[],function(){return{MAX_FILE_SIZE:5e6,MAX_ROWS:300,MAX_AGGREGATED_SIZE:2e7,ALLOWED_EXTENSIONS:[".csv",".png",".doc",".txt",".docx",".pdf",".xls"],ALLOWED_NUMBER_OF_FILES:20,SAME_FILE_CHECK:!0,CSV_EMPTY_DATA_CHECK:!0,MULTIPLE_FILE_INPUT:!1}}),define("appkit-utilities/fileUtil/uploader",["require","./uploadConfig","blue/log","blue/is","papaparse"],function(e){"use strict";var t=e("./uploadConfig"),n=e("blue/log")("[appkit-uploader]"),i=e("blue/is"),r=e("papaparse"),a="violatedSameFileName",o={delimiter:",",newline:"\r\n",quoteChar:'"',escapeChar:'"',header:!1,dynamicTyping:!1,preview:0,encoding:"",worker:!1,comments:!1,download:!1,skipEmptyLines:!1,fastMode:void 0};function s(e,r){this.uploadedFiles=[],r&&!i.string(r)?n.warn("Input element id must be a string\nA dynamic input element will be generated"):this.inputElementId=r,!e||i.object(e)&&!i.array(e)?this.config=e||t:(n.warn("Config must be an object\nDefault config will be used"),this.config=t)}function c(e,t,n,i){var r;"file"===t?n[i](e):((r=new FileReader).onload=function(e,t){n[e](t.target.result)}.bind(null,i),"b64"===t?r.readAsDataURL(e):r.readAsText(e))}function l(e,t,n){var i,s,l,d=e,u=d.config.SAME_FILE_CHECK,p=d.config.CSV_EMPTY_DATA_CHECK,f=d.config.MAX_ROWS,m=!1,g=[],h=[],v=function(e){var t=Object.keys(e),n={fileCounts:t.length,aggregatedSize:0,files:[]};return t.forEach(function(t){n.aggregatedSize+=e[t].size}),n}(t),b={},y=function(e){h.push(e)},C=function(e,t,n,i,r){b[i]=function(e,t,n){var i=e.data,r=[];return(e.errors||[]).length&&r.concat(e.errors),n&&i.length>n&&r.push("violatedMaxRows"),t&&(i.length<2||2===i.length&&1===i[1].length&&""===i[1][0])&&r.push("emptyData"),r}(r,p,f),c(e,t,n,i)};v.groupViolations=function(e,t){var n=e,i=[],r=n.config.MAX_AGGREGATED_SIZE,a=n.config.ALLOWED_NUMBER_OF_FILES;return r&&t.aggregatedSize>r&&i.push("violatedAggregatedSize"),a&&t.fileCounts>a&&i.push("violatedNumberOfFiles"),i}.call(null,d,v);for(var A=0;A<t.length;A++)s="csv"===(i=t[A]).name.split(".").pop().toLowerCase(),l=!(!p&&!f)&&s,g.push(new Promise(y)),l?(o.complete=C.bind(null,i,n,h,A),r.parse(i,o)):c(i,n,h,A);return Promise.all(g).then(function(e){return e.map(function(e,i){v.files[i]="file"===n?e:{name:t[i].name,size:t[i].size,data:e},v.files[i].violations=(b[i]||[]).concat(function(e,t,n){var i=e,r=[],o=i.config.MAX_FILE_SIZE,s=t.name,c=s.split(".").pop().toLowerCase();return n&&(i.uploadedFiles.indexOf(s)<0?i.uploadedFiles.push(s):r.push(a)),function(e,t){for(var n=e.config.ALLOWED_EXTENSIONS,i=!1,r=0,a=n.length;r<a;r++)i=t===n[r].split(".").pop().toLowerCase()||i;return i}.call(null,i,c)||r.push("violatedFileType"),o&&t.size>o&&r.push("violatedFileSize"),r}.call(null,d,v.files[i],u)),u&&-1!==v.files[i].violations.indexOf(a)&&!1===m&&(v.groupViolations.push(a),m=!0)}),v})}function d(e,t){var n=e;return new Promise(function(e,i){var r=function(e){return document.getElementById(e.inputElementId)}.call(null,n);n.inputElement=r||function(e){var t=e,n=document.createElement("input");return n.setAttribute("id","uploader_generated_input"),n.setAttribute("type","file"),t.config.MULTIPLE_FILE_INPUT&&n.setAttribute("multiple",""),n}.call(null,n),n.inputElement.value="",n.inputElement.onchange=function(){(function(e,t){var n=e,i=n.inputElement.files,r=l.call(null,n,i,t);return new Promise(function(e){e(r)})}).call(null,n,t).then(function(t){e(t)}).catch(function(e){i(e)})},r||document.body.appendChild(n.inputElement),n.inputElement.click(),r||document.body.removeChild(n.inputElement)})}return s.prototype=Object.create(null),s.prototype.constructor=s,s.prototype.getFileAsText=function(){return d.call(null,this,"text")},s.prototype.getFileAsb64=function(){return d.call(null,this,"b64")},s.prototype.getFileObject=function(){return d.call(null,this,"file")},s.prototype.clearUploader=function(){this.uploadedFiles.length=0},s}),define("appkit-utilities/fileUtil/index",["require","./uploader","./downloader"],function(e){return{uploader:e("./uploader"),downloader:e("./downloader")}}),define("appkit-utilities/inspect/script",["require","blue/event/channel/component"],function(e){"use strict";var t=document,n=e("blue/event/channel/component"),i=function(e){var t=function(e){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".indexOf(e)};return e.split("").map(function(e){return t(e)>-1?"NOPQRSTUVWXYZABCDEFGHIJKLMnopqrstuvwxyzabcdefghijklm"[t(e)]:e}).join("")},r=t?t[i("trgRyrzragfOlGntAnzr")].bind(t):void 0;return{gather:function(){var e,n={},a=[],o={};return t&&r?(n.url=t.URL,n[i("rkgreanyFpevcgf")]=[],n[i("cntrYriryFpevcgGntf")]=[],(e=r(i("fpevcg"))).length&&(a=Array.from(e)),a.forEach(function(e){e.type&&e.type!==i("grkg/wninfpevcg")||(e.src?n[i("rkgreanyFpevcgf")].push(e.src):((o={})[i("anzrqShapgvbaf")]=function(e){for(var t,n=new RegExp(/function\s+([^\s\(]+)/,"gm"),i=new RegExp(/([a-zA-Z0-9_\$]+)(\s*(:|=)\s*)function\s*\(/,"gm"),r=[];t=n.exec(e);)r.push(t[1]);for(;t=i.exec(e);)r.push(t[1]);return r}(e.text),o[i("nabalzbhfShapgvbaPbhag")]=function(e){for(var t,n=new RegExp(/([a-zA-Z0-9_\$]+(\s*(:|=)\s*))?function\s*\(/,"gm"),i=0;t=n.exec(e);)t[1]||i++;return i}(e.text),o[i("punenpgrePbhag")]=e.text.length,n[i("cntrYriryFpevcgGntf")].push(o)))}),n):n},send:function(e){n.emit("pageInventory",{value:e})}}}),define("appkit-utilities/service/interceptor/issueCodeMapper",[],function(){return{around:function(e){var t=e.args[0].data.compspec,n=e.target.context.issueCodeMapper||{},i=void 0===e.args[0].data.statusCodeOverride||e.args[0].data.statusCodeOverride;return delete e.args[0].data.compspec,delete e.args[0].data.statusCodeOverride,new Promise(function(r,a){e.proceed().then(function(e){if(e.issueCode){var a=n.map(t,e.issueCode);i&&1===Object.keys(a).length&&a.issueCode!==e.issueCode&&(e.statusCode=a[Object.keys(a)[0]]),e.issueCode=a}r(e)},function(e){a(e)})})}}}),define("appkit-utilities/service/interceptor/servicePromise",["require","blue/log","blue/is"],function(e){"use strict";var t=e("blue/log")("[appkit-interceptor]"),n=e("blue/is"),i=n.string;return function(e,r){if(i(e)){if(!n.defined(r)||i(r))return{around:function(t){var i,a=this,o=!0;return(t.args||[]).length&&(t.args[0]&&t.args[0][r]&&(o=!1,delete t.args[0][r]),i=a.context.util.object.deepClone(t.args[0])),new Promise(function(r,s){function c(){i&&(t.args[0]=t.target.prerequest(i,i.data)),t.proceed().then(function(e){r(e)}).catch(function(e){s(e)})}n.undefined(a.context.application[e])?s(new Error("interceptor: cannot find servicePromise")):o?a.context.application[e].then(function(){c()}).catch(function(e){s(e)}):c()})}};t.warn("overrideKey must be a string.")}else t.warn("servicePromise is required and must be a string.")}}),define("appkit-utilities/service/issueCodeMapper",["require","blue/is","blue/log"],function(e){var t=e("blue/is"),n=e("blue/log")("[issueCodeMapper]");return function(e){return{map:function(i,r){var a,o={};if(r)return i?(t.array(i)||(i=[i]),i.forEach(function(t){var n=(e[t]||{})[r]||e[r];n&&(o[t]=n)}),a=0===Object.keys(o).length?{issueCode:r}:o):a={issueCode:e[r]||r},a;n.warn("Required field issue code was not provided to the issue code mapper.")}}}}),define("appkit-utilities/view/frameUtil",["require","blue/dom","blue/is","blue/log"],function(e){var t,n=e("blue/dom"),i=e("blue/is"),r=e("blue/log")("[frameUtility]"),a=0;return{createFrame:function(e){if(!e||!e.nodeId)throw r.warn("nodeId is a required field."),new Error("nodeId is a required field.");var o=n.getElementById(e.nodeId),s=n.createElement("iframe");s.src=e.frameSrc||"",s.scrolling=e.scrolling||"yes",s.frameBorder=e.frameBorder||0,s.id=e.frameId||"frame_"+a,s.name=e.frameName||s.id,i.function(e.onLoad)&&(s.onload=e.onLoad),(e.sandbox&&i.array(e.sandbox)||!0===e.sandbox)&&(t=i.array(e.sandbox)?e.sandbox.join(" "):"",s.setAttribute("sandbox",t)),o&&(o.appendChild(s),o.style.display=e.display||"block",a++)}}}),define("appkit-utilities/view/pageTitle",["require","blue/log","appkit-utilities/content/dcu","appkit-utilities/messenger/messenger","appkit-utilities/common/constants"],function(e){var t=e("blue/log")("[pageTitle]"),n=e("appkit-utilities/content/dcu"),i=e("appkit-utilities/messenger/messenger"),r=e("appkit-utilities/common/constants").BRAND_ID,a=n.dynamicContent,o=function(e){return e.context&&e.context.pageTitle},s=function(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent};function c(e,t,n){var i;if(n=n||"",i=(e=e||{}).value,t.string(i))return!0===e.isHtml?s(i)+n:i+n}return{setTitle:function(e,n,s){var l=o(e);if(l){var d,u,p=" "+a.getGlobal("hyphenSymbol")+" ",f=null,m=e.context.userInfo,g=e.context.is,h=m&&m.brandId===r.JPMORGAN?"jpMorganOnlineLabel":"chasePersonalOnlineLabel";u=a.getGlobal(h),p=c(n.delimiter,g)||p,f=c(n.h1,g,p)||f,u=c(n.appName,g)||u,null!==f?(l.clearPrefix(),d=f+u):d=u,l.setTitle(d),i.isFramedIn()&&i.sendMessage({protocol:"childEvent",command:"setTitle",data:{title:d},id:s})}else t.error("Could not set page title because view does not have a page context.")},getTitle:function(e){var t=o(e);return t?t.getTitle():""}}}),define("appkit-utilities/view/restrictTabbing",["require","blue/log","blue/dom","blue/root"],function(e){var t=e("blue/log")("[restrictTabbing]"),n=e("blue/dom"),i=e("blue/root");return function(e,r){r=r||"a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]";var a,o=n.querySelector(e);if(o){var s=[].filter.call(o.querySelectorAll(r),function(e){return"visible"===i.getComputedStyle(e).visibility&&"-1"!==e.tabindex}),c=s[0],l=s.length,d=s[l-1];a=function(e){var t=n.activeElement,i=s.indexOf(t);9!==e.which||e.shiftKey?9===e.which&&e.shiftKey&&0===i&&(d.focus(),e.preventDefault()):i===l-1&&(c.focus(),e.preventDefault())},o.addEventListener("keydown",a)}else t.warn("Element does not exist.");return function(){o&&o.removeEventListener("keydown",a)}}}),define("appkit-utilities/view/util",["require","blue/log","blue/$","blue/is","appkit-utilities/view/pageTitle"],function(e){var t=e("blue/log")("[viewUtil]"),n=e("blue/$"),i=e("blue/is"),r=e("appkit-utilities/view/pageTitle");function a(){return t.warn("domEvent not exist"),!1}function o(e){var t=document.createElement("testelem"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var i in n)if(e.is.defined(t.style[i]))return n[i]}return{updateClassAttr:function(e,t,i){var r=n(e);i?r.removeClass(t):r.addClass(t)},isSpaceOrEnterKey:function(e){var t=e.keyCode?e.keyCode:e.domEvent?e.domEvent.keyCode:a();return 32===t||13===t},isClickOrTap:function(e){return e.domEvent?"click"===e.domEvent.type||"mouse"===e.domEvent.pointerType||"touch"===e.domEvent.pointerType||"tap"===e.domEvent.type:a()},addTransitionEvent:function(e,t,n){var i=o(e);i&&t.addEventListener(i,n)},removeTransitionEvent:function(e,t,n){var i=o(e);i&&t.removeEventListener(i,n)},isValidCTA:function(e){return this.isClickOrTap(e)||this.isSpaceOrEnterKey(e)},isEventType:function(e,t){if(t=t||[],e.domEvent){for(var n=0;n<t.length;n++)if(e.domEvent.type===t[n])return!0;return!1}return a()},setTitle:r.setTitle,getTitle:r.getTitle,adaNotify:function(e,n){var r,a,o;i.string(e)&&(i.string(n)||(n="liveregion"),a=document.createTextNode(e),(r=document.getElementById(n))||"liveregion"===n||(r=document.getElementById("liveregion")),r?((o=document.createElement("div")).appendChild(a),r.appendChild(o),setTimeout(function(){r.removeChild(o)},1e3)):t.warn("Aria-live region does not exist."))}}}),define("appkit-utilities/view/validationSubmitAda",["require","./util","blue/util","blue/log","blue/is"],function(e){"use strict";var t=e("./util"),n=e("blue/util").string,i=e("blue/log")("[validationSubmitAda]"),r=e("blue/is"),a=["input.validation__error","textarea.validation__error","select.validation__error","fieldset.validation__error input","div.validation__error input","div.validation__error-selects select"];function o(e,t){if(!e||!t||!r.string(t))throw i.warn("submitButtonId and formId are required fields. Please see documentation for details."),new Error("submitButtonId and formId are required fields. Please see documentation for details.")}return function(e,i,s,c,l){var d,u,p,f=this;r.object(e)?o(!0,e.formId):o(e,i),i=e.formId?e.formId:i,p=e.submitButtonId&&r.string(e.submitButtonId)?e.submitButtonId:e&&r.string(e)?e:"",c=e.messageForAda&&r.string(e.messageForAda)?e.messageForAda:c&&r.string(c)?c:"",s=e.liveRegionId&&r.string(e.liveRegionId)?e.liveRegionId:s&&r.string(s)?s:"liveregion",l=e.customSelectors&&r.array(e.customSelectors)?e.customSelectors:l,d=document.getElementById(i),u=p&&document.getElementById(p),f.triggerSubmitAda=function(){var e=l&&r.array(l)?a.concat(l):a,i=d.querySelectorAll(e.join(",")),o=f.model.v&&f.model.v.getErrorCount&&f.model.v.getErrorCount();o>0&&t.adaNotify(n.interpolate(c,{0:o}),s),i.length>0&&(i[0].focus(),i[0].scrollIntoView({block:"end"}))},u&&(u.removeEventListener("click",f.triggerSubmitAda),u.addEventListener("click",f.triggerSubmitAda))}}),define("appkit-utilities/view/viewFirstAda",["require","blue/device/platform","./util"],function(e){"use strict";var t=e("blue/device/platform"),n=e("./util");function i(e){var t=document.createElement("a");return t.setAttribute("href","#"),t.setAttribute("style","clip:rect(1px, 1px, 1px, 1px);white-space:nowrap;position:absolute !important;height:1px;width:1px;overflow:hidden;"),t.innerText="new content loading",e.parentNode.insertBefore(t,e),t.addEventListener("click",function(e){e.preventDefault()}),t}return function(e,r,a){if(!e||!r)throw this.context.logger.warn("The dataSpec and the target are both required parameters."),new Error("The dataSpec and the target are both required parameters.");var o,s=document.getElementById(r),c=!0,l=this;if(!s)throw this.context.logger.warn("The target parameter did not resolve to a valid DOM node, please verify."),new Error("The target parameter did not resolve to a valid DOM node, please verify.");s.setAttribute("aria-hidden","true"),"iOS"===t.os.family&&(o=i(s)),l.triggerViewFirstAda=function(){c&&(s.setAttribute("aria-hidden","false"),"iOS"===t.os.family?function(e,t,n){if(n){e.innerText=n;var i=document.createElement("span");i.setAttribute("tabindex","-1"),t.insertBefore(i,t.firstChild),e.addEventListener("click",function(t){t.preventDefault(),i.focus(),e.parentNode.removeChild(e)})}}(o,s,a):n.adaNotify(a),c=!1)},l.resetViewFirstAda=function(){c||(s.setAttribute("aria-hidden","true"),"iOS"===t.os.family&&(o=i(s)),c=!0)},l.onData(e,function(e){c&&e&&l.triggerViewFirstAda()},{init:!1})}}),define("appkit-utilities/view/webSpecUtil",["require","blue/is"],function(e){return{createWebSpec:function(t,n){var i,r,a,o="string"==typeof t?e(t):t,s=e("blue/is"),c={name:o.name,bindings:{},triggers:{}};return n&&(i=n.triggers?n.triggers:n,r=n.dataBindings&&n.dataBindings,c.defaultBindings=!s.boolean(n.defaultBindings)||n.defaultBindings,c.preventDefault=!s.boolean(n.preventDefault)||n.preventDefault,c.stopPropagation=!s.boolean(n.stopPropagation)||n.stopPropagation),o.data&&Object.keys(o.data).forEach(function(e){n&&(a=function(e,t){return a=e&&e.upstream&&e.upstream.indexOf(t)>-1?"UPSTREAM":e&&e.both&&e.both.indexOf(t)>-1?"BOTH":"DOWNSTREAM"}(r,e)),c.defaultBindings&&"DOWNSTREAM"===a?c.bindings[e]={}:c.bindings[e]={direction:a||"DOWNSTREAM"}}),i&&Object.keys(i).forEach(function(e){c.triggers[e]=i[e]}),c}}}),define("appkit-utilities/dirtyForm/interceptor/dirtyFormRouterInterceptor",["blue/is"],function(){var e=require("blue/is");return function(t){this.around=function(n){var i,r,a,o,s,c,l=!1;if(proceed=n.proceed,dirtyForm=!!t&&t.dirtyForm,!e.undefined||e.undefined(dirtyForm)||dirtyForm.onRemove||dirtyForm.overlayShowed)proceed();else{if(dirtyForm.dirtyIgnore)return proceed(),void(dirtyForm.dirtyIgnore=!dirtyForm.dirtyIgnore);if(dirtyForm.ignoreDirtyCheck())return void proceed();var d=dirtyForm.dirtyCheckAll&&dirtyForm.dirtyCheckAll()||{},u=d.instanceNames,p=t.showOverlay,f=function(){dirtyForm.onRemove=!0,dirtyForm.overlayShowed=!1,e.undefined(u)||e.array(u)&&0===u.length?dirtyForm.onRemove=!1:t.emit("dirtyDeregister",{name:u}),delete t.showOverlay,l=!0,proceed()},m=function(){dirtyForm.overlayShowed=!1;var e=d.getLastFocus();e&&e.focus&&e.focus()};if(d.isDirty){r=n.args[1].newRoute,o=(c=d.routeBlackList||[]).length;for(var g=0;g<o;g++){if((i=c[g])===r)return void proceed();if(e.object(i)&&i.test&&i.test(r))return void proceed()}a=d.component,s=d.analyticsKey||"exitConfirmationOverlay",dirtyForm.overlayShowed=!0,e.function&&e.function(p)?p(!0,f,m,a,s,d.options):t.dirtyDefaultOverlay(a,s,f,m,d.options)}else p&&p(!1,f),delete t.showOverlay,!1===l&&proceed()}}}}),define("appkit-utilities/dirtyForm/dirtyFormUtil",["require","blue/$","blue/log"],function(e){var t=e("blue/$"),n=e("blue/log")("[dirtyForm]");function i(e){if("string"==typeof e||e instanceof String){var t=0;if(0===e.length)return t;for(var i=0;i<e.length;i++){t=(t<<5)-t+e.charCodeAt(i),t&=t}return t}n.warn("The argument 'str' is not a string, please provide a string")}function r(e,t){var n,i,r=this,a={};return e&&0!==e.length?(t&&(i=JSON.parse(r.initModelStr),n=Object.keys(i)),e.map(function(e){a[e]=t&&-1!==n.indexOf(e)?i[e]:r[e]}),JSON.stringify(a)):JSON.stringify(r.model.get())}function a(e){var t=this.initModelStr,a=r.call(this,e),o=this.context.is.number(this.initHashCode)&&i(a)!==this.initHashCode;if(o)try{n.debug("The init and dirty model for component "+this.name+" is: ",JSON.parse(t),JSON.parse(a))}catch(e){}return o}function o(){return this.lastFocus}return{ignoreDirtyCheck:function(){for(var e,t=this.registeredForms||[],n=t.length,i=0;i<n;i++)if((e=t[i].dirtyIgnoreCallback)&&"function"==typeof e&&e())return!0;return!1},dynamicLastFocus:function(e,n,i){var r=this;t(e).on(n,i,function(e){r.lastFocus=e.currentTarget})},dirtyCheckAll:function(){for(var e=this.registeredForms||[],t=0;t<e.length;t++){var n=e[t],i=n.compInstanceNames,r=n.preCallback;r&&r();for(var s=0;s<i.length;s++){var c=n.controller.components;if(a.call(c[i[s]],n.whiteList))return{isDirty:!0,getLastFocus:o.bind(this),component:c[i[s]],instanceNames:i,analyticsKey:n.analyticsKey,routeBlackList:n.routeBlackList,options:n.options}}}return{isDirty:!1}},getModelStr:r,formatInput:function(e,t){for(var n=e[0],i=1;i<e.length;i++)n=n+t+e[i];return n},hashCode:i}}),define("appkit-utilities/dirtyForm/dirtyForm",["require","./interceptor/dirtyFormRouterInterceptor","./dirtyFormUtil","blue/log","blue/util","blue/is"],function(e){var t,n,i=e("./interceptor/dirtyFormRouterInterceptor"),r=e("./dirtyFormUtil"),a=e("blue/log")("[dirtyForm]"),o=e("blue/util"),s=e("blue/is"),c="blur click",l="button,input,a:not(.STYLED_SELECT),.calendar";function d(e,t){for(var n=0;n<e.length;n++)if(e[n].compInstanceNames.indexOf(t)>=0)return!0;return!1}function u(e){delete e.initModelStr,delete e.initHashCode}function p(e,t,n){var i=r.getModelStr.call(e,t,n);e.initModelStr=i,e.initHashCode=r.hashCode(i)}function f(e,n){var i,r,c,l,d,f,m,g=this.registeredForms,h=!1,v=s;t=t||o.object;for(var b=g.length-1;b>=0;b--){if(f=(r=g[b]).compInstanceNames,c=r.controller,v.array(e.name)&&e.name===f&&"remove"===n){c.context.application.dirtyForm.onRemove=!1,i=(d=t.deepClone(f)).length;for(var y=0;y<i;y++)m=d[y],u(c.components[m]),f.splice(f.indexOf(m),1)}else for(y=0;y<f.length;y++)if(m=f[y],e.name===m)if(l=c.components[m],"remove"===n)c.context.application.dirtyForm.onRemove=!1,u(l),f.splice(y,1);else if("update"===n){if(e.whiteList){if(!s.array(e.whiteList))return void a.warn("whiteList for dirtyWhiteListUpdate need to be array!");h=!0,r.whiteList=e.whiteList}l&&p(l,r.whiteList,h)}0===f.length&&g.splice(b,1)}}function m(e){var t=this;n=e.on({dirtyRegister:function(e){var n=e.selectors&&0!==e.selectors.length?r.formatInput(e.selectors,","):l,i=e.events&&0!==e.events.length?r.formatInput(e.events," "):c;(function(e,t,n){var i,c=e.controller,l=e.compInstanceNames,u=e.whiteList||[],f=e.routeBlackList||[],m=this.registeredForms,g=c.context,h=g.is||s;if(g.util.object||o.object,!h.array(l)||u&&!h.array(u)||f&&!h.array(f))a.warn("compInstanceNames, whiteList or routeBlackList need to be array!");else{e.routeBlackList=g.util.array.union(this.masterRouteBlackList,f);for(var v=0;v<l.length;v++){if(d(m,l[v]))return void a.warn("Unable to register this component: it either has been registered, or there are two identical component instace names");if(!(i=c.components[l[v]]))return void a.warn("component "+l[v]+" does not exist in controller "+g.controllerName);p(i,u)}r.dynamicLastFocus.call(this,e.target,t,n),m.push(e)}}).call(t,e,i,n)},dirtyDeregister:function(e){f.call(t,e,"remove")},dirtyUpdate:function(e){f.call(t,e,"update")},dirtyWhiteListUpdate:function(e){f.call(t,e,"update")},removeComponent:function(e){f.call(t,e,"remove")}})}return{init:function(e,t,o,d){if(n)a.warn("dirtyForm has already been initialized");else{if(!e.appName)return void a.warn("Need to pass in the app context.");t&&!s.array(t)&&(a.warn("Need to pass in the masterRouteBlackList as an array."),t=[]),l=d&&0!==d.length?r.formatInput(d,","):l,c=o&&0!==o.length?r.formatInput(o," "):c,function(e,t){e.dirtyForm={},Object.defineProperties(e.dirtyForm,{ignoreDirtyCheck:{value:r.ignoreDirtyCheck.bind(this)},dirtyCheckAll:{value:r.dirtyCheckAll.bind(this)},routerInterceptor:{value:new i(e)}}),Object.defineProperties(this,{registeredForms:{value:[]},masterRouteBlackList:{value:t||[]}}),m.call(this,e)}.call(this,e,t)}}}}),define("appkit-utilities/encryption/config",[],function(){return{pinEncryptionKeyPairVersion:"A",encryptionKeyDetails:{kty:"RSA",alg:"RSA-OAEP",ext:!0},importKeyAlgorithm:{name:"RSA-OAEP",hash:{name:"SHA-1"}},importKeys:{PKCS8:"pkcs8",SPKI:"spki",RAW:"raw",JWK:"jwk"}}}),define("appkit-utilities/encryption/util",["require","./config","blue/log","blue/util","blue/is"],function(e){"use strict";var t=e("./config"),n=t.importKeys,i=e("blue/log")("[CryptoUtil]"),r=e("blue/util"),a=e("blue/is");function o(e){for(var t=e.length,n=new ArrayBuffer(t),i=new Uint8Array(n),r=0;r<t;r++)i[r]=e.charCodeAt(r);return n}function s(e){var i,a;return e.format!==n.JWK?(i=e.publicKey,e.format!==n.RAW&&!0===e.decodeAsBase64&&(i=atob(i)),a=o(i)):(a=function(e){var t=["format","algorithm","extractable","usages","decodeAsBase64"],n=r.object.deepClone(e);return Object.keys(n).forEach(function(e){-1!==t.indexOf(e)&&delete n[e]}),n}(e),a=r.object.merge(t.encryptionKeyDetails,a)),a}function c(e){var o=[n.PKCS8,n.SPKI,n.RAW,n.JWK],c=e&&r.object.deepClone(e)||{};if(c.format&&-1===o.indexOf(c.format))i.warn("format of CryptoUtil encrypt function should be either of the following - 'raw', 'pkcs8', 'spki' or 'jwk'.");else{if(c.format=c.format||n.JWK,c.format===n.JWK){if(!c.e||!c.n)return void i.warn("getInstance of CryptoUtil failed. options must exist and contain a 'e' and 'n' property.")}else if(!c.publicKey)return void i.warn("getInstance of CryptoUtil failed. options must exist and contain a 'publicKey' property.");this.crypto=window.crypto,this.subtleCrypto=this.crypto&&this.crypto.subtle,this.format=c.format,this.keyDetails=s(c),this.extractable=c.extractable||!1,this.algorithm=c.algorithm||t.importKeyAlgorithm,this.usages=c.usages&&a.array(c.usages)&&c.usages.length>0?c.usages:["encrypt"]}}return c.prototype=Object.create(null),c.prototype.constructor=c,c.prototype.encrypt=function(e,t,n){var i,r,a,s={name:"RSA-OAEP",hash:"SHA-1",iv:this.crypto.getRandomValues(new Uint8Array(16))},c=this;return i=new Promise(function(e,t){r=e,a=t}),function(){return this.subtleCrypto.importKey(this.format,this.keyDetails,this.algorithm,this.extractable,this.usages)}.call(c).then(function(i){c.subtleCrypto.encrypt(n||s,i,t?o(e):e).then(function(e){r(e)}).catch(function(e){a(e)})}).catch(function(e){a(e)}),i},c.prototype.encode=function(e){var t,n;if(!(e&&e.length<=0||"string"!=typeof e)){t=e.length,n=new Uint8Array(t);for(var r=0;r<t;r++)n[r]=e.charCodeAt(r);return n}i.warn("Encode function data parameter must be a valid string.")},c.prototype.ab2str=function(e){return String.fromCharCode.apply(null,new Uint8Array(e))},c.prototype.getPinEncryptionKeyPairVersion=function(){return t.pinEncryptionKeyPairVersion},{getInstance:function(e){return new c(e)}}}),define("appkit-utilities/url/urlParamUtil",["require","blue/is"],function(e){"use strict";var t=e("blue/is"),n=/^[a-zA-Z0-9]{1,20}$/,i=20;function r(e,i){var r;return!!n.test(i)&&(r=e[i],!!t.string(r)&&!!n.test(r))}return{insert:function(e,n,i){var r,a,o=e,s=function(e){try{return JSON.stringify(e)}catch(e){return"circular reference found in object"}},c=function(t){var r=s(n),a=s(i);throw new Error([t,e,r,a].join(" "))};return t.string(e)||c("invalid url template"),t.plainObject(n)||c("invalid params"),t.plainObject(i)||c("invalid constraints"),r=Object.keys(n),Object.keys(i).forEach(function(e){var t=-1!==r.indexOf(e);a=new RegExp("{{"+e+"}}","g"),o=o.replace(a,t?n[e]:"")}),o},serialize:function(e){return encodeURIComponent(JSON.stringify((t=e,a=(a=(a=Object.keys(t)).filter(r.bind(null,t))).slice(0,i),n={},a.forEach(function(e){n[e]=t[e]}),n)));var t,n,a},deserialize:function(e){return function(e){var n;if(!t.plainObject(e))throw new Error("urlParams are not an object");if((n=Object.keys(e)).length>i)throw new Error("urlParams has too many params, maximum:"+i.toString());return n.forEach(function(t){if(!r(e,t))throw new Error("urlParam is not safe")}),e}(JSON.parse(decodeURIComponent(e)))}}}),define("appkit-utilities/main",[],function(){}),define("analytics/main",function(){}),define("analytics/channel/formFieldChannel",["require","blue/event/channel","blue/is","blue/util","blue/log"],function(e){var t,n=new(e("blue/event/channel")),i=e("blue/is"),r=e("blue/util"),a=e("blue/log")("[blue-analytics.formFieldChannel]"),o=function(e){var t=e.context.analyticsId?e.context.analyticsId:e.context.id;if(t){var n,o=-1;switch(e.context.componentName){case"multiselect":return e.context.options.forEach(function(t,n){if(r.object.find(e.context.selectedOptions,t))return o=-1!==o?o+", ":"",o+=n}),{formfieldName:t,closed:e.context.hasClosed,selection:o};case"styledselect":case"select":return e.context.options.forEach(function(t,n){if(t[e.context.valueKey]===e.context.value)return o=n}),{formfieldName:t,closed:e.context.hasClosed,selection:o};case"checkbox":if(i.undefined(e.context.checked)||i.null(e.context.checked))return void a.warn("No checked status found for checkbox:",e.context.componentName);case"radiobutton":return n=t.lastIndexOf("-"),function(e,t,n){var r=e.slice(0,n),a=parseInt(e.slice(n+1),10);if(r===t&&i.number(a)&&a>-1)return!0}(t,e.context.groupName,n)?{formfieldName:t.slice(0,n),selection:t.slice(n+1),checked:e.context.checked}:void a.warn("Unable to parse analyticsId/Id in template:",t);case"toggleswitch":if(i.undefined(e.context.checked)||i.null(e.context.checked))return void a.warn("No checked status found for toggleswitch:",e.context.componentName);case"datepicker":return{formfieldName:t,checked:e.context.checked};default:return{formfieldName:t}}}else a.warn("No Appkit-analytics formFieldStep found for:",e.context.componentName)};return{getInstance:function(e,i){return t||(n.emitEvent=function(e){var t,i=o(e);if(i)return t={eventTimeStamp:Date.now(),name:this.name,data:i,interaction:"focus"===e.domEvent.type?e.domEvent.type:"change"},n.emit("interaction",t)},t=n),t}}}),define("analytics/util/takeParam",["require","blue/is"],function(e){var t=e("blue/is");return function(e,n){var i;switch(n){case"number":return t.number(e)?e:(i=Number(e),Number.isNaN(i)?0:i);case"boolean":return t.boolean(e)?e:"true"===e}}}),define("analytics/bootstrapFormField",["require","analytics/channel/formFieldChannel","blue/root","blue-app/component","blue/intercept","analytics/util/takeParam"],function(e){var t,n,i=e("analytics/channel/formFieldChannel"),r=e("blue/root"),a=e("blue-app/component"),o=e.specified("blue-legacy/blue-app/config")&&r.require("blue-legacy/blue-app/component"),s=e("blue/intercept").on,c=e("analytics/util/takeParam");return function(e){var r=function(){};return a.prototype.formField=r,o&&(o.prototype.formField=r),c(e.enableAnalytics,"boolean")&&c(e.analytics.eventTypes.formFieldEvent,"boolean")&&(t=s(a,"create",function(){a.prototype.formField=i.getInstance().emitEvent,t.remove()}),o&&(n=s(o,"create",function(){o.prototype.formField=i.getInstance().emitEvent,n.remove()}))),function(){t&&t.remove(),n&&n.remove()}}}),define("analytics/channel/adsEventChannel",["require","blue/event/channel/analytics","blue/event/channel"],function(e){var t,n=e("blue/event/channel/analytics"),i=function(e){return{placement:e.placement,location:e.location,adId:e.adId,variations:e.variations,tagMap:e.tagMap,failoverReason:e.failoverReason,offerId:e.offerId,advertisementMidasId:e.midasId,adLogType:e.logType,adLogInfo:e.logInfo}},r=function(e){switch(e.type){case"requestAdvertisementActionsDisplay":return"adImpression";case"requestAdvertisementDetails":return"adClick";case"requestAdvertisementLog":return"adLog"}};return{getInstance:function(a,o){var s,c;return t||(s=new(e("blue/event/channel")),c=n.asEventStream(function(e){return"requestAdvertisementActionsDisplay"===e.type||"requestAdvertisementDetails"===e.type||"requestAdvertisementLog"===e.type}).map(function(e){return{type:r(e),eventTimeStamp:e.eventTimeStamp,data:i(e)}}),s.plug(c),t=s),t}}}),define("analytics/channel/decisionedContentEventChannel",["require","blue/log","blue/event/channel","blue/is"],function(e){var t,n=e("blue/log")("[blue-analytics.decisionedContentEventChannel]"),i=new(e("blue/event/channel")),r=e("blue/is");function a(e,t){var n={};switch(t){case"dataCollection":n.properties=e.content;break;case"simpleDecisionedContent":n.placement=Object.keys(e.content)[0],n.variation={data:e.content[n.placement]},n.properties=e.properties;break;case"simpleValueDecisionedContent":n.placement=Object.keys(e.content)[0],n.variation={data:e.content[n.placement]},n.template=e.template,n.properties=e.properties}return n}var o=function(){return i.emitEvent=function(e){var t,o=function(e){if(!r.array(e.content)||!r.array(e.properties))return r.array(e.content)&&!r.empty(e.content)&&r.undefined(e.properties)&&r.undefined(e.template)?"dataCollection":r.plainObject(e.content)&&1===Object.keys(e.content).length?e.template&&r.string(e.template)?"simpleValueDecisionedContent":"simpleDecisionedContent":void n.error("Unable to determine event type based on the content "+JSON.stringify(e.content)+" emitted from component: "+e.component.spec.name);n.error("Since content "+JSON.stringify(e.content)+" is an array, properties "+JSON.stringify(e.properties)+" cannot be emitted from component: "+e.component.spec.name)}(e);if(o)return t={data:a(e,o),eventTimeStamp:e.eventTimeStamp,name:e.component.spec.name},i.emit(o,t)},i};return{getInstance:function(e,n){return t||(t=o()),t}}}),define("analytics/util/experimentActionHelper",[],function(){var e;return{setExperimentData:function(t){e=t},getExperimentData:function(){return e},getExperimentActions:function(){var e=this.getExperimentData(),t=e&&Object.create(null),n=e&&Object.keys(e)||[],i=function(e,n){n&&n.forEach(function(n){for(var i=n.actions&&n.actions.length||0,r=0;r<i;r++)t[e+"."+n.component+"."+n.actions[r]]={experimentId:n.experimentId,choice:n.choice,action:n.actions[r]}})};return n.forEach(function(t){i(t,e[t].style),i(t,e[t].template),i(t,e[t].content)}),t}}}),define("analytics/channel/experimentActionChannel",["require","blue/event/channel","blue/event/channel/component","analytics/util/experimentActionHelper","blue/is"],function(e){var t,n,i=new(e("blue/event/channel")),r=e("blue/event/channel/component"),a=e("analytics/util/experimentActionHelper"),o=e("blue/is");return{getInstance:function(e,s,c){var l;return t&&!c||(l=r.asEventStream("action").filter(function(e){n=n||a.getExperimentActions();var t=e.target.context&&e.target.context.areaName||"app";return n&&o.defined(n[t+"."+e.target.spec.name+"."+e.action])}).map(function(e){var t=e.target.context&&e.target.context.areaName||"app";return{type:"experimentAction",name:e.target.spec.name,data:n[t+"."+e.target.spec.name+"."+e.action]}}),i.plug(l),t=i),t}}}),define("analytics/channel/experimentImpressionChannel",["require","blue/event/channel"],function(e){var t,n=e("blue/event/channel");return{getInstance:function(e,i){return t||(t=new n),t}}}),define("analytics/channel/impressionEventChannel",["require","blue/event/channel"],function(e){var t,n=e("blue/event/channel");return{getInstance:function(e,i){return t||(t=new n),t}}}),define("analytics/settings",[],function(){var e={midConfig:{enableMid:!0,version:"3.0.0",serviceUrl:"https://dpm.demdex.net/id",orgId:"EA673DFC5A2F19060A495C9C@AdobeOrg",audienceManagerServer:"dpm.demdex.net",audienceManagerServerSecure:"true",cookieKeyPre:"AMCV_"},encryptionNote:"base64:",javaScriptVer:"1.8.5",serverOffsetEnabled:!0,serverEpochHeader:"x-server-epoch",payloadEpochHeader:"server_offset",serverIsBotHeader:"x-server-bt",payloadIsBotHeader:"isBT"};return{get:function(t){return t?e[t]:e},set:function(t,n){t&&n&&(e[t]=n)}}}),define("analytics/channel/loggingEventChannel",["require","analytics/settings","blue/event/channel","blue/event/channel/component"],function(e){var t,n=e("analytics/settings"),i=function(){var t=new(e("blue/event/channel")),i=e("blue/event/channel/component").asEventStream("log").map(function(e){return function(e){var t=n.get();t.isLogMsgEncrypt&&(e.data.message&&e.data.message.stackTrace&&e.data.message.stackTrace.methodName?e.data.message.stackTrace.methodName=t.encryptionNote+btoa(e.data.message.stackTrace.methodName):e.data.message&&(e.data.message=t.encryptionNote+btoa(e.data.message)))}(e),{type:"log",timestamp:e.timestamp,data:e.data,logger:e.logger}});return t.plug(i),t};return{getInstance:function(e,n){return t||(t=i()),t}}}),define("analytics/channel/pageInventoryChannel",["require","analytics/settings","blue/event/channel","blue/event/channel/component"],function(e){var t;e("analytics/settings");return{getInstance:function(n,i){var r,a;return t||(r=new(e("blue/event/channel")),a=e("blue/event/channel/component").asEventStream("pageInventory").map(function(e){return{type:"pageInventory",timestamp:e.eventTimeStamp,data:e.value}}),r.plug(a),t=r),t}}}),define("analytics/util/stores/screenInfo",["require","blue-app/settings"],function(e){var t=e("blue-app/settings");return{getScreenId:function(){return t.get("blue-screen-id",t.Type.SITE)},setScreenId:function(e){t.set("blue-screen-id",e,t.Type.SITE)},getCurrentURL:function(){return t.get("currentURL",t.Type.SITE)},setCurrentURL:function(e){t.set("currentURL",e,t.Type.SITE)},getReferrerURL:function(){return t.get("refURL",t.Type.SITE)},setReferrerURL:function(e){t.set("refURL",e,t.Type.SITE)},getReferrerScreenId:function(){return t.get("refScreenId",t.Type.SITE)},setReferrerScreenId:function(e){t.set("refScreenId",e,t.Type.SITE)}}}),define("analytics/util/urlStateManage",["require","analytics/util/stores/screenInfo","screenmap/api/urlToAnalyticsUri"],function(e){var t=e("analytics/util/stores/screenInfo"),n=e("screenmap/api/urlToAnalyticsUri");return t.setReferrerURL(document.referrer),t.setCurrentURL(window.location.href),t.setScreenId(n(window.location.href)),function(){return t.getCurrentURL()!==window.location.href&&(t.setReferrerURL(t.getCurrentURL()),t.setReferrerScreenId(t.getScreenId()),t.setCurrentURL(window.location.href),t.setScreenId(n(window.location.href))),{currentURL:t.getCurrentURL(),referrerURL:t.getReferrerURL(),referrerScreenId:t.getReferrerScreenId(),screenId:t.getScreenId()}}}),define("analytics/channel/screenEventChannel",["require","analytics/util/urlStateManage","analytics/util/stores/screenInfo","screenmap/api/urlToAnalyticsUri","blue/log","blue/is","blue/event/channel","blue/event/channel/screen","blue/event/channel/component"],function(e){var t,n=e("analytics/util/urlStateManage"),i=e("analytics/util/stores/screenInfo"),r=e("screenmap/api/urlToAnalyticsUri"),a=e("blue/log")("[analytics-overlay]"),o=e("blue/is"),s=function(e){return e.errorMsg||o.undefined(e.value)?"undefinedOverlay":e.value},c=function(e){return{type:"screen",eventTimeStamp:e.eventTimeStamp,eventId:e.eventId,data:{referrerURL:i.getReferrerURL(),referrerScreenId:i.getReferrerScreenId()}}},l=function(){var t=new(e("blue/event/channel")),o=e("blue/event/channel/screen").asEventStream().map(function(e){return n(),c(e)}),l=e("blue/event/channel/component").asEventStream("state").filter(function(e){return function(e){var t=i.getScreenId(),n=s(e),r=t.split("?")[0];return!(["show","hide"].indexOf(e.overlayStatus)<0||("show"===e.overlayStatus&&-1!==r.indexOf(n,r.length-n.length)?(a.warn("Warning: "+n+" - called show more than once!"),1):"hide"===e.overlayStatus&&-1===r.indexOf(n,r.length-n.length)&&(a.warn("Warning: "+n+" - called hide without show first!",i.getReferrerURL()),1)))}(e)}).map(function(e){return function(e){var t="show"===e.overlayStatus?r("#/"+s(e)):i.getReferrerScreenId();i.setReferrerScreenId(i.getScreenId()),i.setScreenId(t)}(e),c(e)});return t.plug(o),t.plug(l),n(),t};return{getInstance:function(e,n){return t||(t=l()),t}}}),define("analytics/channel/scrollStopChannel",["require","blue/event/channel","blue/event/channel/domEvents"],function(e){var t=new(e("blue/event/channel")),n=e("blue/event/channel/domEvents");return function(e){return t.plug(n.asEventStream("scroll").debounce(e)),t}}),define("analytics/util/handleDynamicContentUtilMethods",["require","blue/object/extend","blue/util"],function(e){var t=e("blue/object/extend"),n=e("blue/util");function i(e){return n.object.has(e,"spec.name")?e.spec.name:e.context?e.context.componentName:e.name}function r(e,n){var r=e[1].split(".");return t(n,{name:i(e[0]),data:{placement:r.length>1?r[0]:e[1],variation:r.length>1?r[1]:e[2]}})}return{getValue:function(e,n){var i=e[0].split("."),r=e[1].split(".");return t(n,{name:i[0],data:{placement:i[1]?i[1]:r[0],variation:r[1]?r[1]:i[1]?r[0]:void 0}})},get:r,set:function(e,n){var r,a;return/\./.test(e[1])?(a=e[1].split(".")[0],r=e[1].split(".")[1]):(a=e[1],r="string"==typeof e[2]?e[2]:"string"==typeof e[3]?e[3]:e[4]),t(n,{name:i(e[0]),data:{placement:a,variation:r}})},setForBinding:r,setVariation:r}}),define("analytics/util/matchers/errorKeyword",[],function(){return function(e){return/error\_{0,1}(header){0,1}$/i.test(e)}}),define("analytics/util/matchers/communicationKeyword",[],function(){return function(e){return/communication/i.test(e)}}),define("analytics/util/matchers/all",["require","analytics/util/matchers/errorKeyword","analytics/util/matchers/communicationKeyword"],function(e){return{errorKeyword:e("analytics/util/matchers/errorKeyword"),communicationKeyword:e("analytics/util/matchers/communicationKeyword")}}),define("analytics/util/checkForAtleastOne",["require","analytics/util/matchers/all"],function(e){return function(t,n){return t.some(function(t){return e("analytics/util/matchers/all")[t](n)})}}),define("analytics/channel/variableSettingsChannel",["require","blue/object/extend","blue/event/channel","analytics/util/handleDynamicContentUtilMethods","analytics/util/checkForAtleastOne"],function(e){var t,n=e("blue/object/extend")(new(e("blue/event/channel")),e("analytics/util/handleDynamicContentUtilMethods"));return{getInstance:function(i,r){return t||(n.emitEvent=function(t){var i,r=t.proceed();if(r){i={type:"communication",eventTimeStamp:Date.now()};var a=n[t.method](t.args,i);e("analytics/util/checkForAtleastOne")(["errorKeyword","communicationKeyword"],a.data.placement)&&n.emit(a)}return r},t=n),t}}}),define("analytics/channel/webEventChannel",["require","blue/event/channel/component","blue/event/channel"],function(e){var t,n=e("blue/event/channel/component");function i(e){var t={},n=e.target,i=n.spec.data?n.model.toJSON(n.spec.data).model:{};return Object.keys(i).forEach(function(e){t[e]={value:i[e]}}),t}return{getInstance:function(r,a,o){var s,c;return t&&!o||(s=new(e("blue/event/channel")),c=(c=n.asEventStream("action")).map(function(e){return{type:"action",eventTimeStamp:e.eventTimeStamp,name:e.target.spec.name,data:i(e),action:e.action,nonCustomerEvent:e.nonCustomerEvent}}),s.plug(c),t=s),t}}}),define("analytics/util/serverData",["require","analytics/settings"],function(e){var t,n=e("analytics/settings").get();function i(){this.offset=void 0,this.isBot=!1}return i.prototype=Object.create(null),i.prototype={constructor:i,setData:function(e,t,i){var r=i?i.length:0;this.offset=e,this.isBot=t;for(var a=0;a<r;a++)i[a].location[n.payloadEpochHeader]=this.offset,i[a].device[n.payloadIsBotHeader]=this.isBot},getOffset:function(){return this.offset},getIsBot:function(){return this.isBot}},function(){return t||(t=new i),t}}),define("analytics/util/computeUTCOffset",[],function(){return function(e){var t=parseInt(e/60),n=Math.abs(t);return 0===t?"+0":n<10?"".concat(t<0?"+":"-",n):t>0?"-".concat(n):"+".concat(n)}}),define("analytics/computed/identity",["require","analytics/util/serverData","blue/device","blue/device","blue/device","blue/device","blue/device","blue/root","analytics/settings","analytics/util/computeUTCOffset"],function(e){"use strict";var t=e("analytics/util/serverData")();return{get:function(){var n=(new Date).toLocaleTimeString("en-us",{timeZoneName:"short"}).split(" ")[2];return{device:{screenRes:e("blue/device").dimensions.screen.width+"x"+e("blue/device").dimensions.screen.height,browserRes:e("blue/device").dimensions.window.width+"x"+e("blue/device").dimensions.window.height,browserLang:e("blue/device").lang,colorDepth:e("blue/root").screen.colorDepth,javaScriptVer:e("analytics/settings").get("javaScriptVer"),isBT:t.getIsBot()},location:{timezone:n,tz_offset:e("analytics/util/computeUTCOffset")((new Date).getTimezoneOffset()),server_offset:t.getOffset()}}}}}),define("analytics/util/stores/v1stCookie",["require","blue/random","blue/is","blue/root","blue/store/enumerable/cookie"],function(e){var t=e("blue/random"),n=e("blue/is"),i=e("blue/root"),r=i.location&&i.location.hostname?i.location.hostname:"",a=""===r?"":"localhost"===r?void 0:".chase.com",o=new(e("blue/store/enumerable/cookie"))(null,!0);return{read:function(){var e=o.get("v1st");if(!n.string(e)||16!==e.length){var i=new Date((new Date).setYear((new Date).getYear()+1905));o.set("v1st",function(){for(var e=["A","B","C","D","E","F","0","1","2","3","4","5","6","7","8","9"],n=16,i="";n--;)i+=e[Math.floor(16*t())];return i}(),i,"/",a),e=o.get("v1st")}return e}}}),define("analytics/util/stores/s_viCookie",["require","blue/random","blue/is","blue/root","analytics/util/stores/v1stCookie","blue/store/enumerable/cookie"],function(e){var t=e("blue/random"),n=e("blue/is"),i=e("blue/root"),r=e("analytics/util/stores/v1stCookie").read(),a=i.location&&i.location.hostname?i.location.hostname:"",o=""===a?"":"localhost"===a?void 0:".chase.com",s=new(e("blue/store/enumerable/cookie"))(null,!0)||"",c=function(e,n){return"[CS]v1|"+e+"-"+function(e){for(var n=["A","B","C","D","E","F","0","1","2","3","4","5","6","7","8","9"],i=e,r="";i--;)r+=n[Math.floor(e*t())];return r}(n)+"[CE]"};return{read:function(){var e=s.get("s_vi");if(n.string(r)&&16===r.length&&(!n.string(e)||44!==e.length)){var t=new Date((new Date).setYear((new Date).getYear()+1905));s.set("s_vi",c(r,16),t,"/",o,!0),e=s.get("s_vi")}return e}}}),define("analytics/computed/user",["require","blue/resource/persona","analytics/util/stores/v1stCookie","analytics/util/stores/s_viCookie","blue/siteData","blue/store/enumerable/cookie"],function(e){var t=(new(e("blue/resource/persona"))).read(),n=e("analytics/util/stores/v1stCookie").read(),i=e("analytics/util/stores/s_viCookie").read(),r=e("blue/siteData"),a=new(e("blue/store/enumerable/cookie"))(null,!0);return function(){var e=a.get("SMSESSION"),o=a.get("_tmprememberme"),s=a.get("_rememberme"),c=r.getData("ssv_eci")?r.getData("ssv_eci"):t?t.ECI:void 0,l=r.getData("profileId")?r.getData("profileId"):window.profileId?window.profileId:t?t.pfid:void 0,d=c&&l?s&&0!==o?s||1===o?"knwn_rmbrme":"unknwn":"knwn":"unknwn",u=r.getData("aggregatedAccountType")?r.getData("aggregatedAccountType"):void 0;return{eci:c,profileId:l,visitorId:n,s_vi:i,segment:r.getData("segment")?r.getData("segment"):t?t.segment:void 0,userType:r.getData("userType")||void 0,loggedInState:"LOGGEDOFF"!==e&&e&&e.length>0?"Y":"N",visitorType:d,aggregatedAccountType:u}}}),define("analytics/computed/midCompute",["require","exports","module","blue/store/enumerable/cookie","blue/is","blue/util","blue/root","blue/log","analytics/computed/user","analytics/settings"],function(e,t,n){var i=new(e("blue/store/enumerable/cookie"))(null,!0),r=e("blue/is"),a=e("blue/util"),o=e("blue/root"),s=e("blue/log")("[blue-analytics]"),c=e("analytics/computed/user"),l=e("analytics/settings").get("midConfig"),d=!r.empty(n.config())&&a.object.merge(l,n.config())||l,u=o.location&&o.location.hostname?o.location.hostname:"",p=""===u?"":"localhost"===u?void 0:".chase.com",f=d.cookieKeyPre+d.orgId,m=!1,g=!1,h=function(){var e,t,n="0123456789",i="",r="",a=10,o=10;for(e=0;19>e;e++)t=Math.floor(Math.random()*a),i+=n.substring(t,t+1),0===e&&9==t?a=3:(1==e||2==e)&&10!=a&&2>t?a=10:2<e&&(a=10),t=Math.floor(Math.random()*o),r+=n.substring(t,t+1),0===e&&9==t?o=3:(1==e||2==e)&&10!=o&&2>t?o=10:2<e&&(o=10);return i+r},v=function(e,t){var n;if(r.defined(e)&&(n=e.services&&e.services.analyticsTracking)&&!m)return m=!0,d.serviceUrl&&(n.settings("analytics.mid.create.svc").url=d.serviceUrl),n["analytics.mid.create.svc"](t).then(function(e){return C(e)}).catch(function(e){return s.warn("Demdex Failure - MID :",e),g?void 0:(g=!0,C({d_mid:h()}))}).then(function(){m=!1})},b=function(){return c()},y=function(e,t){var n=t+/\|(([\w&.\-]+\.)?([\w&.\-]+\.)?(\*|[\w&.\-]+))(?=$|\|)/.source,i=e.match(n);return i&&i[1]||""},C=function(e){var t,n=i.get(f),o=b()||{},s={},c=new Date((new Date).setYear((new Date).getYear()+1905));return r.defined(e)&&(e=!r.object(e)&&JSON.parse(e)||e,s={SETTINGS_DIGEST:A(d.version+"|"+d.audienceManagerServer+"|"+d.audienceManagerServerSecure),MCMID:r.defined(e.d_mid)&&e.d_mid||"",MCAAMLH:r.defined(e.dcs_region)&&e.dcs_region||"",MCAAMB:r.defined(e.d_blob)&&e.d_blob||"",MCCIDHVALUE:r.defined(o.eci)&&r.defined(o.profileId)&&r.defined(n)&&A(o.eci+o.profileId)?"MCCIDH":"",MCCIDH:r.defined(o.eci)&&r.defined(o.profileId)&&r.defined(n)&&A(o.eci+o.profileId)||"",MCOPTOUT:r.defined(e.d_optout)&&"none"!=e.d_optout.toString().toLowerCase()&&e.d_optout||"isoptedout-false"},t=a.string.interpolate("{{SETTINGS_DIGEST}}|MCIDTS|17564|MCMID|{{MCMID}}|MCAID|NONE|MCOPTOUT|{{MCOPTOUT}}|MCAAMLH|{{MCAAMLH}}|MCAAMB|{{MCAAMB}}|{{MCCIDHVALUE}}|{{MCCIDH}}|MCSYNCSOP|411-17568|vVersion|2.3.0",s),i.set(f,t,c,"/",p)),t},A=function(e){var t,n=0;if(r.defined(e))for(e=e.toString(),t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n&=n;return n},I=function(e){var t=i.get(f);return e=e||"MCMID",r.defined(t)&&!r.empty(d)&&d.enableMid&&y(t,e)||void 0},S=function(){return{adobeData:i.get(f)}};return{get:I,set:function(e){var t=I();return r.defined(t)||r.empty(d)||!d.enableMid?t:v(e,{d_ver:2,d_orgid:d.orgId})},getAdobeData:S,linkCustomerId:function(e){var t,n=b()||{},a=i.get(f);if(r.defined(a)&&r.defined(n.eci)&&r.defined(n.profileId)&&!r.empty(d)&&d.enableMid&&y(a,"MCCIDH")!==A(n.eci+n.profileId).toString())return t="d_orgid="+d.orgId+"&d_mid="+y(a,"MCMID")+"&d_blob="+y(a,"MCAAMB")+"&d_cid_ic=pfid%01"+n.profileId+"%011&d_cid_ic=pfidtest%01"+n.profileId+"%011&d_cid_ic=eci%01"+n.eci+"%011&d_cid_ic=v1st%01"+n.visitorId+"%011&d_ver=2",v(e,t)},updateMidInEvents:function(e){var t=I(),n=e.length;if(r.defined(t))for(var i=0;i<n;i++)e[i].visitor=a.object.extend(e[i].visitor,S())}}}),require.config({paths:{analytics:"analytics/js","blue-legacy":"blue-legacy/dist/blue-legacy/js"}}),define("analytics/config",function(){}),define("analytics/config/channelMapperConfig",[],function(){return[{name:"webEvent",channel:"analytics/channel/webEventChannel",mapper:"analytics/mapper/webEventMapper"},{name:"screenEvent",channel:"analytics/channel/screenEventChannel",mapper:"analytics/mapper/screenEventMapper"},{name:"variableSettingsEvent",channel:"analytics/channel/variableSettingsChannel",mapper:"analytics/mapper/variableSettingsEventMapper"},{name:"decisionedContentEvent",channel:"analytics/channel/decisionedContentEventChannel",mapper:"analytics/mapper/decisionedContentEventMapper"},{name:"adsEvent",channel:"analytics/channel/adsEventChannel",mapper:"analytics/mapper/adsEventMapper"},{name:"loggingEvent",channel:"analytics/channel/loggingEventChannel",mapper:"analytics/mapper/loggingEventMapper"},{name:"impressionEvent",channel:"analytics/channel/impressionEventChannel",mapper:"analytics/mapper/impressionEventMapper"},{name:"formFieldEvent",channel:"analytics/channel/formFieldChannel",mapper:"analytics/mapper/formFieldEventMapper"},{name:"experimentImpressionEvent",channel:"analytics/channel/experimentImpressionChannel",mapper:"analytics/mapper/experimentImpressionMapper"},{name:"experimentActionEvent",channel:"analytics/channel/experimentActionChannel",mapper:"analytics/mapper/experimentActionMapper"},{name:"pageInventoryEvent",channel:"analytics/channel/pageInventoryChannel",mapper:"analytics/mapper/pageInventoryMapper"}]}),define("analytics/config/variationsWhitelist",[],function(){return["NOT_MAPPED","SYSTEM_FAILURE","ECD_STAND_IN_MODE","UNKNOWN_FRAMEWORK_ERROR","NETWORK_SERVICE_FAILURE","PRESENTATION_FAILURE","SLOW_CONNECTION","NO_CONNECTION","C3_MODE","SPLASH_MODE","READ_ONLY_MODE","ECD_MODE"]}),define("analytics/event/decisionedContentEvent",["require","blue/event","blue/is","blue/log","analytics/channel/decisionedContentEventChannel","blue/declare"],function(e){var t=e("blue/event"),n=e("blue/is"),i=e("blue/log")("[blue-analytics.decisionedContentEvent]"),r=e("analytics/channel/decisionedContentEventChannel"),a=function(e,t){var n=e.spec.data?Object.keys(e.spec.data):[];t.map(function(t){var r=Object.keys(t)[0];-1===n.indexOf(r)&&i.warn('Data field "'+r+'" undefined for component '+e.spec.name)})};return e("blue/declare")(t,{constructor:function(e,i,o,s){t.call(this),n.array(i)&&a(e,i),this.component=e,this.content=i,this.template=o,n.array(s)&&(a(e,s),this.properties=s),r.getInstance().emitEvent(this)}})}),define("analytics/util/channelMapperPromise",["require","analytics/config/channelMapperConfig","blue/is"],function(e){var t=e("analytics/config/channelMapperConfig"),n=e("blue/is");return function(i,r,a){var o=[];return t.map(function(t){(n.undefined(a)||!0===a[t.name])&&o.push(new Promise(function(n){e([t.channel,t.mapper],function(e,t){n(e.getInstance(i,r).asEventStream().map(t,i,r))})}))}),Promise.all(o)}}),define("analytics/util/addErrorAndCommunicationHooks",["require","blue/intercept"],function(e){var t=e("blue/intercept").around;return function(n,i){return Promise.all(n.map(function(n){return new Promise(function(r){e([n.module],function(e){this.advice=t(this.ref?e[this.ref]:e,this.method,i),r()}.bind(n))})}))}}),define("analytics/util/streamCollator",["require","analytics/util/channelMapperPromise","blue/is","blue/observable","analytics/util/addErrorAndCommunicationHooks"],function(e){var t=e("analytics/util/channelMapperPromise"),n=e("blue/is"),i=e("blue/observable"),r=e("analytics/util/addErrorAndCommunicationHooks");return function(a,o,s,c,l){return!1!==c?(n.string(s)&&(n.undefined(l)||!0===l.variableSettingsEvent)&&e([s,"analytics/channel/variableSettingsChannel"],function(e,t){return r(e,t.getInstance().emitEvent)}),t(a,o,l)):new Promise(function(e){e(i.never())})}}),define("analytics/eventTracker",["require","exports","module","blue/observable","blue/site","blue/device/platform","blue/log","blue/log","blue/event/channel","blue/is","analytics/config/channelMapperConfig","analytics/util/takeParam","analytics/util/streamCollator","blue/$","blue/fetch","analytics/bootstrapFormField","analytics/computed/midCompute","analytics/settings","analytics/util/serverData","blue/root"],function(e,t,n){var i=e("blue/observable"),r=e("blue/site"),a=e("blue/device/platform"),o=e("blue/log"),s=e("blue/log")("[blue-analytics]"),c=new(e("blue/event/channel")),l=e("blue/is"),d=e("analytics/config/channelMapperConfig"),u=n.config(),p=e("analytics/util/takeParam"),f=e("analytics/util/streamCollator"),m=e("blue/$"),g=e("blue/fetch"),h=e("analytics/bootstrapFormField"),v=e("analytics/computed/midCompute"),b=e("analytics/settings"),y=e("analytics/util/serverData"),C=e("blue/root").channel;return function(e,t,n){var A=function(e,t){var n=t;return l.undefined(n)&&l.defined(r.getApplication)&&(n=r.getApplication(e.application).context),n}(e,n),I=v.get(),S=b.get("serverOffsetEnabled"),w=b.get("serverEpochHeader"),E=u.analytics&&u.analytics.serverOffsetEnabled,D=p(l.defined(E)?E:S,"boolean"),k=[];if(l.undefined(A)||l.undefined(A.on))s.error("Failed to initialize analytics eventTracker. Invalid reference to app context",n);else{var x=p(u.enableAnalytics,"boolean");x&&b.set("isLogMsgEncrypt",u.isLogMsgEncrypt);var T={};A.on("blue:applicationConfigComplete",function(){var e={contentType:"application/json",method:"POST",data:JSON.stringify({}),headers:{"x-jpmc-csrf-token":"NONE"}};x&&v.set(A),x&&D&&g(A.services.analyticsTracking.settings("analytics.reporting.svc").url,e).then(function(e){var t=e.headers.get(w),n=(new Date).getTime(),i=t?t-n:void 0,r=e.headers.get(b.get("serverIsBotHeader"));y().setData(i,r,k)}).catch(function(e){y().setOffset(void 0)})}),h(u),d.map(function(e){T[e.name]=!l.defined(u.analytics)||!l.object(u.analytics.eventTypes)||p(u.analytics.eventTypes[e.name],"boolean")}),f(e.site,e.application,t,x,T).then(function(e){var t=u.analytics&&p(u.analytics.bufferInterval,"number")||3e3,n=i.merge(e);c.plug(i.interval(t,1)),A.on("app:event:beforeUnload",function(){if(k.length>0){var e={events:k};C&&(C="id="+C),k=[],m.ajax({url:A.services.analyticsTracking.settings("analytics.reporting.svc").url,contentType:"application/json",method:"POST",data:JSON.stringify(e),async:!1,headers:{"x-jpmc-csrf-token":"NONE","x-jpmc-channel":C},complete:function(t){s.info("beforeUnload ->",t.status,JSON.stringify(e,null,2))}})}}),n.onValue(function(e){k=k.concat(e)}),c.asEventStream().filter(function(){return A.services&&A.services.analyticsTracking&&k.length>0}).onValue(function(){void 0===I&&(v.updateMidInEvents(k),I=!0);var e={events:k};return k=[],s.info(new Date,JSON.stringify(e,null,2)),v.linkCustomerId(A),A.services.analyticsTracking["analytics.reporting.svc"](JSON.stringify(e)).then(function(){s.info("success")},function(e){s.info("error: "+e.status)}),e}),function(e){var t="Client platform signature: ";try{t+=JSON.stringify(a)}catch(e){t+="Error in getting platform details"}o("[application:"+e.appName+"]").error(t)}(A)})}}}),define("analytics/spec/newEventSpec",["require","analytics/util/stores/screenInfo","blue/log","blue-app/settings","blue/util","analytics/computed/midCompute","analytics/computed/user","analytics/computed/identity"],function(e){var t=e("analytics/util/stores/screenInfo"),n=e("blue/log")("[blue-screen-mapping]"),i=e("blue-app/settings"),r=e("blue/util"),a=e("analytics/computed/midCompute"),o=e("analytics/computed/user"),s=e("analytics/computed/identity"),c=[];return function(e,l){var d=t.getCurrentURL(),u=t.getScreenId(),p=r.object.extend(o(),a.getAdobeData()),f=s.get();return"UNDEFINED_SCREEN_ID"===u&&-1===c.indexOf(d)&&(c.push(d),n.warn("No screen id mapped to url",d)),{visitor:p,site:e,app:{name:l,language:i.get("language",i.Type.PERM)||i.get("language")||"en-us",version:"1.3"},screen:{id:u,currentURL:d},device:f.device,location:f.location,component:"",payload:{}}}}),define("analytics/payload/adsEventPayload",[],function(){return function(e){return{eventType:e.type,timestamp:e.eventTimeStamp||Date.now(),data:e.data}}}),define("analytics/mapper/adsEventMapper",["require","analytics/spec/newEventSpec","analytics/payload/adsEventPayload"],function(e){var t=e("analytics/spec/newEventSpec");return function(n,i,r){var a=new t(n,i);return a.component=void 0,a.payload=e("analytics/payload/adsEventPayload")(r),a}}),define("analytics/payload/decisionedContentEventPayload",[],function(){return function(e){return{eventType:e.type,timestamp:e.eventTimeStamp||Date.now(),data:e.data}}}),define("analytics/mapper/decisionedContentEventMapper",["require","analytics/spec/newEventSpec","analytics/payload/decisionedContentEventPayload"],function(e){var t=e("analytics/spec/newEventSpec");return function(n,i,r){var a=new t(n,i);return a.component=r.name,a.payload=e("analytics/payload/decisionedContentEventPayload")(r),a}}),define("analytics/payload/experimentActionPayload",[],function(){return function(e){return{eventType:e.type,timestamp:e.eventTimeStamp||Date.now(),data:e.data}}}),define("analytics/mapper/experimentActionMapper",["require","analytics/spec/newEventSpec","analytics/payload/experimentActionPayload"],function(e){var t=e("analytics/spec/newEventSpec");return function(n,i,r){var a=new t(n,i);return a.component=r.name,a.payload=e("analytics/payload/experimentActionPayload")(r),a}}),define("analytics/payload/experimentImpressionPayload",[],function(){return function(e){return{eventType:"experimentImpression",timestamp:e.eventTimeStamp||Date.now(),data:e.data}}}),define("analytics/mapper/experimentImpressionMapper",["require","analytics/spec/newEventSpec","analytics/payload/experimentImpressionPayload"],function(e){var t=e("analytics/spec/newEventSpec");return function(n,i,r){var a=new t(n,i);return a.component=r.name,a.payload=e("analytics/payload/experimentImpressionPayload")(r),a}}),define("analytics/payload/formFieldEventPayload",[],function(){return function(e){return{eventType:e.type,timestamp:e.eventTimeStamp||Date.now(),data:e.data,interaction:e.interaction}}}),define("analytics/mapper/formFieldEventMapper",["require","analytics/spec/newEventSpec","analytics/payload/formFieldEventPayload"],function(e){var t=e("analytics/spec/newEventSpec");return function(n,i,r){var a=new t(n,i);return a.component=r.name,a.payload=e("analytics/payload/formFieldEventPayload")(r),a}}),define("analytics/payload/impressionEventPayload",[],function(){return function(e){return{eventType:e.type,timestamp:e.eventTimeStamp||Date.now(),data:e.data}}}),define("analytics/mapper/impressionEventMapper",["require","analytics/spec/newEventSpec","analytics/payload/impressionEventPayload"],function(e){var t=e("analytics/spec/newEventSpec");return function(n,i,r){var a=new t(n,i);return a.component=r.name,a.payload=e("analytics/payload/impressionEventPayload")(r),a}}),define("analytics/payload/loggingEventPayload",[],function(){return function(e){return{eventType:e.type,timestamp:e.timestamp||Date.now(),data:e.data,logger:e.logger}}}),define("analytics/mapper/loggingEventMapper",["require","analytics/spec/newEventSpec","analytics/payload/loggingEventPayload"],function(e){var t=e("analytics/spec/newEventSpec");return function(n,i,r){var a=new t(n,i);return a.component=void 0,a.payload=e("analytics/payload/loggingEventPayload")(r),a}}),define("analytics/payload/pageInventoryPayload",[],function(){return function(e){return{eventType:e.type,timestamp:e.timestamp||Date.now(),data:e.data}}}),define("analytics/mapper/pageInventoryMapper",["require","analytics/spec/newEventSpec","analytics/payload/pageInventoryPayload"],function(e){var t=e("analytics/spec/newEventSpec");return function(n,i,r){var a=new t(n,i);return a.component=void 0,a.payload=e("analytics/payload/pageInventoryPayload")(r),a}}),define("analytics/payload/screenEventPayload",[],function(){return function(e){return{eventType:e.type,timestamp:e.eventTimeStamp||Date.now(),data:e.data}}}),define("analytics/mapper/screenEventMapper",["require","analytics/spec/newEventSpec","analytics/payload/screenEventPayload"],function(e){var t=e("analytics/spec/newEventSpec");return function(n,i,r){var a=new t(n,i);return a.component=void 0,a.payload=e("analytics/payload/screenEventPayload")(r),a}}),define("analytics/payload/variableSettingsEventPayload",[],function(){return function(e){return{eventType:e.type,timestamp:e.eventTimeStamp||Date.now(),data:e.data}}}),define("analytics/mapper/variableSettingsEventMapper",["require","analytics/spec/newEventSpec","analytics/payload/variableSettingsEventPayload"],function(e){var t=e("analytics/spec/newEventSpec");return function(n,i,r){var a=new t(n,i);return a.component=r.name,a.payload=e("analytics/payload/variableSettingsEventPayload")(r),a}}),define("analytics/payload/webEventPayload",[],function(){return function(e){return{eventType:e.type,timestamp:e.eventTimeStamp||Date.now(),data:e.data,action:e.action,nonCustomerEvent:e.nonCustomerEvent}}}),define("analytics/mapper/webEventMapper",["require","analytics/spec/newEventSpec","analytics/payload/webEventPayload"],function(e){var t=e("analytics/spec/newEventSpec");return function(n,i,r){var a=new t(n,i);return a.component=r.name,a.payload=e("analytics/payload/webEventPayload")(r),a}}),define("analytics/scroll/elementInViewport",[],function(){return function(e,t){t||(t=50);var n=e.getBoundingClientRect();return n.bottom-n.height*t/100-window.innerHeight<1}}),define("analytics/scroll/experimentWatcher",["require","exports","module","analytics/channel/experimentImpressionChannel","analytics/scroll/elementInViewport","blue/event/channel/component","analytics/channel/scrollStopChannel"],function(e,t,n){var i,r,a,o=e("analytics/channel/experimentImpressionChannel"),s=e("analytics/scroll/elementInViewport"),c=e("blue/event/channel/component"),l=e("analytics/channel/scrollStopChannel"),d=n.config(),u={},p=["style","content","template"];function f(e){var t=Object.create(null);return t.data=e.context,t.name=e.name,t}function m(e){var t=document.querySelectorAll(e);return 1===t.length?t[0]:void 0}function g(e,t,n){(i=e[t].filter(function(e){return e.component===n.componentName}))&&i.length>0&&function(e,t,n){e.forEach(function(e){var t=m(e.selector);t&&(s(t,d.visibilityPercentage)?o.getInstance().emit(f({name:e.component,context:{experimentId:e.experimentId,choice:e.choice}})):(u[n]||(u[n]=[]),u[n].push({selector:e.selector,context:{experimentId:e.experimentId,choice:e.choice},name:e.component})))})}(i,0,n.componentInstanceName)}return function(e){a=e,r||(r=l(d.delay||1e3).asEventStream().onValue(function(){var e,t;Object.keys(u).forEach(function(n){for(t=u[n],e=t.length-1;e>-1;e--)s(m(t[e].selector),d.visibilityPercentage)&&(o.getInstance().emit(f(t[e])),t.splice(e,1))})})),c.on("ready",function(e){var t=a&&(a[e.target.context.areaName]||a.app);t&&p.forEach(function(n){t[n]&&g(t,n,e)})}),c.on("destroy",function(e){u[e.target.key]&&u[e.target.key].splice(0)})}}),define("analytics/scroll/watcher",["require","exports","module","analytics/util/stores/screenInfo","analytics/channel/impressionEventChannel","analytics/scroll/elementInViewport","analytics/util/takeParam","blue/event/channel/screen","analytics/channel/scrollStopChannel"],function(e,t,n){var i,r,a,o,s={},c=e("analytics/util/stores/screenInfo"),l=e("analytics/channel/impressionEventChannel"),d=e("analytics/scroll/elementInViewport"),u=e("analytics/util/takeParam"),p=e("blue/event/channel/screen"),f=e("analytics/channel/scrollStopChannel"),m=n.config(),g=u(m.visibilityPercentage,"number"),h=u(m.delay,"number");function v(e){var t=Object.create(null);return t.data=e.context,t.name=e.name,t}return function(e,t){return o||(o=p.asEventStream().onValue(function(){for(r=c.getScreenId();i&&s[i]&&s[i].length;)s[i].shift();r&&!s[r]&&(s[r]=[]),i=r})),a||(a=f(h).asEventStream().onValue(function(){var e,t=s[r];for(e=t.length-1;e>-1;e--)d(t[e].divId,g)&&(l.getInstance().emit("impression",v(t[e])),t.splice(e,1))})),new Promise(function(n){var i=setTimeout(function(){clearTimeout(i),n(function(e,t){return Object.keys(e).forEach(function(n){var i=document.getElementById(n);i&&(d(i,m.visibilityPercentage)?l.getInstance().emit("impression",v({name:t,context:e[n]})):(r||(r=c.getScreenId(),s[r]=[]),s[r].push({divId:i,context:e[n],name:t})))}),s}(e,t))},h)})}}),define("analytics/service/tracking",[],function(){return function(){this.serviceCalls={"analytics.reporting.svc":{settings:{url:(window.analyticsDomain||window.domainUrl)+"/events/analytics/public/v1/events/raw/",contentType:"application/json",type:"POST",dataType:"html",disableTrace:!0,disableDefaultError:!0,disableOfflineHandler:!0}},"analytics.mid.create.svc":{settings:{url:"",type:"GET",disableTrace:!0,disableDefaultError:!0,disableOfflineHandler:!0}}}}}),define("analytics/util/addLoggerHooks",["require","analytics/util/handleDynamicContentUtilMethods","blue/log","analytics/config/variationsWhitelist","analytics/util/checkForAtleastOne"],function(e){var t=e("analytics/util/handleDynamicContentUtilMethods"),n=e("blue/log")("[DynamicContentUtilLogger]"),i=e("analytics/config/variationsWhitelist");return function(r){var a,o=r.proceed();o&&(a=t[r.method](r.args,{}),e("analytics/util/checkForAtleastOne")(["errorKeyword","communicationKeyword"],a.data.placement)&&i.indexOf(a.data.variation)>-1&&n.error(o));return o}}),define("analytics/util/constant",[],function(){return function(e){return e}}),define("analytics/util/getCanonicalRoute",["require","blue/hash","blue-app/settings"],function(e){var t=e("blue/hash"),n=e("blue-app/settings");return function(e){return t.getHash(e||n.get("fullURL",n.Type.SITE))}}),define("analytics/util/hashSanitizer",[],function(){var e=new RegExp(/^\/?\#?\/?/),t=new RegExp(/(\/index\/?)*$/),n=new RegExp(/\/+$/);return function(i){return i.replace(e,"").replace(t,"").replace(n,"")}}),define("analytics/util/screenIdCompute",["require","blue/hash","analytics/util/hashSanitizer"],function(e){var t,n=e("blue/hash"),i=e("analytics/util/hashSanitizer");function r(e){var i=function(e){var n=[],i=t[e];if(i)for(var r in i)i.hasOwnProperty(r)&&n.push(r);return n.length?n.shift():""}(e),a=n.getHashArr(e),o=a.length;return i||(o<=3?"":r(function(e){return e.join("/")}(a.slice(0,-1))))}return function(e,n){var a=i(e);return t=n,r(a)}}),define("analytics/util/timer",["blue/is"],function(){return function(e){var t,n=!1,i=function(e){n=e};if(!(e&&require("blue/is").integer(e)&&e>0))throw new Error("missing or invalid parameter");this.isRunning=function(){return n},this.getTimerId=function(){return t},this.run=function(){return!!this.isRunning()||(t=setTimeout(function(){clearTimeout(t),i(!1)},e),i(!0),!1)}.bind(this)}}),define("blue-ads/utility/adManager",["require","blue/log"],function(e){"use strict";var t=e("blue/log")("[blue-messages]");return function(e,n,i,r){this.subscribeForTopics=function(){i.subscribe("adUpdate",function(e,n,i){i&&i.resolve&&(t.debug("MsgMgr: adUpdate:",e,i,n),i.resolve(n))}),i.subscribe("adFailover",function(e,n,i,r){n&&n.resolve&&(t.debug("MsgMgr: adFailover:",e,n,r),r&&(r.isGetAdsFailover=!0),n.resolve(r))}),i.subscribe("adError",function(e,n){n&&n.reject&&(t.warn("MsgMgr: adError:",n),n.reject({reason:"adError",tagCode:e}))})},this.getAudiences=function(e){return e._a},this.getMultipleContent=function(e){return new Promise(function(i){try{var r,a=e.adParams,o=!!e.htmlAd&&!0===e.htmlAd;e.loadmultipleAds;(r=n.loadBlueAdCollection)?r(e.adResponse,function(e,t,n){var r={status:!0,content:e,adVariant:t,creativeId:n};if(!0!==o){try{e=JSON.parse(e)}catch(e){}r.content=e}i(r)},function(){i({status:!1,message:"MsgMgr: getContent: Error: cid",details:e.adResponse.cid})},a):i({status:!1,message:"MsgMgr: getContent: Error: Content API",details:e.adResponse.cid})}catch(e){var s="MsgMgr: getContent: Exception"+e.toString();t.warn(s),i({status:!1,message:s,details:e})}})},this.getCardlyticsAds=function(e){return new Promise(function(n){try{var i=r.loadCardlyticsOffer,a={placementId:e.placementId,pageId:e.tagCode,audiences:e.audiences,evaluateDynamicAd:!0,requiredAdData:e.requiredAdData,requestId:e.requestId};i?i(e.tagCode,e.accountId,a,function(e,t,i,r,a){n({status:!0,content:e,adVariant:t,placementId:i,failOverAd:r,accountIdList:a})},function(e,t,i){n({status:!1,message:"MsgMgr: getContent: Error:",placementId:e,accountIdList:t,adVariant:i})}):n({status:!1,message:"MsgMgr: getContent: Error: Content API"})}catch(e){var o="MsgMgr: getContent: Exception"+e.toString();t.warn(o),n({status:!1,message:o,details:e})}})},this.getContent=function(e){return new Promise(function(i){try{var r,a,o=!!e.htmlAd&&!0===e.htmlAd;!0===(!0===e.loadBlueAd)?(r=n.loadBlueAd,a={pid:e.placementId,pageId:e.tagCode,audiences:e.audiences,evaluateDynamicAd:o}):r=n.loadAd,r?r(e.adResponse.cid,function(e,t,n,r,a){var s={status:!0,content:e,adVariant:t,disclosure:n,isFailoverAd:r,failOverAdContent:a};if(!0!==o){try{e=JSON.parse(e)}catch(e){}s.content=e}i(s)},function(){i({status:!1,message:"MsgMgr: getContent: Error"})},a,e.adResponse):i({status:!1,message:"MsgMgr: getContent: Error"})}catch(e){var s="MsgMgr: getContent: Exception"+e.toString();t.warn(s),i({status:!1,message:s,details:e})}})},this.getFailoverContent=function(e){return new Promise(function(i){try{var r,a,o=!!e.htmlAd&&!0===e.htmlAd;!0===(!0===e.loadFailoverAd)&&(r=n.loadFailoverAd,a={placementId:e.placementId,pageId:e.tagCode}),r?r(a.pageId,a.placementId,function(e,t,n,r){var a={status:!0,content:e,adVariant:t,disclosure:n,failOverAdContent:r};if(!0!==o){try{e=JSON.parse(e)}catch(e){}a.content=e}i(a)},function(){i({status:!1,message:"MsgMgr: getFailoverContent: Error"})}):i({status:!1,message:"MsgMgr: getFailOverContent: Error: Content API",details:e.adResponse.cid})}catch(e){var s="MsgMgr: getFailOverContent: Exception"+e.toString();t.warn(s),i({status:!1,message:s,details:e})}})},this.getAds=function(n){return t.debug("MsgMgr: getAds:",n),new Promise(function(t,i){e.init(n.tagCode,n.requiredAdData,{resolve:t,reject:i})})},this.trackfailOverClick=function(e,n,r,a){try{return t.debug("MsgMgr: trackfailOverClick:",arguments),new i("trackfailOverClick").publish(e,n,r,a)}catch(e){t.error("MsgMgr: trackfailOverClick: Exception:",e.toString())}},this.trackfailOverImpression=function(e,n,r,a){try{return t.debug("MsgMgr: trackfailOverImpression:",arguments),new i("trackfailOverImpression").publish(e,n,r,a)}catch(e){t.error("MsgMgr: trackfailOverImpression: Exception:",e.toString())}},this.trackAdClick=function(e,n,r,a,o){try{return t.debug("MsgMgr: trackAdClick:",arguments),new i("trackAdClick").publish(e,n,r,a,o)}catch(e){t.error("MsgMgr: trackAdClick: Exception:",e.toString())}},this.trackUrlLinkClick=function(e,n,r,a){try{return t.debug("MsgMgr: trackUrlLinkClick:",arguments),new i("trackUrlLinkClick").publish(e,n,r,a)}catch(e){t.error("MsgMgr: trackUrlLinkClick: Exception:",e.toString())}},this.trackSeeAllClick=function(e,n,r,a){try{return t.debug("MsgMgr: trackSeeAllClick:",arguments),new i("trackSeeAllClick").publish(e,n,r,a)}catch(e){t.error("MsgMgr: trackSeeAllClick: Exception:",e.toString())}},this.trackCarouselSlide=function(e){try{return t.debug("MsgMgr: trackCarouselSlide:",arguments),new i("trackCarouselSlide").publish(e.value)}catch(e){t.error("MsgMgr: trackCarouselSlide: Exception:",e.toString())}},this.trackCarouselShowMore=function(e){try{return t.debug("MsgMgr: trackCarouselShowMore:",arguments),new i("trackSeeMoreClick").publish(e.value)}catch(e){t.error("MsgMgr: trackCarouselShowMore: Exception:",e.toString())}},this.trackCarouselDot=function(e){try{return t.debug("MsgMgr: trackCarouselDot:",arguments),new i("trackCarouselDot").publish(e.value)}catch(e){t.error("MsgMgr: trackCarouselDot: Exception:",e.toString())}},this.trackCardlyticsAdImpression=function(e,n,r){try{return t.debug("MsgMgr: trackAdImpression:",arguments),new i("cardlyticsMultipleView").publish(e,n,r)}catch(e){t.error("MsgMgr: trackAdImpression: Exception:",e.toString())}},this.trackAdImpression=function(e,n,r,a,o){try{return t.debug("MsgMgr: trackAdImpression:",arguments),new i("trackAdImpression").publish(e,n,r,a,o)}catch(e){t.error("MsgMgr: trackAdImpression: Exception:",e.toString())}},this.subscribeForTopics()}}),define("blue-ads/utility/msgMgr",["require","blue-ads/utility/adManager"],function(e){"use strict";var t=e("blue-ads/utility/adManager"),n=function(n,i,r){try{var a=n.marketingCdnEnabled?n.marketingLoaderUrl:n.slotplacementscript;n.marketingCdnEnabled||requirejs.config({paths:{"slotplacement/slotplacementconfig":n.adConfig}}),define("slotplacement/clientconfig",[],function(){return n.slotplacementconfig?n.slotplacementconfig:{timeout:"2000",adTrackingDisabled:"false"}}),n.marketingCdnEnabled?e([a],function(){e(["slotplacement/service","slotplacement/placement","slotplacement/contentprovider","slotplacement/topic","slotplacement/cardlyticsinit"],function(e,n,r,a,o){var s=new t(e,r,a,o);i(s)},function(e){r("MsgMgr: Error: No slotplacementservice: "+e)})},function(e){r("MsgMgr: Error: No slotplacementscript: "+e)}):e(["slotplacement/slotplacementconfig"],function(){e([a],function(){e(["slotplacement/service","slotplacement/placement","slotplacement/contentprovider","slotplacement/topic","slotplacement/cardlyticsinit"],function(e,n,r,a,o){var s=new t(e,r,a,o);i(s)},function(e){r("MsgMgr: Error: No slotplacementservice: "+e)})},function(e){r("MsgMgr: Error: No slotplacementscript: "+e)})},function(e){r("MsgMgr: Error: No slotplacementconfig: "+e)})}catch(e){r("MsgMgr: Exception: "+e.toString())}};return{adManagerInit:n,init:function(e,t,i,r){var a;try{var o=t.config;"true"!==o.enableAds&&!0!==o.enableAds?a="Error: Ads not enable":o.envType||(a="Error: NULL envType"),e.adConfig?e.slotplacementscript?e.slotplacementconfig||(a="Error: No slotplacementconfig"):a="Error: No slotplacementscript":a="Error: No adConfig"}catch(e){a="Exception:"+e.toString()}return a?r("MsgMgr: Init: "+a):n(e,i,r),a}}}),define("blue-ads/lib/messageManager",["require","exports","module","blue-ads/utility/msgMgr"],function(e,t,n){"use strict";var i,r,a=!1,o=new Promise(function(e,t){i=e,r=t}),s=e("blue-ads/utility/msgMgr");return function(e){return!1===a&&(a=!0,void 0!==s.init(n.config(),e,i,r)&&(a=!1)),o}}),define("blue-ads/utility/baUtil",[],function(){"use strict";var e,t=new Promise(function(t){e=t}),n=function(e){var t=e||"",n=t,i=t.indexOf("?");return-1!==i&&(n=t.substr(0,i)),n},i=function(){return window&&window.performance&&window.performance.now?parseInt(1e3*window.performance.now()):(new Date).getTime()};return{_getAdStaticParamFromScreenEvent:n,_getRandomNumber:i,_registerAdDecision:function(){e({status:!0})},_getInitPromise:function(){return t},getAdParam:function(){return i()+""},getAdStaticParam:function(e){return n(e)},getDOMElement:function(e){return document.getElementById(0===e.indexOf("#")?e.substr(1):e)},elementInViewport:function(e){var t=e&&this.getDOMElement(e),n=t&&t.getBoundingClientRect();return n?n.top>=0&&n.left>=0&&(n.bottom+n.top)/2<=window.innerHeight&&n.right<=window.innerWidth:void 0},addEventListener:function(e,t,n){n?n.addEventListener(e,t):document.addEventListener(e,t)},removeEventListener:function(e,t,n){n?n.removeEventListener(e,t):document.removeEventListener(e,t)},isJsonString:function(e){try{JSON.parse(e)}catch(e){return!1}return!0}}}),define("blue-ads/utility/baStore",["require","blue/store/enumerable/memory"],function(e){"use strict";var t=new(e("blue/store/enumerable/memory"))("adCache"),n="";return{adsStoreDelete:function(){t.remove("adCache")},adsStoreGet:function(e){var n=t.get("adCache");return n?n[e]:null},adsStoreSet:function(e,n,i,r){var a=t.get("adCache")||{};a[e]=a[e]||{},a[e][n]={adContent:r,creativeId:i.creativeId,adDecisionResponse:i},t.set("adCache",a)},setAdsBlueSpec:function(e){n=e},getAdsBlueSpec:function(){return n}}}),define("blue-ads/utility/baDecision/baMsgManager",["require","blue/log","blue-ads/utility/baStore","blue-ads/utility/baUtil"],function(e){"use strict";var t=e("blue/log")("[blue-messages]"),n=e("blue-ads/utility/baStore"),i=e("blue-ads/utility/baUtil"),r=!1,a=!1,o=!1,s=[],c=0,l=!1,d=0,u=0,p=0,f={},m={},g=function(e,n){this.appContext.application.broadcast(e,n),t.info("Ads broadCastMsgToApp"+e+" triggered with value ",n)},h=function(e,n){if(this.adsRegistry[e])try{var i={type:"html",content:n.content,adVariant:n.adVariant,failOverAd:n.failOverAd,status:n.status};this.currentAdConfig.cardlyticsAdsIntrested&&e===this.currentAdConfig.cardlyticsAdsIntrested[e]&&(i.isCardlyticsAd=!0,i.pageId=this.currentAdConfig.tagCode),t.debug("processAdsContentResponse: sending",e),this.appContext.application.broadcast("adsUpdate_"+e,{data:i})}catch(i){t.warn("processAdsContentResponse: Invalid Data:",e,n)}else t.warn("processAdsContentResponse: Not Registered for",e)},v=function(e,i,r,a){r&&(r.cid&&this.adManager?(d++,this.adManager.getContent({loadBlueAd:!0,htmlAd:!0,adResponse:r,placementId:e,tagCode:this.currentAdConfig.tagCode,audiences:a}).then(function(a){a.content&&p++,d===++u&&g.call(this,"offersCount",p),a.disclosure&&g.call(this,"disclosureMsg",a.disclosure),a.failOverAdContent&&a.failOverAdContent.creativeId&&(r.cid=a.failOverAdContent.cid,r.creativeId=a.failOverAdContent.creativeId),this.currentAdParamState=this.engineStates.RSP_AD_CONTENT,t.debug("getAdsContent: ",e,i,r),n.adsStoreSet(this.currentAdParam,e,r,a),h.call(this,i,a)}.bind(this),function(n){d===++u&&g.call(this,"offersCount",p),t.debug("Error in baDecisionEngine getAdsContent of promise",n,e,i)}.bind(this)).catch(function(n){t.error("Exception in baDecisionEngine getAdsContent of promise",n,e,i)}.bind(this))):(h.call(this,i,{content:null}),n.adsStoreSet(this.currentAdParam,e,r,null)))},b=function(e,i,s){if(a&&o&&!r){var c,l,d=this.currentAdConfig.adsInterested;for(var u in d)"parent"===d[u].slotValue&&(c=d[u],l=u);if(this.adsRegistry[c.slotId]){if(r=!0,n.adsStoreGet(this.currentAdParam)){var p=n.adsStoreGet(this.currentAdParam);if(p[l])try{var f={type:"html",content:p[l].adContent?p[l].adContent.content:"",adVariant:p[l].adVariant,failOverAd:p[l].failOverAd,isCompositeAdsImpression:!0};t.debug("[composite] processCompositeAdsResponse: sending",e),this.appContext.application.broadcast("adsUpdate_"+c.slotId,{data:f})}catch(n){t.warn("[composite] processAdsContentResponse: Invalid Data:",e,p[l])}}c.slotList.forEach(function(e){if(n.adsStoreGet(this.currentAdParam)){var i=n.adsStoreGet(this.currentAdParam);if(i[e])try{var r={type:"html",content:i[e].adContent.content,adVariant:i[e].adContent.adVariant,failOverAd:i[e].adContent.failOverAd};t.debug("[composite] processAdsContentResponse: sending",this.currentAdConfig.adsInterested[e].slotId);var a=document.getElementById(this.currentAdConfig.adsInterested[e].slotId+"ContentID");a&&(a.innerHTML=r.content)}catch(n){t.warn("[composite] processAdsContentResponse: Invalid Data:",this.currentAdConfig.adsInterested[e].slotId,i[e].adContent)}}},this)}}else if("child"===e.slotValue&&r)try{f={type:"html",content:i.content,adVariant:i.adVariant,failOverAd:i.failOverAd};t.debug("[composite] processAdsContentResponse: sending",e);var m=document.getElementById(e.slotId+"ContentID");m&&(m.innerHTML=f.content)}catch(n){t.warn("[composite] processAdsContentResponse: Invalid Data:",e,i)}},y=function(e,i,r,d){r&&(f=C.call(this),r.cid&&this.adManager?this.adManager.getContent({loadBlueAd:!0,htmlAd:!0,adResponse:r,placementId:e,tagCode:this.currentAdConfig.tagCode,audiences:d}).then(function(d){d.status?(this.currentAdParamState=this.engineStates.RSP_AD_CONTENT,d.failOverAdContent&&d.failOverAdContent.creativeId&&(r.cid=d.failOverAdContent.cid,r.creativeId=d.failOverAdContent.creativeId),t.debug("[composite] getAdsContent: ",e,i,r),n.adsStoreSet(this.currentAdParam,e,r,d),"parent"===i.slotValue&&(d.isFailoverAd?h.call(this,i.slotId,d):o=!0,c=i.slotList.length),"child"===i.slotValue&&(a=!0),b.call(this,i,d)):d.status||(!0===i.slotFailover&&"parent"===i.slotValue&&A.call(this,d,e),"child"!==i.slotValue||l||(s.push(i.slotId),s.length===c&&(l=!0)),f.parentSlotValue&&!0===f.parentSlotValue.slotFailover&&l&&A.call(this,d,e))}.bind(this),function(n){t.debug("[composite] Error in baDecisionEngine getAdsContent of promise",n,e,i),!0===i.slotFailover&&"parent"===i.slotValue&&A.call(this,r,e),"child"!==i.slotValue||l||(s.push(i.slotId),s.length===c&&(l=!0)),f.parentSlotValue&&!0===f.parentSlotValue.slotFailover&&l&&A.call(this,r,e)}.bind(this)).catch(function(n){t.error("[composite] Exception in baDecisionEngine getAdsContent of promise",n,e,i)}.bind(this)):(!0===i.slotFailover&&"parent"===i.slotValue&&A.call(this,r,e),"child"!==i.slotValue||l||(s.push(i.slotId),s.length===c&&(l=!0)),f.parentSlotValue&&!0===f.parentSlotValue.slotFailover&&l&&A.call(this,r)))},C=function(){var e,n,i=this.currentAdConfig.adsInterested;for(var r in i)"parent"===i[r].slotValue&&(e=i[r],n=r);return void 0!==e&&void 0!==n||t.warn("[composite] slot value parent is not found"),{parentSlotValue:e,parentSlotKey:n}},A=function(e,i){var r=this,a=(this.currentAdConfig.adsInterested,f.parentSlotValue),o=f.parentSlotKey;r.adManager?r.adManager.getFailoverContent({loadFailoverAd:!0,htmlAd:!0,failoverResponse:e,tagCode:r.currentAdConfig.tagCode,placementId:o}).then(function(i){i.failOverAdContent&&i.failOverAdContent.creativeId&&(e.cid=i.failOverAdContent.cid,e.creativeId=i.failOverAdContent.creativeId),r.currentAdParamState=r.engineStates.RSP_AD_CONTENT,t.debug("[composite] getFailoverContent: ",o,a.slotId,e),n.adsStoreSet(r.currentAdParam,o,e,i),h.call(r,a.slotId,i)}.bind(r),function(e){t.debug("[composite] Error in baDecisionEngine getFailOverAdsContent of promise",e,o,a.slotId)}.bind(r)).catch(function(e){t.error("[composite] Exception in baDecisionEngine getFailoverContent of promise",e,o,a.slotId)}.bind(r)):(h.call(r,a.slotId,{content:null}),n.adsStoreSet(r.currentAdParam,o,e,null))},I=function(e){if(this.currentAdConfig&&this.currentAdConfig.adsInterested&&e){var n,i,f=this.currentAdConfig.adsInterested,m=this.adManager.getAudiences(e),g=Object.keys(e);if(r=!1,o=!1,a=!1,s=[],l=!1,c=0,d=0,u=0,p=0,g&&g.length>0)for(var h=0;h<g.length;h++)(i=f[n=g[h]])&&(this.currentAdParamState=this.engineStates.REQ_AD_CONTENT,t.debug("processXPlusOneResponse: ",i,e[n]),"composite"===i.slotType?("parent"===i.slotValue&&(c=i.slotList.length),e.isGetAdsFailover&&i.slotFailover?v.call(this,n,i.slotId,e[n],m):y.call(this,n,i,e[n],m)):v.call(this,n,i,e[n],m))}};return{getAdsManager:function(){this.adManager||this.msgMgrPromise.then(function(e){this.adManager=e}.bind(this),function(e){t.warn('getAdsManager: Error in require("blue-ads/lib/messageManager") promise',e)}.bind(this)).catch(function(e){t.error('getAdsManager: Exception in require("blue-ads/lib/messageManager") promise',e)}.bind(this))},getAds:function(){this.msgMgrPromise.then(function(){this.currentAdConfig&&(this.currentAdParamState=this.engineStates.REQ_XPLUS_ONE,t.debug("baDecisionEngine getAds: ",this.currentAdConfig),this.adManager.getAds({tagCode:this.currentAdConfig.tagCode,adContext:this.currentAdParam,requiredAdData:this.requiredAdData}).then(function(e){this.currentAdParamState=this.engineStates.RSP_XPLUS_ONE,t.debug("baDecisionEngine getAds Success: ",e),I.call(this,e)}.bind(this),function(e){t.debug('Error in baDecisionEngine getAds of "blue-ads/lib/messageManager" promise',e,this.currentAdConfig)}.bind(this)).catch(function(e){t.error('Exception in getAds of "blue-ads/lib/messageManager" promise',e,this.currentAdConfig)}.bind(this)))}.bind(this),function(e){t.warn('getAds: Error in require("blue-ads/lib/messageManager") promise',e)}.bind(this)).catch(function(e){t.warn('getAds: Exception in require("blue-ads/lib/messageManager") promise',e)}.bind(this))},getCompositeAdsContent:y,getCardlyticsAds:function(e,r){this.msgMgrPromise.then(function(){if(m={},this.currentAdConfig){this.currentAdParamState=this.engineStates.REQ_XPLUS_ONE;var e=this.currentAdConfig.cardlyticsAdsIntrested;for(var r in e){var a=i._getRandomNumber();m[a]=r,this.placementId=r,t.debug("[cardlytics] baDecisionEngine getCardlyticsAds: ",this.currentAdConfig),this.adManager.getCardlyticsAds({tagCode:this.currentAdConfig.tagCode,placementId:this.placementId,adContext:this.currentAdParam,requiredAdData:this.requiredCardlyticsAdData,accountId:this.requiredCardlyticsAdData.accountId,requestId:a}).then(function(e){if(this.currentAdConfig&&this.currentAdConfig.cardlyticsAdsIntrested&&e){var i=this.currentAdConfig.cardlyticsAdsIntrested,r=(this.adManager.getAudiences(e),e.placementId),a=i[r];this.currentAdParamState=this.engineStates.RSP_AD_CONTENT,g.call(this,"eligibleAccountIdList",e.accountIdList),t.debug("[cardlytics] getAdsContent: ",r,a),n.adsStoreSet(this.currentAdParam,r,e,e),e.adVariant&&e.adVariant.requestId in m&&h.call(this,a,e)}}.bind(this),function(e){t.debug('[cardlytics] Error in baDecisionEngine getAds of "blue-ads/lib/messageManager" promise',e,this.currentAdConfig)}.bind(this)).catch(function(e){t.error('[cardlytics] Exception in getAds of "blue-ads/lib/messageManager" promise',e,this.currentAdConfig)}.bind(this))}}}.bind(this),function(e){t.warn('[cardlytics] getAds: Error in require("blue-ads/lib/messageManager") promise',e)}.bind(this)).catch(function(e){t.warn('[cardlytics] getAds: Exception in require("blue-ads/lib/messageManager") promise',e)}.bind(this))},processCompositeAdsResponse:b,processAdsContentResponse:h,getAdsContent:v,processXPlusOneResponse:I}}),define("blue-ads/utility/baDecision/baDecision",["require","blue/log","blue-ads/utility/baUtil","blue-ads/utility/baStore","blue-ads/utility/baDecision/baMsgManager"],function(e){"use strict";var t=e("blue/log")("[blue-messages]"),n=e("blue-ads/utility/baUtil"),i=e("blue-ads/utility/baStore"),r=e("blue-ads/utility/baDecision/baMsgManager"),a=function(){if(this.currentAdConfig&&this.currentAdConfig.adsInterested){var e=this.currentAdConfig.requiredAdInfo;e&&e.eventName?this.currentAdParamState>4||(this.currentAdParamState=this.engineStates.REQ_AD_INFO,t.debug("getRequiredAds getRequiredAdInfo: ",this.currentAdConfig),this.appContext.application.broadcast(e.eventName,{adContext:this.currentAdParam,requiredAdInfo:e}),this.currentAdParamState=this.engineStates.WAIT_AD_INFO):r.getAds.call(this)}},o=function(){for(var e=Object.keys(this.adsRegistry),t=0;t<e.length;t++)r.processAdsContentResponse.call(this,e[t],{content:null})},s=function(){if(this.currentAdConfig){var e=this.currentAdConfig.requiredCardlyticsAdInfo;e&&e.eventName?this.currentAdParamState>4||(this.currentAdParamState=this.engineStates.REQ_AD_INFO,t.debug("[cardlytics] getRequiredCardlyticsAds getRequiredCardlyticsAdInfo: ",this.currentAdConfig),this.appContext.application.broadcast(e.eventName,{adContext:this.currentAdParam,requiredAdInfo:e,disableCardlyticsService:!1}),this.currentAdParamState=this.engineStates.WAIT_AD_INFO):t.debug("[cardlytics] getRequiredCardlyticsAds getRequiredCardlyticsAdInfo: No adInfo found")}};return{hideUnInterestedAds:o,handleSendRequiredAdInfo:function(e){e.adContext?this.currentAdParam===e.adContext?this.currentAdConfig?(this.currentAdParamState=this.engineStates.RSP_AD_INFO,t.debug("handleSendRequiredAdInfo Success: ",e.requiredAdData,e),this.requiredAdData=e.requiredAdData,r.getAds.call(this)):t.info("handleSendRequiredAdInfo: INVALID DATA:",e):t.info("handleSendRequiredAdInfo: Response too late:",e):t.info("handleSendRequiredAdInfo: INVALID CONTEXT:",e)},handleSendCardlyticsRequiredAdInfo:function(e){e.disableCardlyticsService?t.info("[cardlytics] handleSendCardlyticsRequiredAdInfo: isCardlyticsService is false SERVICE CALLS DISABLED",e):e.adContext?this.currentAdParam===e.adContext?this.currentAdConfig&&this.currentAdConfig.cardlyticsIntrested?(this.currentAdParamState=this.engineStates.RSP_AD_INFO,t.debug("[cardlytics] handleSendCardlyticsRequiredAdInfo Success: ",e.requiredAdData,e),this.requiredCardlyticsAdData=e.requiredAdData,r.getCardlyticsAds.call(this)):t.info("[cardlytics] handleSendCardlyticsRequiredAdInfo: INVALID DATA:",e):t.info("[cardlytics] handleSendCardlyticsRequiredAdInfo: Response too late:",e):t.info("[cardlytics] handleSendCardlyticsRequiredAdInfo: INVALID CONTEXT:",e)},getCardlyticsAds:s,initializeAdParams:function(e){o.call(this),i.adsStoreDelete(),this.requiredAdData=void 0,this.currentAdParam=n.getAdParam(),this.currentStaticAdParam=n.getAdStaticParam(e.screenId),this.currentAdConfig=this.adsConfig[this.currentStaticAdParam],this.currentAdParamState=this.engineStates.SCREENID,this.currentAdConfig&&(this.currentAdConfig.cardlyticsAdsIntrested&&s.call(this),this.currentAdConfig.adsInterested&&a.call(this)),t.debug("initializeAdParams:",this.currentStaticAdParam,this.currentAdParam)},getRequiredAds:a}}),define("blue-ads/utility/baDecision/baComponent",["require","blue/log","blue-ads/utility/baStore","blue-ads/utility/baDecision/baDecision","blue/event/channel/analytics","blue-ads/utility/baDecision/baMsgManager"],function(e){"use strict";var t=e("blue/log")("[blue-messages]"),n=e("blue-ads/utility/baStore"),i=e("blue-ads/utility/baDecision/baDecision"),r=e("blue/event/channel/analytics"),a=e("blue-ads/utility/baDecision/baMsgManager"),o=function(e,n){this.appContext.application.broadcast(e,n),t.info("Ads  makenavigation triggered",n)},s=function(e){var t;if(this.currentAdConfig&&this.currentAdConfig.adsInterested)for(var n=this.currentAdConfig.adsInterested,i=Object.keys(n),r=0;r<i.length;r++){if("composite"===n[a=i[r]].slotType&&n[a].slotId===e){t=a;break}if(e===n[a]){t=a;break}}if(this.currentAdConfig&&this.currentAdConfig.cardlyticsAdsIntrested)for(n=this.currentAdConfig.cardlyticsAdsIntrested,i=Object.keys(n),r=0;r<i.length;r++){var a;if(e===n[a=i[r]]){t=a;break}}return t};return{handleAdClicked:function(e){var i=n.adsStoreGet(this.currentAdParam),r=s.call(this,e.adSlotId);i&&i[r]&&this.currentAdConfig&&(e.adData.value.jp_aid_p=this.currentAdConfig.tagCode,e.adData.value.jp_aid_a=i[r].creativeId,e.adData.value.placementId=r,this.adManager.trackAdClick(r,{creativeId:i[r].creativeId,midasId:i[r].adDecisionResponse?i[r].adDecisionResponse.midas_id:void 0,isFailoverAdContent:i[r].adContent?i[r].adContent.isFailoverAd:void 0},e.adVariant,this.currentAdConfig.tagCode,i[r].adDecisionResponse)),t.debug("ADDecisionEngine: handleAdClicked: ",e),e.adData&&e.adData.type&&e.adData.value&&(e.adData.value.params&&this.requiredAdData?e.adData.value.params.dynamicParams?e.adData.value.params.dynamicParams.accountId?e.adData.value.params.dynamicParams.accountId&&o.call(this,e.adData.type,e.adData.value):(e.adData.value.params.dynamicParams.accountId=this.requiredAdData.accountId,o.call(this,e.adData.type,e.adData.value)):(e.adData.value.params.dynamicParams={accountId:this.requiredAdData.accountId},o.call(this,e.adData.type,e.adData.value)):o.call(this,e.adData.type,e.adData.value))},handleCardlyticsUrlLinkClick:function(e){var t=e;t.pageId=this.currentAdConfig.tagCode,this.adManager.trackUrlLinkClick(t),o.call(this,"makeNavigation",e.adData.value)},getModelData:function(e){var t,i=n.adsStoreGet(this.currentAdParam),r=s.call(this,e.adSlotId);r&&i[r]&&(t=i[r].creativeId),e.context.advertisementPlacementId=r,e.context.advertisementMidasId=i[r].adDecisionResponse?i[r].adDecisionResponse.midas_id:void 0,e.context.advertisementId=t||e.context.offerId,e.context.advertisementPageId=this.currentAdConfig.tagCode},handleCardlyticsShowMore:function(e){var t=e;t.pageId=this.currentAdConfig.tagCode,this.adManager.trackCarouselShowMore(t.adData.adData)},handleCardlyticsAdImpression:function(e){var n=this;this.adManager.trackCardlyticsAdImpression(e.adData.adSlotId,e.adData.offerId,n.currentAdConfig.tagCode),e.adData.adSlotId&&e.adData.adSlotId.forEach(function(t,i){r.emit("requestAdvertisementActionsDisplay",{placement:t,adId:e.adData.offerId[i],tagMap:n.currentAdConfig.tagCode})}),t.debug("[cardlytics] ADDecisionEngine: handleAdImpression: ",e)},handleCompositeAdImpression:function(e){var i=n.adsStoreGet(this.currentAdParam),r=s.call(this,e.adData.adSlotId.split("ContentID")[0]);i&&i[r]&&this.currentAdConfig&&this.adManager.trackAdImpression(r,{creativeId:i[r].creativeId,midasId:i[r].adDecisionResponse?i[r].adDecisionResponse.midas_id:void 0,isFailoverAdContent:i[r].adContent?i[r].adContent.isFailoverAd:void 0},e.adData.adVariant,this.currentAdConfig.tagCode,i[r].adDecisionResponse),t.debug("[composite] ADDecisionEngine: handleAdImpression: ",e)},handleSeeAllClick:function(e){var t=e;t.pageId=this.currentAdConfig.tagCode,this.adManager.trackSeeAllClick(t),o.call(this,"makeNavigation",e.adData.value)},handleCarouselArrow:function(e){var t=e;t.pageId=this.currentAdConfig.tagCode,this.adManager.trackCarouselSlide(t.adData.adData)},handleCarouselDots:function(e){var t=e;t.pageId=this.currentAdConfig.tagCode,this.adManager.trackCarouselDot(t.adData.adData)},respondToRegisterForCardlyticsAdContent:function(e){var t=e.adSlotId;if(t){this.adsRegistry[t]=!0;var r,o=n.adsStoreGet(this.currentAdParam);o&&this.currentAdConfig.cardlyticsAdsIntrested?(this.currentAdConfig.cardlyticsAdsIntrested[e.adSlotId]==t&&(r=t),r&&o[r]&&(r==o[r].adContent.placementId?a.processAdsContentResponse.call(this,t,o[r].adContent,!0):i.getCardlyticsAds.call(this))):this.currentAdParamState===this.engineStates.REQ_AD_INFO&&(this.currentAdParamState=this.engineStates.WAIT_AD_INFO,i.getCardlyticsAds.call(this))}},handleAdInteractions:function(e){t.debug("ADDecisionEngine: handleAdInteractions: ",e),e.interactionEventName&&this.appContext.application.broadcast(e.interactionEventName,{adSlotId:e.adSlotId,adTargetId:e.adTargetId,adInteractionType:e.adInteractionType})},getPlacementIdFromAdSlotId:s,respondToRegisterForAdContent:function(e){var t=e.adSlotId;if(t){this.adsRegistry[t]=!0;var r=n.adsStoreGet(this.currentAdParam);if(r){var o=s.call(this,t);o&&r[o]&&!e.isComposite?a.processAdsContentResponse.call(this,t,r[o].adContent,!0):o&&r[o]&&e.isComposite?a.processCompositeAdsResponse.call(this,t,r[o].adContent,!0):i.getRequiredAds.call(this)}else this.currentAdParamState===this.engineStates.REQ_AD_INFO&&(this.currentAdParamState=this.engineStates.WAIT_AD_INFO,i.getRequiredAds.call(this))}},handleAdImpression:function(e){var i=n.adsStoreGet(this.currentAdParam),r=s.call(this,e.adSlotId);i&&i[r]&&this.currentAdConfig&&this.adManager.trackAdImpression(r,{creativeId:i[r].creativeId,midasId:i[r].adDecisionResponse?i[r].adDecisionResponse.midas_id:void 0,isFailoverAdContent:i[r].adContent?i[r].adContent.isFailoverAd:void 0},e.adVariant,this.currentAdConfig.tagCode,i[r].adDecisionResponse),t.debug("ADDecisionEngine: handleAdImpression: ",e)},handleDeregisterForAdContent:function(e){var t=e.adSlotId;t&&this.adsRegistry[t]&&delete this.adsRegistry[t]}}}),define("blue-ads/controller/baEngine",["require","blue/log","blue-ads/lib/messageManager","blue-ads/utility/baUtil","blue-ads/utility/baDecision/baDecision","blue-ads/utility/baDecision/baComponent","blue-ads/utility/baDecision/baMsgManager"],function(e){"use strict";var t=e("blue/log")("[blue-messages]"),n=e("blue-ads/lib/messageManager"),i=e("blue-ads/utility/baUtil"),r=e("blue-ads/utility/baDecision/baDecision"),a=e("blue-ads/utility/baDecision/baComponent"),o=e("blue-ads/utility/baDecision/baMsgManager"),s={INIT:0,SCREENID:1,REQ_AD_INFO:2,WAIT_AD_INFO:3,RSP_AD_INFO:4,REQ_XPLUS_ONE:5,RSP_XPLUS_ONE:6,REQ_AD_CONTENT:7,RSP_AD_CONTENT:8};return function(e,c,l){try{if(t.debug("ADDecisionEngine: init:",l),this.engineStates=s,this.currentAdParamState=s.INIT,this.adManager=void 0,this.requiredAdData=void 0,this.currentAdConfig=void 0,this.currentAdParam=void 0,this.currentStaticAdParam=void 0,this.adsRegistry=Object.create(null),this.appContext=e,this.appContext.on({renderAdsForAScreenID:r.initializeAdParams.bind(this),sendCardlyticsCarouselDots:a.handleCarouselDots.bind(this),sendCardlyticsUrlLinkClick:a.handleCardlyticsUrlLinkClick.bind(this),sendCardlyticsShowMore:a.handleCardlyticsShowMore.bind(this),sendCardlyticsCarouselArrow:a.handleCarouselArrow.bind(this),registerForCardlyticsAdContent:a.respondToRegisterForCardlyticsAdContent.bind(this),sendSeeAllClick:a.handleSeeAllClick.bind(this),sendRequiredAdInfo:r.handleSendRequiredAdInfo.bind(this),sendRequiredCardlyticsInfo:r.handleSendCardlyticsRequiredAdInfo.bind(this),sendAdImpression:a.handleAdImpression.bind(this),sendCardlyticsAdImpression:a.handleCardlyticsAdImpression.bind(this),sendCompositeAdImpression:a.handleCompositeAdImpression.bind(this),sendAdClicked:a.handleAdClicked.bind(this),getModelData:a.getModelData.bind(this),sendAdInteractions:a.handleAdInteractions.bind(this),registerForAdContent:a.respondToRegisterForAdContent.bind(this),deregisterForAdContent:a.handleDeregisterForAdContent.bind(this)}),this.adsConfig=c.adsConfig(l),this.msgMgrPromise=n(e),o.getAdsManager.call(this),c.screenApi&&c.screenChannel){var d,u=c.screenApi;c.screenChannel.on(function(e){u(window.location.href)!==d&&(r.initializeAdParams.call(this,{screenId:u(e.newUrl)}),d="")}.bind(this)),d=u(c.currentUrl),t.debug("ADDecisionEngine: init: screenId:",d),d&&void 0===this.currentStaticAdParam&&void 0===this.currentAdParam&&r.initializeAdParams.call(this,{screenId:d})}else t.debug("ADDecisionEngine: init: NULL adsData.screenChannel or adsData.screenInfo",c);i._registerAdDecision()}catch(e){t.warn("ADDecisionEngine: init: Exception:",e)}}}),define("blue-ads/controller/baDecisionEngine",["require","blue/log","blue-ads/controller/baEngine","blue-ads/utility/baStore"],function(e){"use strict";var t=e("blue/log")("[blue-messages]"),n=e("blue-ads/controller/baEngine"),i=e("blue-ads/utility/baStore");function r(e,t){this.message=t,this.name="ADDecisionEngineException",this.eType=e}return function(e){try{if(t.debug("ADDecisionEngine: Start:",e),!e.adsData)throw new r(!0,"ADDecisionEngine: Need adsData");var a=e.appCtx;if(!a&&e.blueSite){if(!e.adsData.application)throw new r(!0,"ADDecisionEngine: Need application in adsData");a=e.blueSite.getApplication(e.adsData.application).context}if(!a)throw new r(!0,"ADDecisionEngine: NULL App Context:");if("true"!==a.config.enableAds&&!0!==a.config.enableAds)throw new r(!1,"ADDecisionEngine: Ads not enable");var o=a.config.envType||"dev";e.adsData.bluespec&&i.setAdsBlueSpec(e.adsData.bluespec),this.engine=new n(a,e.adsData,o)}catch(e){t[!0===e.eType?"error":"warn"](e.message)}}}),define("blue-ads/utility/baViewHelper",["require","blue-ads/utility/baUtil"],function(e){"use strict";var t,n={},i=[],r=e("blue-ads/utility/baUtil"),a=function(e){Object.keys(n).forEach(function(e){n[e]()}.bind(e))},o={turnoffScrollListener:function(e){var t;return n[e]&&delete n[e],Object.keys(n).length<1&&(r.removeEventListener("scroll",a),i.forEach(function(e){(t=r.getDOMElement(e))&&r.removeEventListener("scroll",a,t)}),i=[]),n},initializeScrollListener:function(e,t,o){if(n[e]=t,r.addEventListener("scroll",a),o){var s=r.getDOMElement(o);s&&(r.addEventListener("scroll",a,s),-1!==i.indexOf(o)&&i.push(o))}return n}};return{getInstance:function(){return t||(t=Object.create(o)),t}}}),define("blue-ads/utility/baView",["require","blue/log","blue-ads/utility/baViewHelper","blue/device/platform","blue-ads/utility/baUtil"],function(e){"use strict";var t=e("blue/log")("[blue-messages]"),n=e("blue-ads/utility/baViewHelper").getInstance(),i=e("blue/device/platform"),r=i.os.family&&i.os.family.match(/(ios)/i),a=e("blue-ads/utility/baUtil"),o={},s={},c=[],l=[],d=function(e,t){this.bridge&&this.bridge.output&&this.bridge.output.emit("trigger",{value:e,data:t})},u=function(e){var i=this;if(a.elementInViewport(e)){if(a.elementInViewport(e)&&!1===o[e]){i.isAdImpressionTriggered=!1,n.turnoffScrollListener(e),t.debug("[cardlytics] ADSView: triggerCardlyticsAdImpression:",e);var r=document.getElementById(e).querySelector("[blue-param]"),s=r?JSON.parse(r.getAttribute("blue-param")):void 0;l.push(e);var u={id:s?s.params.dynamicParams.offerId:void 0,checkSum:s?s.params.offerCheckSum:void 0};c.push(u),o[e]=!0}setTimeout(function(){l.length>0&&c.length>0&&(i.cardlyticsAdImpression&&i.cardlyticsAdImpression({adSlotId:l,offerId:c}),d.call(i,"cardlyticsAdImpression",{adSlotId:l,offerId:c})),l=[],c=[]},1e3)}},p=function(e){var i;if(a.elementInViewport(e)&&document.getElementById(e).children.length&&!1===s[e]){this.isAdImpressionTriggered=!1,n.turnoffScrollListener(e),t.debug("[composite] ADSView: triggerCompositeAdImpression:",e);var r=document.getElementById(e)?document.getElementById(e).querySelector("[blue-param]"):void 0,o=r?r.getAttribute("blue-param"):void 0,c=o?a.isJsonString(o)?JSON.parse(o):o:void 0;i=c&&c.params&&c.params.dynamicParams?c.params.dynamicParams.offerId:void 0,s[e]=!0,this.compositeAdImpression&&this.compositeAdImpression({adSlotId:e,compositeOfferId:i}),d.call(this,"compositeAdImpression",{adSlotId:e,compositeOfferId:i})}},f=function(e,t,n){if(e&&t){for(var i=!1,r=e,a=0;!i&&r.id!==t&&a<30;)r.getAttribute(n)?i=!0:(r=r.parentNode,a++);return i?r:void 0}},m=function(e){if(this.model.isComposite)var n=f(e,this.divContentId,"composite-data-placementid");var i=f(e,this.divContentId,"blue-param");if(i){var r=i.getAttribute("blue-click"),a=r,o=i.getAttribute("blue-param");if(this.model.isComposite&&n){var s=n.id;this.divContentId=s?s.split("ContentID")[0]:void 0}t.debug("ADSView: adClicked:",a,o,i),"interactWithAdvertisement"!==r&&"requestUrlLinkClick"!==r&&"requestMoreOffers"!==r&&"requestAllOffers"!==r&&"requestCarouselArrow"!==r&&"requestCarouselDot"!==r&&(r="reviewOffer"),d.call(this,r,{adSlotId:this.model.isComposite?this.divContentId:this.model.adSlotId,adTargetId:this.model.adTargetId,divContentId:this.divContentId,focusTargetId:i.id?i.id:void 0,adData:{type:a||"makeNavigation",value:o}})}};return{sendTriggerToComponent:d,triggerAdImpression:function(){var e=this;!1===e.isAdImpressionStarted&&!0===e.isAdImpressionTriggered&&a.elementInViewport(e.divContentId)&&(e.isAdImpressionStarted=!0,setTimeout(function(){e.isAdImpressionStarted=!1,a.elementInViewport(e.divContentId)&&(e.isAdImpressionTriggered=!1,n.turnoffScrollListener(e.adSlotId),t.debug("ADSView: triggerAdImpression:",e.adSlotId),d.call(e,"adImpression",{adSlotId:e.adSlotId}))},1e3))},clearImpressions:function(){o={},s={},c=[],l=[]},updateAdContent:function(e){if(e.data&&"adContent"===e.data.type&&e.data.value){var t=e.data.value;t.failOverAd&&(this.model.failOverAdContent=t.failOverAd),t.status||(this.model.isAdContentLoading=!0),"html"===t.type&&(this.model.isAdContentLoading=!0,t.content instanceof DocumentFragment?(this.model.adContent="<div></div>",document.getElementById(this.divContentId).appendChild(t.content)):this.model.adContent=t.content)}},triggerCompositeAdImpression:function(){var e=document.querySelectorAll("[composite-data-placementid]");for(var t in(e=[].slice.call(e))&&e.forEach(function(e){s[e.id]||(s[e.id]=!1)}),s)0==s[t]&&(n.initializeScrollListener(t,p.bind(this,t),t),setTimeout(p.bind(this,t),100))},triggerCompositeAdImpressionCallBack:p,triggerCardlyticsAdImpressionCallBack:u,triggerCardlyticsAdImpression:function(){var e=document.querySelectorAll("[data-placementid]");for(var t in(e=[].slice.call(e))&&e.forEach(function(e){o[e.id]||(o[e.id]=!1)}),o)0==o[t]&&(n.initializeScrollListener(t,u.bind(this,t),t),setTimeout(u.bind(this,t),100))},getAttribesNode:f,sendClickTrigger:m,bindClickEventIfTouchNotWorking:function(){try{if(r&&MutationObserver&&void 0===this.domObserver&&this.model.adTargetId){t.debug("ADSView: bindClickEventIfTouchNotWorking: Registring MutationObserver:",this.divContentId),this.domObserver=new MutationObserver(function(e){t.debug("ADSView: bindClickEventIfTouchNotWorking: MutationObserver:",this.divContentId,e),e.forEach(function(e){if(e.addedNodes.length>0&&e.target.id===this.divContentId){var n=a.getDOMElement(this.divContentId);n&&n.addEventListener("click",function(e){t.debug("ADSView: bindClickEventIfTouchNotWorking:1:",this.divContentId,e),!e.webkitForce&&e.target&&m.call(this,e.target)}.bind(this),!1)}}.bind(this))}.bind(this));var e=a.getDOMElement(this.model.adTargetId);e&&this.domObserver.observe(e,{childList:!0})}}catch(e){}}}}),define("blue-ads/view/webspec/baView",{name:"BLUE_ADS_VIEW_WEB_SPEC",bindings:{},triggers:{render:{action:"view.onReady"},adClicked:{action:"view.adClicked"}}}),define("blue-ads/lib/baView",["require","blue/log","blue-ads/utility/baViewHelper","blue-ads/utility/baView","blue-ads/view/webspec/baView","blue-ui/view/elements/loader"],function(e){"use strict";var t=e("blue/log")("[blue-messages]"),n=e("blue-ads/utility/baViewHelper").getInstance(),i=e("blue-ads/utility/baView");return{getAdView:function(r){return function(){this.init=function(){this.domObserver=void 0,this.isAdImpressionTriggered=!1,this.template=r,this.model=this.model||{},this.model.adContent="",this.divContentId=void 0,this.bridge=e("blue-ads/view/webspec/baView")},this.views={blueLoader:e("blue-ui/view/elements/loader")},this.onReady=function(){this.adSlotId=this.model.adSlotId,this.divContentId=this.adSlotId+"ContentID",this.bridge.on("data/adsData",function(e){t.debug("ADSView: data/adsData:",e.data,e),e.data&&e.data.value&&e.data.value.content&&(this.isAdImpressionTriggered=!0,this.isAdImpressionStarted=!1,n.initializeScrollListener(this.model.adSlotId,i.triggerAdImpression.bind(this),this.model.scrollTargetId),e.data.value.isCompositeAdsImpression&&(i.clearImpressions(),setTimeout(i.triggerCompositeAdImpression.bind(this),100)),e.data.value.isCardlyticsAd&&(i.clearImpressions(),setTimeout(i.triggerCardlyticsAdImpression.bind(this),100)),e.data.value.isCompositeAdsImpression||setTimeout(i.triggerAdImpression.bind(this),100)),i.updateAdContent.call(this,e)}.bind(this)),i.bindClickEventIfTouchNotWorking.call(this)},this.onDestroy=function(){t.debug("ADSView: onDestroy",this.adSlotId),this.domObserver&&(this.domObserver.disconnect(),this.domObserver=void 0),n.turnoffScrollListener(this.adSlotId),i.clearImpressions()},this.adClicked=function(e){t.debug("ADSView: adClicked event:",e,this.divContentId);var n=e.domEvent?e.domEvent.target:e.target;i.sendClickTrigger.call(this,n)}}}}}),define("bluespec/advertisements",[],function(){return{name:"ADVERTISEMENTS",data:{advertisementId:{type:"Description",exportable:!0},advertisementPlacementId:{type:"Description",exportable:!0},advertisementFormatType:{type:"Description",exportable:!0},advertisementShownState:{type:"OnOff",exportable:!0},advertisementHeaderShownState:{type:"OnOff",exportable:!0},advertisementLocationId:{type:"Description",exportable:!0},advertisementPageId:{type:"Description",exportable:!0},advertisementStatus:{type:"Description",exportable:!0},advertisementInteractionType:{type:"Description",exportable:!0},advertisementPreferenceByContext:{type:"Description",exportable:!0},advertisementAudiences:{type:"Description",exportable:!0},advertisementUniformResourceLocator:{type:"Description",exportable:!0},advertisementOfferUniformResourceLocator:{type:"Description",exportable:!0},totalNumberOfSlides:{type:"Numeric"},slideIndex:{type:"Description",exportable:!0},slideNumber:{type:"Numeric"},slideTitle:{type:"Description"},offers:{type:"List",items:{offerId:{type:"Description",exportable:!0},advertisementUniformResourceLocator:{type:"Description",exportable:!0}},exportable:!0},offerId:{type:"Description",exportable:!0},propertyContainer:{type:"Description"},failOverAdContent:{type:"Description",exportable:!0},isAdContentLoading:{type:"Description"},advertisementMidasId:{type:"Description",exportable:!0}},actions:{reviewOffer:!0,requestAllOffers:!0,requestMoreOffers:!0,interactWithAdvertisement:!0,requestNextSlide:!0,requestPreviousSlide:!0,requestCarouselArrow:!0,requestCarouselDot:!0,requestUrlLinkClick:!0},settings:{progressBarAda:!0,requestPreviousSlideAda:!0,requestNextSlideAda:!0}}}),define("blue-ads/utility/baComponent",["require","blue/log","blue-ads/utility/baUtil"],function(e){var t=e("blue/log")("[blue-messages]"),n=e("blue-ads/utility/baUtil"),i=function(e){e.data&&this.output.emit("data",{value:"adsData",data:{type:"adContent",value:e.data}})};return{processAdsUpdate:i,setModel:function(e){this.context.application.broadcast("getModelData",{adSlotId:e||this.model.get("adSlotId"),context:this})},sendCardlyticsUrlLinkClick:function(e){this.context.application.broadcast("sendCardlyticsUrlLinkClick",{adSlotId:this.model.get("adSlotId"),adData:e})},sendCardlyticsShowMore:function(e){this.context.application.broadcast("sendCardlyticsShowMore",{adSlotId:this.model.get("adSlotId"),adData:e})},sendCardlyticsAdImpression:function(e){this.context.application.broadcast("sendCardlyticsAdImpression",{adSlotId:this.model.get("adSlotId"),adData:e})},sendCompositeAdImpression:function(e){this.context.application.broadcast("sendCompositeAdImpression",{adSlotId:this.model.get("adSlotId"),adData:e})},registerForCardlyticsAdContent:function(){n._getInitPromise().then(function(){this.context.application.broadcast("registerForCardlyticsAdContent",{adSlotId:this.model.get("adSlotId")})}.bind(this),function(e){t.debug("[cardlytics] ADSComponent: registerForCardlyticsAdContent: Error:",e)}).catch(function(e){t.debug("[cardlytics] ADSComponent: registerForCardlyticsAdContent: Exception:",e)})},sendSeeAllClick:function(e){this.context.application.broadcast("sendSeeAllClick",{adSlotId:this.model.get("adSlotId"),adData:e})},sendCardlyticsCarouselDots:function(e){this.context.application.broadcast("sendCardlyticsCarouselDots",{adSlotId:this.model.get("adSlotId"),adData:e})},sendCardlyticsCarouselArrow:function(e){this.context.application.broadcast("sendCardlyticsCarouselArrow",{adSlotId:this.model.get("adSlotId"),adData:e})},listenToAdUpdates:function(){var e={};e["adsUpdate_"+this.model.get("adSlotId")]=i.bind(this),this.context.on(e)},registerForAdContent:function(){n._getInitPromise().then(function(){this.context.application.broadcast("registerForAdContent",{adSlotId:this.model.get("adSlotId"),isComposite:this.model.get("isComposite")})}.bind(this),function(e){t.debug("ADSComponent: registerForAdContent: Error:",e)}).catch(function(e){t.debug("ADSComponent: registerForAdContent: Exception:",e)})},deregisterForAdContent:function(){this.controller?this.controller.context.application.broadcast("deregisterForAdContent",{adSlotId:this.extraAdSlotId}):this.context&&this.context.application.broadcast("deregisterForAdContent",{adSlotId:this.extraAdSlotId})},sendAdImpression:function(e){this.context.application.broadcast("sendAdImpression",{adSlotId:this.model.get("adSlotId"),adData:e})},sendAdClicked:function(e){if(this.model.get("isComposite"))var t=e.value.focusTarget;this.context.application.broadcast("sendAdClicked",{adSlotId:t||this.model.get("adSlotId"),adData:e})},sendAdInteractions:function(e){this.context.application.broadcast("sendAdInteractions",{adSlotId:this.model.get("adSlotId"),adTargetId:this.model.get("adTargetId"),interactionEventName:this.model.get("interactionEventName"),adInteractionType:e})},getAdContentAttributes:function(e){if(e.adData&&e.adData.value){var t=e.adData.value;try{t=JSON.parse(t)}catch(e){t={navKey:t}}return t.focusTarget=e.focusTargetId?e.focusTargetId:e.divContentId,{type:e.adData.type,value:t}}}}}),define("blue-ads/lib/multiAdsHelper",["require","bluespec/advertisements","blue-ads/component/baComponent"],function(e){"use strict";return function(t){if(!t)throw new Error("[multiple] createAdCAV: parameters are not passed");if(!(t.controller&&t.controller.register&&t.controller.register.components))throw new Error("[multiple] createAdCAV: invalid controller");if(!t.componentName)throw new Error("[multiple] createAdCAV: invalid componentName");if(!t.templateTarget)throw new Error("[multiple] createAdCAV: invalid templateTarget");if(!t.adSlotId)throw new Error("[multiple] createAdCAV: invalid adSlotId");if(!t.adViewPath)throw new Error("[multiple] createAdCAV: invalid adViewPath");var n=t.controller;n.registry.registerComponent(t.componentName,{model:{interactionEventName:t.interactionEventName,scrollTargetId:t.scrollTargetId,adTargetId:t.templateTarget,adSlotId:t.adSlotId,advertisementContent:t.contentOfAd,adVariant:t.adVariant,multipleAds:!0},spec:e("bluespec/advertisements"),methods:e("blue-ads/component/baComponent")});var i={target:t.templateTarget};return t.viewAppend&&(i.append=t.viewAppend),[n.components[t.componentName],t.adViewPath,i]}}),define("blue-ads/lib/initiateMultipleAds",["require","blue-ads/lib/messageManager","blue-ads/lib/multiAdsHelper","blue-ads/utility/baUtil"],function(e){"use strict";var t,n,i,r,a=e("blue-ads/lib/messageManager"),o=e("blue-ads/lib/multiAdsHelper"),s=e("blue-ads/utility/baUtil");return{getMultipleAds:function(e){var n=this;return t=e,new Promise(function(t,r){a(e.controller.context.application).then(function(a){a.getAds({tagCode:e.pageId,requiredAdData:e.requiredAdData}).then(function(o){i=o,n.descisionHandler.call(n,a,e,o,!1).then(function(e){t(e)}).catch(function(){r("[multiple] Content failure")})}).catch(function(i){n.descisionHandler.call(n,a,e,i,!0).then(function(e){t(e)}).catch(function(){r("[multiple] Content failure")})})}).catch(function(){r("[multiple] Marcom plaform Failover")})})},descisionHandler:function(e,t,i,a){return new Promise(function(s,c){var l={},d={};if(d.loadFailover=a,!a)for(var u in i)i.hasOwnProperty(u)&&"_a"!==u&&(l[u]=i[u].cid);for(var p in t.adPlacementMap)t.adPlacementMap[p]&&(d[p]=t.adPlacementMap[p].templateTarget);d.pageId=t.pageId,d.audiences=i._a,d.evaluateDynamicAd=t.htmlAd,n=d,e.getMultipleContent({adResponse:l,adParams:d,loadmultipleAds:!0}).then(function(e){r=e;var n=[];if(!0===e.status){for(var i in t.adPlacementMap)if(t.adPlacementMap.hasOwnProperty(i)){var a=t.adPlacementMap[i].templateTarget;n.push(o({controller:t.controller,componentName:i,templateTarget:"#"+t.adPlacementMap[i].templateTarget,scrollTargetId:t.scrollTargetId,viewAppend:t.adPlacementMap[i].viewAppend,adSlotId:a,adViewPath:t.adPlacementMap[i].adViewPath,contentOfAd:e.content[i],adVariant:e.adVariant[i]})),s(n)}}else c("[multiple] Content failure")})})},handleEvents:function(e,o,c,l){a(t.controller.context.application).then(function(a){var d,u,p,f;for(var m in n)n[m]===o&&(p=m);u=t.pageId,!n.loadFailover&&i?f=i[p].creativeId:n.loadFailover&&r.creativeId&&(f=r.creativeId[p]),d={creativeId:f},l.advertisementPlacementId=p,l.advertisementId=f,l.advertisementPageId=u,l.advertisementAudiences=c,s.elementInViewport(t.divContentId)&&!n.loadFailover?"adClick"===e?a.trackAdClick(p,d,c,u):"adImpression"===e&&a.trackAdImpression(p,d,c,u):s.elementInViewport(t.divContentId)&&n.loadFailover&&("adClick"===e?a.trackfailOverClick("decision_fail",u,p,d):"adImpression"===e&&a.trackfailOverImpression("decision_fail",u,p,d))})}}}),define("blue-ads/component/baComponent",["require","blue/log","blue-ads/utility/baComponent","blue-ads/lib/initiateMultipleAds","blue-ads/utility/baView"],function(e){"use strict";var t=e("blue/log")("[blue-messages]"),n=e("blue-ads/utility/baComponent"),i=e("blue-ads/lib/initiateMultipleAds"),r=e("blue-ads/utility/baView");return{init:function(){var e=this;e.adImpressionShown=!1,e.isAdContentLoading=!1,this.extraAdSlotId=this.model.get("adSlotId"),this.context.application.on("convoDeckExploreProductsRequested",function(){void 0!==e.model&&!0===e.model.get("multipleAds")&&!1===e.adImpressionShown&&(e.adImpressionShown=!0,i.handleEvents("adImpression",e.model.get("adSlotId"),e.model.get("adVariant"),e))}),this.output.on("ready",function(){e.isAdContentLoading=!1,n.listenToAdUpdates.call(this),n.registerForAdContent.call(this),n.registerForCardlyticsAdContent.call(this)}.bind(this))},onDestroy:function(){t.debug("ADSComponent: onDestroy:"),n.deregisterForAdContent.call(this)},adImpression:function(e){t.debug("ADSComponent: ADImpression",e),n.sendAdImpression.call(this,e)},cardlyticsAdImpression:function(e){t.debug("ADSComponent: cardlyticsAdImpression",e),n.sendCardlyticsAdImpression.call(this,e)},compositeAdImpression:function(e){t.debug("ADSComponent: compositeAdImpression",e),n.sendCompositeAdImpression.call(this,e)},requestCarouselArrow:function(e){this.model.set("advertisementStatus",e.adData.value),setTimeout(r.triggerCardlyticsAdImpression.bind(this),100),n.sendCardlyticsCarouselArrow.call(this,e)},requestCarouselDot:function(e){this.model.set("advertisementStatus",e.adData.value),setTimeout(r.triggerCardlyticsAdImpression.bind(this),100),n.sendCardlyticsCarouselDots.call(this,e)},requestAllOffers:function(e){var t=n.getAdContentAttributes(e);n.sendSeeAllClick.call(this,t)},requestMoreOffers:function(e){this.model.set("advertisementStatus",e.adData.value),setTimeout(r.triggerCardlyticsAdImpression.bind(this),100),n.sendCardlyticsShowMore.call(this,e)},requestUrlLinkClick:function(e){var t=n.getAdContentAttributes(e);n.sendCardlyticsUrlLinkClick.call(this,t)},reviewOffer:function(e){try{var r=JSON.parse(e.adData.value).params.dynamicParams.offerId;this.offerId=r}catch(e){this.offerId=""}!0===this.model.get("multipleAds")||this.model.get("isComposite")||n.setModel.call(this),this.model.get("isComposite")&&n.setModel.call(this,e.adSlotId);var a=n.getAdContentAttributes(e);t.debug("ADSComponent: adClicked:",e.adSlotId,e,a),this.model.set("interactionType",""),!0===this.model.get("multipleAds")&&i.handleEvents("adClick",this.model.get("adSlotId"),this.model.get("adVariant"),this),n.sendAdClicked.call(this,a)},interactWithAdvertisement:function(e){this.model.set("interactionType",e.adData.value),n.sendAdInteractions.call(this,e.adData.type),t.debug("ADSComponent: interactWithAdvertisement",e)}}}),define("blue-ads/lib/baHelper",["require","bluespec/advertisements","blue-ads/component/baComponent"],function(e){"use strict";return function(t){if(!t)throw new Error("createAdCAV: parameters are not passed");if(!(t.controller&&t.controller.register&&t.controller.register.components))throw new Error("createAdCAV: invalid controller");if(!t.componentName)throw new Error("createAdCAV: invalid componentName");if(!t.templateTarget)throw new Error("createAdCAV: invalid templateTarget");if(!t.adSlotId)throw new Error("createAdCAV: invalid adSlotId");if(!t.adViewPath)throw new Error("createAdCAV: invalid adViewPath");var n=t.controller;n.registry.registerComponent(t.componentName,{model:{interactionEventName:t.interactionEventName,scrollTargetId:t.scrollTargetId,adTargetId:t.templateTarget,adSlotId:t.adSlotId,isComposite:t.isComposite},spec:e("bluespec/advertisements"),methods:e("blue-ads/component/baComponent")});var i={target:t.templateTarget};return t.viewAppend&&(i.append=t.viewAppend),[n.components[t.componentName],t.adViewPath,i]}}),define("blue-ads/controller/baInitializer",["require","screenmap/api/urlToAnalyticsUri"],function(e){"use strict";var t=e("screenmap/api/urlToAnalyticsUri");return{initializeAds:function(){var e=t(window.location.href);e&&this.context.application.broadcast("renderAdsForAScreenID",{screenId:e})}}}),define("blue-ads/main",[],function(){}),define("blue-tags/core/_personalization",[],function(){"use strict";function e(){this.CookieName="PC_1_0",this.ValueDelimiter="|",this.origFieldOrder=[];this.GetLastSessionId=function(){return this.Get("lsid")},this.SetLastSessionId=function(e){a("lsid",e)&&this.Put("lsid",e)},this.GetSegmentGroup=function(){return this.Get("segg")},this.SetSegmentGroup=function(e){a("segg",e)&&this.Put("segg",e)},this.GetSegmentId=function(){return this.Get("segment")},this.SetSegmentId=function(e){a("segment",e)&&(this.Put("segment",e),this.ContainsKey("seg")&&this.Remove("seg"))},this.GetSite=function(){return this.Get("site")},this.SetSite=function(e){a("site",e)&&this.Put("site",e)},this.GetCustomerType=function(){return this.Get("ct")},this.SetCustomerType=function(e){a("ct",e)&&this.Put("ct",e)},this.GetUserType=function(){return this.Get("ut")},this.SetUserType=function(e){a("ut",e)&&this.Put("ut",e)},this.GetProfileType=function(){return this.Get("pt")},this.SetProfileType=function(e){a("pt",e)&&this.Put("pt",e)},this.GetProfileId=function(){return this.Get("pfid")},this.SetProfileId=function(e){a("pfid",e)&&this.Put("pfid",e)},this.GetZipCode=function(){return this.Get("zip")},this.SetZipCode=function(e){a("zip",e)&&this.Put("zip",e)},this.GetRpcList=function(){return this.Get("RPC")},this.SetRpcList=function(e){a("RPC",e)&&this.Put("RPC",e)},this.GetRpcCode=function(){return this.Get("RPC")},this.SetRpcCode=function(e){a("RPC",e)&&this.Put("RPC",e)},this.GetIsPreviewMode=function(){return this.Get("preview")},this.SetIsPreviewMode=function(e){a("preview",e)&&this.Put("preview",e)},this.GetAocList=function(){return this.Get("AOC")},this.SetAocList=function(e){a("AOC",e)&&this.Put("AOC",e)},this.GetAccountInfo=function(){return this.Get("accts")},this.GetIsKnown=function(){return this.Get("known")},this.SetIsKnown=function(e){a("known",e)&&this.Put("known",e)},this.GetSourceCode=function(){return this.Get("source_code")},this.SetSourceCode=function(e){a("source_code",e)&&this.Put("source_code",e)},this.GetECI=function(){return this.Get("ECI")},this.SetECI=function(e){a("ECI",e)&&this.Put("ECI",e)},this.GetGUID=function(){return this.Get("GUID")},this.SetGUID=function(e){a("GUID",e)&&this.Put("GUID",e)},this.GetLastUpdate=function(){return this.Get("lastUpdate")},this.SetLastUpdate=function(e){a("lastUpdate",e)&&this.Put("lastUpdate",e)},this.GetLastSent=function(){return this.Get("lastSent")},this.SetLastSent=function(e){a("lastSent",e)&&this.Put("lastSent",e)},this.GetSourceCodeKeyAppliedFor=function(){return this.Get("source_code_applied")},this.SetSourceCodeKeyAppliedFor=function(e){a("source_code_applied",e)&&this.Put("source_code_applied",e)},this.GetLocale=function(){return this.Get("locale")},this.SetLocale=function(e){a("locale",e)&&this.Put("locale",e)},this.Persist=n,this.Init=t,this.Init()}function t(){var e=function(e){var t=document.cookie.indexOf(e+"=");if(-1!=t){var n=t+e.length+1,i=document.cookie.indexOf(";",n);return-1==i&&(i=document.cookie.length),unescape(document.cookie.substring(n,i))}return null}(this.CookieName);if(e){var t=e.split(this.ValueDelimiter);if(t)for(var n=0;n<t.length;n++){var i=t[n].split("=");i&&2==i.length&&a(i[0],i[1])&&("seg"==i[0]?(this.origFieldOrder.push("segment"),this.SetSegmentId(decodeURIComponent(i[1])),r(this.CookieName,null,-30)):(this.origFieldOrder.push(i[0]),this.Put(i[0],decodeURIComponent(i[1]))))}}}function n(){var e=function(){var e=new Date,t=e.getMonth()+1,n=e.getDate();t<10&&(t="0"+t);n<10&&(n="0"+n);return e.getFullYear()+"-"+t+"-"+n}();this.SetLastUpdate(e),this.SetLastSent(e);for(var t="",n=0;n<this.origFieldOrder.length;n++)t+=this.origFieldOrder[n]+"="+encodeURIComponent(this.Get(this.origFieldOrder[n])),t+=this.ValueDelimiter;for(var a in this.Table)"function"!=typeof this.Table[a]&&(null==this.Table[a]||i(this.origFieldOrder,a)||(t+=a+"="+encodeURIComponent(this.Table[a]),t+=this.ValueDelimiter));r(this.CookieName,t,365),r("GW",this.GetCustomerType()+"|"+this.GetUserType()+"|"+this.GetProfileType()+"|"+this.GetSegmentId()+"|"+this.GetSegmentGroup()+"|"+this.GetSite())}function i(e,t){for(var n=0;n<e.length;n++)if(e[n]==t)return!0;return!1}function r(e,t,n){var i=function(){var e=null,t=document.domain.split(".");t.length>=2&&(e=t[t.length-2]+"."+t[t.length-1]);return e}(),r=new Date;r.setDate(r.getDate()+n),document.cookie=e+"="+t+(n?";expires="+r.toGMTString():"")+";path=/"+(i?";domain="+i:"")}function a(e,t){var n=!1;if(t&&t.length>0)switch(e){case"zip":new RegExp("^\\d{5}-?(\\d{4})?$").test(t)&&(n=!0);break;case"source_code":case"source_code_applied":4==t.length&&(n=!0);break;case"lsid":case"segg":n=!0;break;case"seg":case"segment":3==t.length&&(n=!0);break;case"site":case"ct":case"ut":case"pt":case"pfid":n=!0;break;case"RPC":new RegExp("^([A-Za-z0-9]{3,4}|,)*,$").test(decodeURIComponent(t))&&(n=!0);break;case"preview":n=!0;break;case"AOC":new RegExp("^([A-Za-z0-9]{1,5}|,)*,$").test(decodeURIComponent(t))&&(n=!0);break;case"known":new RegExp("^(Y|N)$").test(t)&&(n=!0);break;case"ECI":n=!0;break;case"GUID":new RegExp("^[A-Fa-f0-9]{8}-[A-Fa-f0-9]{4}-[A-Fa-f0-9]{4}-[A-Fa-f0-9]{4}-[A-Fa-f0-9]{12}$").test(t)&&(n=!0);break;case"lastUpdate":case"lastSent":new RegExp("^\\d{4}-\\d{2}-\\d{2}$").test(t)&&(n=!0);break;case"locale":case"accts":n=!0}return n}return e.prototype=new function(){this.Clear=function(){this.Table=new Array},this.ContainsKey=function(e){var t=!1;for(var n in this.Table)if(n==e&&null!=this.Table[n]){t=!0;break}return t},this.Get=function(e){var t=this.Table[e];return t||null},this.Put=function(e,t){null!=e&&null!=t&&(this.Table[e]=t)},this.Remove=function(e){var t=this.Table[e];return this.Table[e]=null,t},this.Table=new Array},e}),define("blue-tags/core/constants",[],function(){"use strict";return{appName:"Tag Manager 2",productionServiceDomain:"https://www.chase.com",serviceEndpointPartialPath:"/apps/services/tagmanager",googleAdsDomain:"https://googleads.g.doubleclick.net",googleAdsServiceEndpointPartialPath:"/pagead/viewthroughconversion/1036322744/",xPlusOneStagingDomain:"https://rf15-qa.chase.com",xPlusOneProdDomain:"https://rf15.chase.com",xPlusOneServiceEndpointPartialPath:"/wsb/15629/poe/59242226",midasDevDomain:"https://midas-dev2.chase.com/stream/tag?",midasQaDomain:"https://midas-qa.chase.com/stream/tag?",midasPerfDomain:"https://midas-perf.chase.com/stream/tag?",midasProdDomain:"https://midas.chase.com/stream/tag?"}}),define("blue-tags/utils/index",["../core/constants"],function(e){"use strict";return{getCookie:function(e){var t=new RegExp(e+"s*=s*(.*?)(?:;|$)"),n=document.cookie.toString().match(t);return n?unescape(n[1]):null},setFireOnceCookie:function(e,t){if(e&&t){var n=e+"=",i=new Date;i.setTime(i.getTime()+18e5),document.cookie=n+encodeURIComponent(t)+"; expires="+i.toGMTString()}},extend:function(e,t){if(!t)return e;if(!e)return t;for(var n in t)e[n]=t[n];return e},indexOf:function(e,t){for(var n=e.length,i=0;i<n;i++)if(e[i]==t)return i;return-1}}}),define("blue-tags/core/environment",["./_personalization","../utils/index"],function(e,t){"use strict";var n="";return{getEnvironment:function(e){n=e},getInstance:function(i){var r;return{env:n||"prod",query:function(e){if(""==e)return{};for(var t={},n=0;n<e.length;++n){var i=e[n].split("=");2==i.length&&(t[i[0]]=decodeURIComponent(i[1].replace(/\+/g," ")))}return t}(window.location.search.substr(1).split("&")),persona:"function"!=typeof e?{}:(new e).Table,v1st:(r=t.getCookie("v1st"),/^[a-z0-9]+$/i.test(r)?r:null),userAgent:encodeURIComponent(navigator.userAgent),referrer:encodeURIComponent(document.referrer),random:Math.floor(9e8*Math.random())+1e8,pageUrl:encodeURIComponent(document.location)}}}}),define("blue-tags/utils/cors",[],function(){"use strict";return function(e,t){var n=new XMLHttpRequest;return"withCredentials"in n?n.open(e,t,!0):"undefined"!=typeof XDomainRequest?(n=new XDomainRequest).open(e,t):n=null,n}}),define("blue-tags/utils/logger",["../core/constants"],function(e){"use strict";return function(t){window.console&&console.log("[",e.appName,"] ",t)}}),define("blue-tags/modules/replace",["../core/environment","../utils/logger","../utils/index"],function(Config,Logger,Utils){"use strict";return function(source,params){var clientVars,match,matchesArray,regexp=/\{(.+?)\}/g,replacement,toReturn;if(clientVars=params?Utils.extend(params,Config.getInstance()):Config.getInstance(),matchesArray=source.match(regexp),toReturn=source,matchesArray)try{for(var i=0;i<matchesArray.length;i++){match=matchesArray[i].substring(1,matchesArray[i].length-1);try{replacement=eval("clientVars."+match)||""}catch(e){Logger("Error processing replace variables "+match)}toReturn=toReturn.replace(matchesArray[i],replacement)}}catch(e){Logger.log("Unable to Replace Placeholder with JSON Object Properties.")}return toReturn}}),define("blue-tags/modules/pixel",["./replace"],function(e){"use strict";return{invokePixelTag:function(t,n){t=e(t,n),this.requestPixel(t)},requestPixel:function(e){document.images&&((new Image).src=e)}}}),define("blue-tags/modules/extensions",["../core/environment","../core/constants","../utils/cors","../utils/logger","./pixel","./replace","../utils/index"],function(e,t,n,i,r,a,o){"use strict";return{audienceSyndication:function(){var o="",s={UserAgent:"",GUID:a("{persona.pfid}")||"null",IPAddress:"",XP_UID:"",URL:encodeURIComponent(location.href),Referrer:encodeURIComponent(encodeURIComponent(document.referrer)),ForceUIDMatch:!1,CreateXPUID:!0,Data:{ssv_pfid:a("{persona.pfid}")||"null",ssv_zip:a("{persona.zip}"),ssv_product:"",ssv_locale:a("{persona.locale}"),ssv_cigseg:a("{persona.segment}")}};"prod"===e.getInstance().env?o+=t.xPlusOneProdDomain:o+=t.xPlusOneStagingDomain,o+=t.xPlusOneServiceEndpointPartialPath,o+="?_u="+(a("{persona.ECI}")?a("{persona.ECI}"):""),o+="&Debug=false&Test=false&ContentType=application/json&TransactionID=eee-444";try{o+="&RequestObject=",o+=JSON.stringify(s)}catch(e){return void i(" - [AudienceSyndication] Error Stringifying RequestObject.")}var c=new n("GET",o);c||i(" - [AudienceSyndication] CORS Not Supported."),c.onload=function(){if(200===this.status){var e,n=t.googleAdsDomain+t.googleAdsServiceEndpointPartialPath;n+="?value=0&label=AgenCNqg-QMQuI-U7gM&guid=ON&script=0&url=",n+=document.domain,n+=encodeURIComponent("/audiences/");try{(e=JSON.parse(this.responseText))&&e.Nodes&&(n+=e.Nodes,r.invokePixelTag(n))}catch(e){return void i(" - [AudienceSyndication] Error parsing response.")}}else i(" - [AudienceSyndication] Request error.")},c.onerror=function(){i(" - [AudienceSyndication] Request failed.")},c.send()},midasActivity:function(n,i,a,s,c){var l={midas:{}};s&&null!=s&&(l.midas.productId=s),i&&null!=i&&(l.midas.AppID=i),a&&null!=a&&(l.midas.TagMap=a),n&&null!=n&&(l.midas.TagId=n),c&&null!=c&&(l.midas.sourceCode=c);var d="";"prod"===e.getInstance().env?d+=t.midasProdDomain:"qa"===e.getInstance().env?d+=t.midasQaDomain:"dev"===e.getInstance().env?d+=t.midasDevDomain:"load"===e.getInstance().env&&(d+=t.midasPerfDomain);var u,p=o.getCookie("PC_1_0"),f=o.getCookie("primaryECI"),m=o.getCookie("primaryEci");p?u="{persona.ECI}":f?u=f:m&&(u=m),d+="&pageID={midas.TagId}",d+="&ssv_tmc={midas.TagMap}",d+="&ssv_v1st={v1st}",d+="&ssv_pfid={persona.pfid}",d+="&ssv_productid={midas.productId}",d+="&ssv_src={midas.sourceCode}",d+="&ssv_eci="+u,d+="&ssv_eid={midas.TagMap}_{midas.productId}_{midas.sourceCode}",r.invokePixelTag(d,l)}}}),define("blue-tags/modules/tags",["../core/environment","../core/constants","../utils/logger","./pixel","./replace","./extensions","../utils/index"],function(Config,Constants,Logger,Pixel,ReplacePlaceholder,TagManagerExtensions,Utils){"use strict";var TagManagement={stateMap:{scripts:[],urls:[],semanticAction:""},fireTags:function(){if(this.stateMap.urls){for(var i=0;i<this.stateMap.urls.length;i++)Pixel.invokePixelTag(this.stateMap.urls[i]);this.stateMap.urls=[]}if(this.stateMap.scripts){for(var i=0;i<this.stateMap.scripts.length;i++)try{eval("TagManagerExtensions."+this.stateMap.scripts[i])}catch(e){Logger("Error processing script "+this.stateMap.scripts[i])}this.stateMap.scripts=[]}},registerTags:function(e){if(e){var t=e.scripts,n=e.urls;if(n)for(var i=0;i<n.length;i++)n[i]&&this.stateMap.urls.push(n[i]);if(t)for(i=0;i<t.length;i++)t[i]&&this.stateMap.scripts.push(ReplacePlaceholder(t[i]))}else Logger("Error Registering Tags.")}};return{processTags:function(data){data||Logger("Error Processing Data: "+data);var fireOnceArray=[],fireOnceCookie=Utils.getCookie("fireOnce"),fireOnceStatus,condition,conditionResult,interactions,item,mappingID;if(fireOnceCookie&&(fireOnceArray=fireOnceCookie.split(",")),data&&data.jsonScriptArray){for(var i=0;i<data.jsonScriptArray.length;i++){if(item=data.jsonScriptArray[i],mappingID=item.mappingID,condition=item.conditions,conditionResult=!1,condition)try{conditionResult=eval(condition)}catch(e){conditionResult=!1}else conditionResult=!0;conditionResult&&(fireOnceStatus=item.fireOnce,fireOnceStatus?-1==Utils.indexOf(fireOnceArray,mappingID)&&(fireOnceArray.push(mappingID),TagManagement.registerTags(item)):TagManagement.registerTags(item))}fireOnceCookie=fireOnceArray.join(","),Utils.setFireOnceCookie("fireOnce",fireOnceCookie),TagManagement.fireTags()}},setSemanticAction:function(e){TagManagement.stateMap.semanticAction=e},processTagsForSemanticActions:function(data){data||Logger("Error Processing Data: "+data);var fireOnceArray=[],fireOnceCookie=Utils.getCookie("fireOnce"),fireOnceStatus,condition,conditionResult,interactions,item,mappingID,itemSemanticAction,userSemanticAction;if(fireOnceCookie&&(fireOnceArray=fireOnceCookie.split(",")),data&&data.jsonScriptArray){for(var i=0;i<data.jsonScriptArray.length;i++){if(item=data.jsonScriptArray[i],mappingID=item.mappingID,condition=item.conditions,conditionResult=!1,condition)try{conditionResult=eval(condition)}catch(e){conditionResult=!1}else conditionResult=!0;if(conditionResult)if(itemSemanticAction=item.semanticactions,userSemanticAction=TagManagement.stateMap.semanticAction,itemSemanticAction){for(var j=0;j<itemSemanticAction.length;j++)if(itemSemanticAction[j].attrAction===userSemanticAction){TagManagement.registerTags(item);break}}else fireOnceStatus=item.fireOnce,fireOnceStatus&&-1==Utils.indexOf(fireOnceArray,mappingID)&&(fireOnceArray.push(mappingID),TagManagement.registerTags(item))}fireOnceCookie=fireOnceArray.join(","),Utils.setFireOnceCookie("fireOnce",fireOnceCookie),TagManagement.fireTags()}}}}),define("blue-tags/main",["./core/environment","./core/constants","./utils/cors","./utils/logger","./modules/tags"],function(e,t,n,i,r){"use strict";var a={configMap:{defaultServer:t.productionServiceDomain,env:"prod",tagManagerPath:t.serviceEndpointPartialPath},stateMap:{screenId:"",tagServer:t.productionServiceDomain},getEnvironment:function(){return this.configMap.env},setEnvironment:function(e){var t="unknown";-1!=e.indexOf("wwwq")?t="qa":-1!=e.indexOf("wwwi")?t="ist":-1!=e.indexOf("wwwd")?t="dev":-1!=e.indexOf("load")?t="load":-1!=e.indexOf("www.")&&(t="prod"),this.configMap.env=t},getScreenId:function(){return this.stateMap.screenId},setScreenId:function(e){e?this.stateMap.screenId=e:i("Screen Id is not defined.")},getTagServer:function(){return this.stateMap.tagServer},setTagServer:function(e){e&&(this.stateMap.tagServer=e,this.setEnvironment(e))},tagsErrorCallback:function(){i("Tags Request Failed.")},tagsSuccessCallback:function(){if(200===this.status){var e;try{e=JSON.parse(this.responseText)}catch(e){return void i("Error Processing Tags Request.")}r.processTags(e)}else i("Error Requesting Tags.")},requestTags:function(){if(this.getTagServer()&&this.getScreenId()){var e=this.getTagServer()+a.configMap.tagManagerPath+this.getScreenId(),t=n("GET",e);t||i("CORS Not Supported."),t.onload=this.tagsSuccessCallback,t.onerror=this.tagsErrorCallback,t.send()}},tagsSuccessCallbackForSemanticActions:function(){if(200===this.status){var e;try{e=JSON.parse(this.responseText)}catch(e){return void i("Error Processing Tags Request.")}r.processTagsForSemanticActions(e)}else i("Error Requesting Tags.")},requestTagsForSemanticActions:function(){if(this.getTagServer()&&this.getScreenId()){var e=this.getTagServer()+a.configMap.tagManagerPath+this.getScreenId(),t=n("GET",e);t||i("CORS Not Supported."),t.onload=this.tagsSuccessCallbackForSemanticActions,t.onerror=this.tagsErrorCallback,t.send()}}};return{init:function(t,n){a.setScreenId(t),a.setTagServer(n),e.getEnvironment(a.getEnvironment()),a.requestTags()},semanticActionInit:function(t,n,i){a.setScreenId(t),a.setTagServer(n),r.setSemanticAction(i),e.getEnvironment(a.getEnvironment()),a.requestTagsForSemanticActions()}}}),define("appkit/main",["require","appkit-utilities/main","analytics/main","blue-ads/main","blue-tags/main"],function(e){"use strict";e("appkit-utilities/main"),e("analytics/main"),e("blue-ads/main"),e("blue-tags/main")});
//# sourceMappingURL=../../../../sourcemap/hash/appkit/js/main.js.map
