(function(){this.Blue||(this.Blue={version:{},buildDate:{}}),this.Blue.version["blue-app/main"]="2.18.0",this.Blue.buildDate["blue-app/main"]="2019-07-22T15:11:33.265Z"}).call(this),requirejs.config({}),define("blue-app/config",function(){}),define("blue-app/settings",["require","blue/settings"],function(e){"use strict";return e("blue/settings")}),define("blue-app/localeSettings",["require","./settings","blue/is","blue/index"],function(e){"use strict";function t(e,t){if(e&&t){r.array(e)||(e=[e]);for(var n,a;n=e.shift()||e.length;)if(n&&n[t])return a=n[t],r.plainObject(a)&&(a=""),a}}var n=e("./settings"),r=e("blue/is"),a=e("blue/index");return{addSettingsToModel:function(e){var i,o,s,u,c,l,p,d,f,m,h,b=n.get("USER_INFO")||{},g=e.spec,v=e.component&&e.component.kind,y=e.component.context.area&&e.component.context.area.areaName,E=g.name+".DEFAULT",x=v?g.name+"."+v:E;y&&(d=e.component.context.area.areaName.toString().toLowerCase(),l="LOCALIZED_CONTENT_"+d),p=n.get(l,n.Type.ENV),f=n.get("LOCALIZED_CONTENT_app",n.Type.ENV),m=n.get("LOCALIZED_CONTENT",n.Type.APP)||{},p&&(p=p[x]||p[E]||p[g.name]||void 0),f&&(f=f[x]||f[E]||f[g.name]||void 0),h=p||f,Object.keys(g.settings).map(function(e){var n,l=g.name&&e,d=l&&b&&b.channel;h&&l&&(i=t([p,f],e)),u="_default."+e,c=l?g.name+"."+e:void 0,s=d?c+"."+b.channel:void 0,o=d&&b.segment?s+"."+b.segment:void 0,r.string(n=i)||r.string(n=m[o])||r.string(n=m[s])||r.string(n=m[c])||r.string(n=m[u])||r.string(n=m[e])||(n=a.minified?"":"{"+e+"}"),i||(n+=""),r.plainObject(g.settings[e])?g.settings[e].value=n+"":g.settings[e]={value:n+""}})}}}),define("blue-app/validate/validator",["require","blue/log","blue/declare"],function(e){"use strict";var t=e("blue/log")("[app]");return e("blue/declare")({constructor:function(e){this.types=new Map,this.register(e)},register:function(e){Object.keys(e).forEach(function(t){"constructor"!==t&&this.types.set(t,e[t])},this),t.debug("Registered validation types: ",this.availableTypes())},availableTypes:function(){var e,t=this.types.keys(),n=[];if(this.types instanceof Map)for(;e=t.next().value;)n.push(e);return n},validate:function(e,t,n){var r;if(!this.types.has(t))throw new TypeError('Spec data type "'+t+'", does not exist. Please add it if none of the following suffices: '+this.availableTypes().join(", "));return r=this.types.get(t),r.validate(e,n)}})}),define("blue-app/validate/standardTypes",[],function(){"use strict";return{AccountNumber:{constraints:[{type:"AlphaNumeric"},{type:"Length",params:{min:8,max:16}}]},AccountMaskNumber:{constraints:[{type:"AlphaNumeric"},{type:"Length",params:{min:7}},{type:"Numbers",params:{min:4,max:4}},{type:"Pattern",params:{regex:"/(\\d){4}$/"}}]},AlertsProfileNickname:{constraints:[{type:"Pattern",params:{regex:"/[A-Z a-z 0-9 _]$/"}}]},Category:{constraints:[{type:"Length",params:{min:2}}]},Description:{constraints:[{type:"NotBlank"}]},Date:{constraints:[{type:"Date"}]},Email:{constraints:[{type:"NotPhoneEmail"},{type:"Email"}]},AddressLine:{constraints:[{type:"AddressLine"}]},City:{constraints:[{type:"City"}]},ZipCode:{constraints:[{type:"ZipCode"}]},ZipCodeExtension:{constraints:[{type:"ZipCodeExtension"}]},PostalCode:{constraints:[{type:"PostalCode"}]},IdentificationCode:{constraints:[{type:"Integer"},{type:"Length",params:{max:8}}]},SimpleUserId:{constraints:[{type:"NonRepeatingSequence"}]},TaxpayerIdentification:{constraints:[{type:"Pattern",params:{regex:"^(\\d{3}-\\d{2}-\\d{4}|\\d{9}|\\d{2}-\\d{7}|XXX-XX-XXXX|XX-XXXXXXX)$"}}]},UserSecurityCode:{constraints:[{type:"AlphaNumeric"},{type:"Length",params:{min:8,max:32}},{type:"Characters",params:{min:1}},{type:"Numbers",params:{min:1}}]},Frequency:{constraints:[{type:"Enum",params:{value:"Daily Weekly Monthly"}}]},Id:{constraints:[{type:"AlphaNumeric"},{type:"Min",params:{value:6}},{type:"Numbers",params:{min:1}}]},Money:{constraints:[{type:"Money"}]},OnOff:{constraints:[{type:"Boolean"}]},Password:{constraints:[{type:"Length",params:{min:8,max:32}},{type:"Numbers",params:{min:1}},{type:"Characters",params:{min:1}},{type:"Pattern",params:{regex:"/^[\\w!@#$%^*()_+\\-=\\[\\]{};':\\|,.\\/?~]*$/"}},{type:"NonConsecutiveAlphaNumerics",params:{maxSeqential:3}},{type:"NonRepeatingAlphaNumerics",params:{maxRepeating:2}}]},Payee:{constraints:[{type:"Length",params:{max:30}}]},Phone:{constraints:[{type:"PhoneNorthAmerica"},{type:"Length",params:{min:10,max:12}}]},Rate:{constraints:[{type:"Digits",params:{integer:0,fraction:2}},{type:"Range",params:{min:0,max:.99}}]},RoutingNumber:{constraints:[{type:"RoutingNumber"}]},UserId:{constraints:[{type:"AlphaNumeric"},{type:"Length",params:{min:8,max:32}},{type:"Characters",params:{min:1}},{type:"Numbers",params:{min:1}}]},RSAToken:{constraints:[{type:"Numeric"},{type:"Length",params:{min:6,max:35}}]},ProspectApplicantId:{constraints:[{type:"AlphaNumeric"},{type:"Length",params:{min:6}}]},List:{constraints:[]},Noop:{constraints:[]}}}),define("blue-app/validate/types",["require","exports","module","blue/object/extend","./standardTypes"],function(e,t,n){"use strict";var r=e("blue/object/extend"),a=n.config(),i=a.types;return r(e("./standardTypes"),i)}),define("blue-app/validate/var/ALPHA_REGEX",[],function(){"use strict";return/^[A-Za-z]*$/}),define("blue-app/validate/var/ALPHA_NUMERIC_REGEX",[],function(){"use strict";return/^[0-9A-Za-z]*$/}),define("blue-app/validate/var/ALPHA_NUMERIC_PLUS_REGEX",[],function(){"use strict";return/^[a-zA-Z0-9.#&$\/,:'\- ]*$/}),define("blue-app/validate/var/ADDRESS_LINE_REGEX",[],function(){"use strict";return/^[a-zA-Z0-9.#&$\/,:'\- ]{0,40}$/}),define("blue-app/validate/var/ZIP_CODE_REGEX",[],function(){"use strict";return/^[0-9]{5}$/}),define("blue-app/validate/var/POSTAL_CODE_REGEX",[],function(){"use strict";return/^[a-zA-Z0-9]{0,9}$/}),define("blue-app/validate/var/ZIP_CODE_EXTENSION_REGEX",[],function(){"use strict";return/^([0-9]{4})?$/}),define("blue-app/validate/var/CITY_REGEX",[],function(){"use strict";return/^[a-zA-Z0-9. ',-]{0,32}$/}),define("blue-app/validate/var/ANY_ALPHA_NUMERIC_REGEX",[],function(){"use strict";return/[0-9A-Za-z]/g}),define("blue-app/validate/var/BOOLEAN_REGEX",[],function(){"use strict";return/^(true|false)$/i}),define("blue-app/validate/var/EMAIL_REGEX",[],function(){"use strict";return/^[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9]){1,}?$/i}),define("blue-app/validate/var/INTEGER_REGEX",[],function(){"use strict";return/^-?[0-9]*$/}),define("blue-app/validate/var/NAME_REGEX",[],function(){"use strict";return/^[a-zA-Z\. '-]*$/}),define("blue-app/validate/var/NOT_AN_ALPHA_REGEX",[],function(){"use strict";return/[^a-zA-Z]/g}),define("blue-app/validate/var/NOT_A_CAPITAL_REGEX",[],function(){"use strict";return/[^A-Z]/g}),define("blue-app/validate/var/NOT_A_NUMBER_REGEX",[],function(){"use strict";return/[^0-9]/g}),define("blue-app/validate/var/NOT_A_PASSWORD_SYMBOL",[],function(){"use strict";return/[^!#$%+\/=@~]/g}),define("blue-app/validate/var/NOT_PHONE_EMAIL_REGEX",[],function(){"use strict";return/^\d{10}@/}),define("blue-app/validate/var/NUMERIC_REGEX",[],function(){"use strict";return/^[0-9]*$/}),define("blue-app/validate/var/REAL_REGEX",[],function(){"use strict";return/^-?([0-9]+(\.[0-9]+)?|\.[0-9]+)$/}),define("blue-app/validate/var/REPEATING_SEQUENCE_REGEX",[],function(){"use strict";return/(.)\1/}),define("blue-app/validate/var/URL_REGEX",[],function(){"use strict";return/^([a-z]([a-z]|\d|\+|-|\.)*):(\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!$&'()*+,;=]|:)*@)?((\[(|(v[\da-f]{1,}\.(([a-z]|\d|-|\.|_|~)|[!$&'()*+,;=]|:)+))\])|((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!$&'()*+,;=])*)(:\d*)?)(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!$&'()*+,;=]|:|@)*)*|(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!$&'()*+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!$&'()*+,;=]|:|@)*)*)?)|((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!$&'()*+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!$&'()*+,;=]|:|@)*)*)|((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!$&'()*+,;=]|:|@)){0})(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!$&'()*+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!$&'()*+,;=]|:|@)|\/|\?)*)?$/i}),define("blue-app/validate/var/WHITESPACE_REGEX",["blue/util"],function(e){"use strict";return new RegExp("["+e.string.WHITE_SPACES.join("")+"]","g")}),define("blue-app/validate/var/DEFAULT_DATE_FORMAT",[],function(){"use strict";return"MM/DD/YYYY"}),define("blue-app/validate/var/PASSWORD_FORMAT",[],function(){"use strict";return/^[A-Za-z0-9!#$%+\/=@~]*$/}),define("blue-app/validate/var/PHONE_NORTH_AMERICA",[],function(){"use strict";return/^\d{10}$|^\d{3}-\d{3}-\d{4}$/}),define("blue-app/validate/var/PHONE_OAO_FORMAT",[],function(){"use strict";return/^(?!(?:012-?345-?6789|987-?654-?3210))(?:\d{3}(-?)\d{3}\1\d{4})$/}),define("blue-app/validate/var/SSN_FORMAT",[],function(){"use strict";return/^\d{9}$|^\d{3}-\d{2}-\d{4}$/}),define("blue-app/validate/var/SSN_OAO_FORMAT",[],function(){"use strict";return/^(?!9|000|666|123(-?)45\1{1}6789|([1-578])\2{2}(-?)\2{2}\3\2{4})\d{3}(-?)(?!00)\d{2}\4(?!0000)\d{4}$/}),define("blue-app/validate/var/SSN_VALID_GROUPS_FORMAT",[],function(){"use strict";return/^(?!000|666|9|\d{3}(?:-?)00|\d{3}(-?)\d{2}\1(?:0000)).*$/}),define("blue-app/validate/var/SSN_EXCLUDE_FORMAT",[],function(){"use strict";return/^(?!123(-?)45\1{1}6789|987(-?)65\2{1}4321).*$/}),define("blue-app/validate/var/CURRENCY_FORMATS",[],function(){"use strict";return{USD:{decimal:".",decimalDigits:2,kDelim:",",symbol:"$",symbolBegin:!0,regex:/^\s*\$?((\d+|\d{1,3}(,\d{3})*)(\.\d{0,2})?|\.\d{1,2})\s*$/}}}),define("blue-app/validate/constraints",["require","exports","module","./var/ALPHA_REGEX","./var/ALPHA_NUMERIC_REGEX","./var/ALPHA_NUMERIC_PLUS_REGEX","./var/ADDRESS_LINE_REGEX","./var/ZIP_CODE_REGEX","./var/POSTAL_CODE_REGEX","./var/ZIP_CODE_EXTENSION_REGEX","./var/CITY_REGEX","./var/ANY_ALPHA_NUMERIC_REGEX","./var/BOOLEAN_REGEX","./var/EMAIL_REGEX","./var/INTEGER_REGEX","./var/NAME_REGEX","./var/NOT_AN_ALPHA_REGEX","./var/NOT_A_CAPITAL_REGEX","./var/NOT_A_NUMBER_REGEX","./var/NOT_A_PASSWORD_SYMBOL","./var/NOT_PHONE_EMAIL_REGEX","./var/NUMERIC_REGEX","./var/REAL_REGEX","./var/REPEATING_SEQUENCE_REGEX","./var/URL_REGEX","./var/WHITESPACE_REGEX","./var/DEFAULT_DATE_FORMAT","./var/PASSWORD_FORMAT","./var/PHONE_NORTH_AMERICA","./var/PHONE_OAO_FORMAT","./var/SSN_FORMAT","./var/SSN_OAO_FORMAT","./var/SSN_VALID_GROUPS_FORMAT","./var/SSN_EXCLUDE_FORMAT","./var/CURRENCY_FORMATS","blue/is","moment","blue/util","blue/util","blue/util","blue/util"],function(e,t,n){"use strict";var r,a=e("./var/ALPHA_REGEX"),i=e("./var/ALPHA_NUMERIC_REGEX"),o=e("./var/ALPHA_NUMERIC_PLUS_REGEX"),s=e("./var/ADDRESS_LINE_REGEX"),u=e("./var/ZIP_CODE_REGEX"),c=e("./var/POSTAL_CODE_REGEX"),l=e("./var/ZIP_CODE_EXTENSION_REGEX"),p=e("./var/CITY_REGEX"),d=e("./var/ANY_ALPHA_NUMERIC_REGEX"),f=e("./var/BOOLEAN_REGEX"),m=e("./var/EMAIL_REGEX"),h=e("./var/INTEGER_REGEX"),b=e("./var/NAME_REGEX"),g=e("./var/NOT_AN_ALPHA_REGEX"),v=e("./var/NOT_A_CAPITAL_REGEX"),y=e("./var/NOT_A_NUMBER_REGEX"),E=e("./var/NOT_A_PASSWORD_SYMBOL"),x=e("./var/NOT_PHONE_EMAIL_REGEX"),_=e("./var/NUMERIC_REGEX"),S=e("./var/REAL_REGEX"),A=e("./var/REPEATING_SEQUENCE_REGEX"),C=e("./var/URL_REGEX"),R=e("./var/WHITESPACE_REGEX"),w=e("./var/DEFAULT_DATE_FORMAT"),O=e("./var/PASSWORD_FORMAT"),N=e("./var/PHONE_NORTH_AMERICA"),T=e("./var/PHONE_OAO_FORMAT"),P=e("./var/SSN_FORMAT"),k=e("./var/SSN_OAO_FORMAT"),I=e("./var/SSN_VALID_GROUPS_FORMAT"),F=e("./var/SSN_EXCLUDE_FORMAT"),j=e("./var/CURRENCY_FORMATS"),L=e("blue/is"),M=e("moment"),D=e("blue/util").string.toNumber,q=e("blue/util").object.toString,X=e("blue/util").string.typecast,H=e("blue/util").object.extend,G=n.config(),U=G.constraints,z=function(e,t){var n,r;return L.defined(t.value)?n=r=X(t.value):(n=L.defined(t.min)?D(t.min):0,r=L.defined(t.max)?D(t.max):Number.MAX_VALUE),(e=D(e))>=n&&e<=r};return r={Alpha:{validator:function(e){return a.test(e)}},AlphaNumeric:{validator:function(e){return i.test(e)}},AlphaNumericPlus:{validator:function(e){return o.test(e)}},AddressLine:{validator:function(e){return s.test(e)}},PostalCode:{validator:function(e){return c.test(e)}},ZipCode:{validator:function(e){return u.test(e)}},ZipCodeExtension:{validator:function(e){return l.test(e)}},City:{validator:function(e){return L.singleSpaced(e)&&p.test(e)}},Date:{validator:function(e,t){if(0===q(e).length)return!0;var n=t.format||w;return M(e,n,!0).isValid()}},Boolean:{validator:function(e){return f.test(e)}},Blank:{validator:function(e){return""===q(e).replace(R,"")}},Capitals:{validator:function(e,t){return z(q(e).replace(v,"").length,t)}},Characters:{validator:function(e,t){return z(q(e).replace(g,"").length,t)}},ConstraintSet:{validator:function(e,t){var n=e;return z(t.constraints.reduce(function(e,t){return e+(0|r[t.type].validator(n,t.params))},0),t)}},Date18YearsOld:{validator:function(e,t){var n=t.format||w,r=M(e,n,!0);return r.isValid()&&M().diff(r,"years")>17}},DateRange:{validator:function(e,t){var n=t.format||w,r=M(e,n,!0),a=r.isValid();if(a&&L.defined(t.value)&&(a=r.isSame(M(t.value,n,!0))),a&&L.defined(t.min)){var i=M(t.min,n,!0);a=r.isSame(i)||r.isAfter(i)}if(a&&L.defined(t.max)){var o=M(t.max,n,!0);a=r.isSame(o)||r.isBefore(o)}return a}},Digits:{validator:function(e,t){var n,r=!1;return e=q(e).replace(R,""),n=e.split(/\./),e.length>0&&(1===n.length&&(n[1]=""),r=!(t.integer>0)||n[0].length<=t.integer,t.fraction>0&&(r=r&&n[1].length<=t.fraction)),r}},Email:{validator:function(e){return m.test(e)}},NotPhoneEmail:{validator:function(e){return!x.test(e)}},Enum:{validator:function(e,t){return-1!==(L.string(t.value)?t.value.split(" "):L.array(t.value)?t.value:[]).indexOf(e)}},Future:{validator:function(e,t){var n=t.format||w,r=M(e,n,!0);return r.isValid()&&r.isAfter()||r.isSame()}},Integer:{validator:function(e){return h.test(e)}},ITINRange:{validator:function(e){e=q(e);var t=e.length<4?0:X(e.charAt(3),10);return e.length>4&&t>=7&&(t=10*t+X(e.charAt(4),10)),e.length<4||4===e.length&&t>=7||t>=70&&t<=88||t>=90&&t<=92||t>=94}},Length:{validator:function(e,t){return z(q(e).length,t)}},Max:{validator:function(e,t){return parseFloat(e)<=parseFloat(t.value)}},Min:{validator:function(e,t){return parseFloat(e)>=parseFloat(t.value)}},Money:{validator:function(e,t){return(t.currencyFormat||j[t.format||"USD"]).regex.test(q(e))}},MustBeginWith:{validator:function(e,t){return e=q(e),0===e.length||e.charAt(0)===t.value}},NotBlank:{validator:function(e){return""!==e.replace(R,"")}},NotBeginWith:{validator:function(e,t){return e=q(e),0===e.length||e.charAt(0)!==t.value}},NotBeginWith1:{validator:function(e){return r.NotBeginWith.validator(e,{value:"1"})}},NonConsecutiveAlphaNumerics:{validator:function(e,t){var n=e.split(""),r=e.length,a=t.maxSequential||t.maxSeqential,i=1;if(r<a)return!0;for(var o=0;o<r-1;++o){var s=n[o].toLowerCase().charCodeAt();if(s===n[o+1].toLowerCase().charCodeAt()-1&&(s>=48&&s<57||s>=97&&s<122)){if(++i===a)return!1}else i=1}for(o=r-1;o>=1;--o){if(n[o].charCodeAt()===n[o-1].charCodeAt()-1&&(s>48&&s<=57||s>97&&s<=122)){if(++i===a)return!1}else i=1}return!0}},NonRepeatingAlphaNumerics:{validator:function(e,t){for(var n="([a-z\\d])",r=0;r<t.maxRepeating;++r)n+="\\1";return!new RegExp(n,"gi").test(e)}},NonRepeatingCharacters:{validator:function(e,t){for(var n="(.)",r=0;r<t.maxRepeating;++r)n+="\\1";return!new RegExp(n,"gi").test(e)}},NonRepeatingSequence:{validator:function(e){return!A.test(e)}},Numbers:{validator:function(e,t){return z(q(e).replace(y,"").length,t)}},Numeric:{validator:function(e){return _.test(e)}},Past:{validator:function(e,t){var n=t.format||w,r=M(e,n,!0);return r.isValid()&&r.isBefore()||r.isSame()}},PasswordCharacters:{validator:function(e){return O.test(e)}},PasswordSymbols:{validator:function(e,t){return z(q(e).replace(E,"").length,t)}},Pattern:{validator:function(e,t){var n,r;return r=L.string(t.regex)?t.regex.replace(/^\//,"").replace(/\/$/,""):t.regex,n=L.string(t.flags)?new RegExp(q(r).replace(/^\//,"").replace(/\/[^\/]*$/,""),t.flags):new RegExp(r),n.test(e)}},PersonalName:{validator:function(e){return b.test(e)}},Range:{validator:function(e,t){return z(e,t)}},Real:{validator:function(e){return S.test(e)}},Specials:{validator:function(e,t){return z(q(e).replace(d,"").length,t)}},Ssn:{validator:function(e){return P.test(e)}},SsnExclude:{validator:function(e){return F.test(e)}},SsnOao:{validator:function(e){return k.test(e)}},SsnValidGroups:{validator:function(e){return I.test(e)}},Step:{validator:function(e,t){var n=X(e),r=X(t.step);return z(n,t)&&n%r==0}},URL:{validator:function(e){return C.test(e)}},PhoneNorthAmerica:{validator:function(e){return N.test(e)}},PhoneOao:{validator:function(e){return T.test(e)}},RoutingNumber:{validator:function(e){var t=0;e=q(e);for(var n=0,r=e.length;n<r;n+=3)t+=3*X(e.charAt(n),10)+7*X(e.charAt(n+1),10)+X(e.charAt(n+2),10);return 0!==t&&t%10==0}}},H(r,U)}),define("blue-app/validate/type",["require","./types","./constraints","blue/object/extend","blue/is","../settings","blue/util","blue/perf","blue/declare"],function(e){"use strict";var t,n=e("./types"),r=e("./constraints"),a=e("blue/object/extend"),i=e("blue/is"),o=e("../settings"),s=e("blue/util").object.toString,u=e("blue/perf"),c=function(){t=""},l=function(){return t||(t=o.get("language")||o.get("contentLanguage")||"en-us",setTimeout(c,0)),t},p=e("blue/declare")({constructor:function(e,t){if(u.count("blue/validate/type","create",t),!i.array(e.constraints))throw new TypeError('Property "constraints" must be provided for type: '+t);this.name=t,a(!0,this,e),this.constraints.forEach(function(e){if(i.undefined(e.type))throw new TypeError('Property "type" is undefined for constraints within definition of type "'+this.name+'"');if(!i.defined(r[e.type]))throw new TypeError('Constraint "'+e.type+'" does not exist, and is being used by type "'+this.name+'"');if(!i.function(r[e.type].validator))throw new TypeError('Constraint "'+e.type+'" does not have a method "validator", and is being used by type "'+this.name+'"');e.params=e.params||{}},this)},validator:function(e,t){var n=l();return u.count("blue/validate/type","validator"),this.constraints.every(function(i){return(r[i.type][n]||r[i.type]).validator(e,a(!0,{},i.params,t[i.type]||t))},this)},validate:function(e,t){u.count("blue/validate/type","validate"),!i.array(e)&&!i.string(e)&&(e=s(e)||""),i.undefined(t)&&(t={});var n,o=this.constraints,c=l();return n=o.filter(function(n){return!(r[n.type][c]||r[n.type]).validator(e,a(!0,{},n.params,t[n.type]||t))}),{value:e,isValid:!n.length,validationName:this.name,validationParams:t,failedConstraints:n}}});return Object.keys(n).forEach(function(e){p[e]=new p(n[e],e)}),Object.keys(r).forEach(function(e){i.defined(p[e])||(p[e]=new p({constraints:[{type:e,params:{}}]},e))}),p}),define("blue-app/validate",["./validate/validator","./validate/type"],function(e,t){"use strict";return new e(t)}),define("blue-app/component/validator",["blue-app/validate","blue/is","blue-app/validate/type"],function(e,t,n){"use strict";return{validate:function(n,r,a,i){var o,s,u,c;return this.isBuiltInType(r)?s=e.validate(n,r,a):t.string(r)&&(u=e.validate(n,r,a)),o=s||u||e.validate("","Noop"),t.plainObject(i)&&t.defined(i.validator)&&(c=i.validator.validate(n)),o.isValid&&t.defined(c)&&(o.isValid=c.isValid),t.defined(o.failedConstraints)&&t.defined(c)&&(o.failedConstraints=o.failedConstraints.concat(c.failedConstraints)),o},getInstance:function(){return e},isBuiltInType:function(t){return e.types.has(t)},createType:function(e,t){return new n(e,t)},composeValidators:function(e,n,r){var a=n.type||"Noop",i=n.constraints||null,o=r.name+"_"+e+"_"+a;if(n.isBuiltInType=this.isBuiltInType(a),i&&(n.validator=this.createType({constraints:i},o)),"list"===a.toString().toLowerCase()){if(t.string(n.itemType))return;t.plainObject(n.itemType)&&this.composeValidators(e,n.itemType,r),t.plainObject(n.items)&&Object.keys(n.items).forEach(function(e){e&&t.plainObject(n.items[e])&&this.composeValidators(e,n.items[e],r)}.bind(this))}}}}),define("blue-app/component",["require","blue/root","blue/as/contextual","blue/as/serializable","blue/compose","blue/event/channel","blue/log","blue/is","./localeSettings","blue/util","blue/observable","blue/perf","./component/validator"],function(e){"use strict";function t(){var e=this;e.privateOutput&&e.privateOutput.asEventStream().end(),e.privateOutput&&e.privateOutput.destroy(),e.privateOutput=new l({eventTarget:e});var t=this.privateOutput.asEventStream(),n=t.onValue(function(t){e._("enabled")||e._("queue").push(t)});t.onEnd(n)}var n=Object.create.bind(Object,null),r=Object.defineProperty,a=Object.defineProperties,i=Object.keys,o=e("blue/root"),s=e("blue/as/contextual"),u=e("blue/as/serializable"),c=e("blue/compose"),l=e("blue/event/channel"),p=e("blue/log"),d=e("blue/is"),f=e("./localeSettings"),m=e("blue/util").object.map,h=e("blue/observable"),b=e("blue/perf"),g=e("./component/validator"),v=p("[blue:app]"),y=e.specified("blue-legacy/blue-app/config")&&o.require("blue-legacy/blue-app/component"),E=0,x=function(e,t){switch(arguments.length){case 1:return this[e];case 2:return this[e]=t;case 0:i(this).forEach(function(e){delete this[e]},this)}},_=function(e,t){var n,r,a=e.split(".")[0],i=this._("listeners"),o=i[a]||{};for(n in o){r=o[n];try{r.h.call(r.s,t,e)}catch(e){v.error("["+this.context.getStack()+"]",'Calling "'+a+'" data-change listener',e)}}},S=function(e,t){({actions:1,data:1,key:1,model:1,name:1,settings:1,spec:1,states:1,destroy:1,destroyView:1,disable:1,enable:1,getDataProperties:1,getActionNames:1,getSettingsValues:1,on:1,onData:1,validate:1})[e]&&v.error("["+t.getStack()+"]","Reserved property being overwritten",e)},A=function(e){var t=this;try{d.function(t[e])&&t[e]()}catch(n){v.error("["+t.context.getStack()+"]",'Executing-Action "'+e+'()"',n)}},C=function(e,t){var n,r=this;S(e,r.context),(n=Object.getOwnPropertyDescriptor(r,e))&&(n.get||n.set)&&v.error("["+r.context.getStack()+"]",t.type+' "'+e+'" already defined',n),t.undef&&e in r&&v.error("["+r.context.getStack()+"]",t.type+' "'+e+'" already set',r[e])},R=function(e,t,n){var r,a=this;a._fromBridge!==e&&(a._("enabled")||a._queueData)&&(r=b.count.call({bucket:"render"},"blue/component","emit",a.name,e),a.privateOutput.emit("data",{value:e,path:t,current:n}),r())},w={descriptor:{set:function(e){this._("actions",n()),i(e).forEach(w.init,this),delete this.actions},configurable:!0,enumerable:!1},setter:function(e,t){var n=this,r=n._("actions"),a=r[e];if(!d.function(t))throw new TypeError(e+" must be a function");a&&!a.temp&&v.error("["+n.context.getStack()+"]",'Action "'+e+'()" already set',a,t),r[e]=function(){var r,a=o.location?o.location.href:"";n.actionRunning={value:t,action:e,args:arguments,url:a};try{r=t.apply(n,arguments)}catch(t){v.error("["+n.context.getStack()+"]",'Executing-Action "'+e+'()"',t)}return delete n.actionRunning,n.privateOutput&&n.privateOutput.emit("action",{value:e,action:e,args:arguments,result:r,url:a}),r}},init:function(e){var t=this,n=t[e],a=function(){throw new TypeError("Component "+t._("id")+': Action "'+e+'()" is undefined')};C.call(t,e,{type:"Action"}),a.temp=!0,t._("actions")[e]=a,r(t,e,{get:function(){return t._("actions")[e]},set:function(n){return w.setter.call(t,e,n)},configurable:!0,enumerable:!0}),n&&(t[e]=n)}},O={descriptor:{set:function(e){i(e).forEach(function(t){O.init.call(this,t,e[t])},this),delete this.data},configurable:!0,enumerable:!1},validate:function(e,t,n,r,a){var o,s=this,u=[],c=e.type||"Noop",l=e.params||{},p=r.split(".").pop();switch(c){case"NoConstraint":break;case"List":if(!d.array(a))return g.validate(a,"Noop",l);d.plainObject(e.items)?a.forEach(function(n,a){i(e.items).forEach(function(i){if(i in n){var o=e.items[i];u=u.concat(O.validate.call(s,{type:o.type||o,params:o.params||{},constraints:o.constraints,validator:o.validator},t,a,r+"."+a+"."+i,n[i]))}})}):d.string(e.itemType)&&a.forEach(function(n,a){u=u.concat(O.validate.call(s,{type:e.itemType,params:l,constraints:e.constraints,validator:e.validator},t,a,r+"."+a,n))}),a.isValid=!u.length,a.validation=u;break;default:try{b.count("blue/component","validate",this.name,r),o=g.validate(a,c,l,e)}catch(e){v.warn("["+s.context.getStack()+"]",'Unable to validate Data "'+r+'"',e),o=g.validate(a,"Noop",l)}if(void 0===n)return o;o.isValid||u.push({property:p,index:n,dataPath:r,result:o})}return u.isValid=!u.length,u},onChange:function(e,t,n){var r=this,a=r._("data")[e],i=r._("ds");a.validated=!1,(!i||e in i)&&R.call(r,e,t,n)},setter:function(e,t){var n=this,r=e.split(".")[0],a=r!==e,i=n._("data")[r];a&&!n.model.get(r)&&"LIST"===i.definition.type&&(n._ignore=e,n.model.set(r,[]),delete n._ignore),n.model.set(e,t,{isolate:!0})},init:function(e,t){var a,i=this;if(C.call(i,e,{type:"Data",undef:1}),i._("data")[e]=a=n(),d.object(t)||(v.warn("["+i.context.getStack()+"]","Data item,","'"+e+"',","invalid object definition"),t={type:"noop"}),t.type&&!d.string(t.type))throw new TypeError("data type for property "+e+" must be a string, not "+typeof t.type);g.composeValidators(e,t,{name:i.key}),r(i,e,{get:function(){return i.model.get(e,{isolate:!0})},set:function(t){return O.setter.call(i,e,t)},configurable:!0,enumerable:!0}),a.definition=t,a.isValid=!0,a.validationResults=[]}},N={descriptor:{get:function(){return this._("name")},set:function(e){if(!d.string(e))throw new TypeError("name must be a string");if(this._("name"))throw new Error("name can only be set once");this._("name",e),this._("id","<#"+e+":"+ ++E+">"),this.context.componentName=this.context.name=e,b.count.call({id:this._("id"),ref:this,time:1},"blue/component","create",this.name)},configurable:!0,enumerable:!1}},T={descriptor:{set:function(e){!e._init&&(e._init=!0)&&f.addSettingsToModel({spec:{name:this.name,settings:e},component:this}),this._("settings",e),i(e).forEach(function(t){"_init"!==t&&T.init.call(this,t,e[t].value)},this),delete this.settings},configurable:!0,enumerable:!1},newKind:function(){var e=this._("settings")||{},t=this.model,n=t&&t.get()||{};f.addSettingsToModel({spec:{name:this.name,settings:e},component:this}),this._("settings",e),i(e).forEach(function(t){"_init"!==t&&(n[t]=e[t].value)})},reset:function(){var e=this.model,t=e&&e.get()||{},n=this._("settings")||{};i(n).forEach(function(e){"_init"!==e&&void 0===t[e]&&(t[e]=n[e].value)})},init:function(e,t){var n=this;C.call(n,e,{type:"Setting",undef:1}),n.model.set(e,t),r(n,e,{get:function(){return n.model.get(e)},set:function(t){return n.model.set(e,t)},configurable:!0,enumerable:!0})}},P={descriptor:{set:function(e){this._("states",e),i(e).forEach(P.init,this),delete this.states},configurable:!0,enumerable:!1},init:function(e){var t=this;C.call(t,e,{type:"State",undef:1}),r(t,e,{get:function(){return t.model.get(e)},set:function(n){return t.model.set(e,n)},configurable:!0,enumerable:!0})}},k={descriptor:{get:function(){return this._("model")},set:function(e){var t,r=this,a=r._("model");e&&e===a||((t=a&&a.lens)&&a.destroy(),void 0!==e&&null!==e||(e=n()),d.function(e.lens)?(e.destroyed&&(v.error("["+r.context.getStack()+"]","Tried to create-component with destroyed model"),e=h.Model({},{skipRepeats:!0})),a=e):a=h.Model(e,{skipRepeats:!0}),a.onValue(k.onChange,{initial:!1,scope:r,isolate:!0}),r._("model",a),t&&k.reset.call(r))},configurable:!0,enumerable:!1},onChange:function(e,t){var n=this,r=t.split(".")[0],a=r in n,i=e&&e[r];if(e&&!r&&(k.reset.call(n),v.warn("["+n.context.getStack()+"]","Component properties should be used in favor of setting directly on internal model")),a&&!n._ignore){if(r in(n._("data")||{}))O.onChange.call(n,r,t,i);else if(r in(n._("settings")||{}))R.call(n,r,r,i);else{if(!(r in(n._("states")||{})))return;R.call(n,r,r,i)}_.call(n,t,i)}},reset:function(){var e;T.reset.call(this),(this._("enabled")||this._queueData)&&(e=b.count.call({bucket:"render"},"blue/component","emit",this.name,"reset"),this.privateOutput.emit("reset",{value:"data",current:this.model.get({isolate:!0})||{}}),e())}},I=function(e){var r=this,i={enabled:!1,hasView:!1,installedHandlers:{},listeners:{},queue:[],data:n()};r._=x.bind(i),r.initialized=!1,r.defineContext(e),a(r,{actions:w.descriptor,data:O.descriptor,model:k.descriptor,name:N.descriptor,settings:T.descriptor,states:P.descriptor}),r.key="",r.output=new l({eventTarget:r});var o=r.output.asEventStream(),s=o.onValue(function(e){r._("enabled")||r._("queue").push(e)});o.onEnd(s),t.call(r)};return I.create=function(e,t,n){if(n.legacy&&y)return y.create.apply(0,arguments);var o,s,u=new I(t),l=n.spec.states||(n.spec.states={}),f=["actions","data","settings","states"];for(u.key=e,u.model=n.model,u.kind=n.kind,n.viewEngine&&(u.context.viewEngine=n.viewEngine),u._("keepAlive",n.keepAlive),u._("modelCleanup",n.modelCleanup),d.function(n.methods)?n.methods.call(u,u.context):d.plainObject(n.methods)&&i(n.methods).forEach(function(e){S(e,u.context),u[e]=n.methods[e]}),l.v=1,u.context.logger=p("[component:"+n.spec.name+"]"),c(u,n.spec),a(u,{__hasView:{get:function(){return v.warn("["+this.context.getStack()+"]",'DEPRECATED:BLUEJS-2918:Property: "__hasView" has been deprecated.'),this._("hasView")}},__instanceName:{get:function(){return v.warn("["+this.context.getStack()+"]",'DEPRECATED:BLUEJS-2918:Property: "__instanceName" has been deprecated. Use "key"'),this.key}},spec:{get:function(){return n.spec}}}),["__viewName","__enabled"].forEach(function(e){r(u,e,{get:function(){var t=this._(e.replace(/[^a-z]/gi,""));return v.warn("["+this.context.getStack()+"]",'DEPRECATED:BLUEJS-2918:Property: "'+e+'" has been deprecated.',t),t}})});o=f.pop();)delete u[o];return u.initialized=!0,u.onInit?A.call(u,"onInit"):u.init&&A.call(u,"init"),u.privateOutput.emit("init",{}),A.call(u,"onComplete"),u.privateOutput.emit("complete",{}),s=u.kind,r(u,"kind",{get:function(){return s},set:function(e){e!==s&&(s=e,T.newKind.call(u))}}),u},I.prototype=n(),I.prototype.constructor=I,I.prototype.destroy=function(){var e=this;return e.actionRunning&&e.privateOutput&&e.privateOutput.emit("action",e.actionRunning),e.privateOutput&&e.privateOutput.emit("destroy",{}),e.destroyed=!0,new Promise(function(t,n){e.disable(t,n,!0)}).catch(function(){}).then(function(){e.model&&e.model.destroy(e._("modelCleanup")&&e.context),e.context&&e.context.bubble("removeComponent",{name:e.key}),e.output&&e.output.destroy(),e.privateOutput&&e.privateOutput.destroy(),delete e.output,delete e.privateOutput,A.call(e,"onDestroy"),e.context&&e.destroyContext(),b.count.call({id:e._("id")},"blue/component","destroy",e.name),e._()})},I.prototype.destroyView=function(e,t){var n,r=this._("installedHandlers");if(this._("hasView")){if(this._("hasView",!1),d.array(r.destroy))for(;n=r.destroy.pop();)n();this.privateOutput&&this.privateOutput.emit("destroyView",{compDestroyResolve:e,compDestroyReject:t})}},I.prototype.disable=function(e,n,r){var a,o,s=this._("installedHandlers");this._("hasView")?this.destroyView(e,n):e&&e(),this._("enabled")&&(s.outputUnplugger&&s.outputUnplugger(),delete s.outputUnplugger,!r&&t.call(this),this._("enabled",!1),this.input=void 0,i(s).forEach(function(e){if(a=s[e],d.function(a))a();else if(d.array(a))for(;o=a.pop();)d.function(o)&&o();delete s[e]}))},I.prototype.enable=function(e){var t,n,r=this,a=r._("queue"),i=r._("installedHandlers");if(!r.destroyed){r.disable(),r.input=e,i.trigger=r.input.on("trigger",function(e){var t=e.value
;if(!r[t])return void v.error("["+r.context.getStack()+"]","Action: "+t+"() does not exist in spec");try{e.data&&e.data.constructor===Array?r[t].apply(r,e.data):r[t].call(r,e.data)}catch(e){v.error("["+r.context.getStack()+"]","Action: "+t+"()",e)}}),i.binding=r.input.on("binding",function(e){var t=e.value.split(".")[0];if(!(t in r))return void v.error("["+r.context.getStack()+"]","Property: "+t+" does not exist in spec");r._fromBridge=e.value,O.setter.call(r,e.value,e.data),delete r._fromBridge}),i.bindingInit=r.input.on("init",function(e){r._("ds",e.downstream)}),i.destroy=r.input.on("destroy",function(){r._("hasView",!1),r._("keepAlive")?r.disable():r.destroy()}),i.ready=r.input.on("ready",function(){r._("hasView",!0),r.privateOutput.emit("ready",{componentName:r.name,componentInstanceName:r.key||"",componentId:r._("id"),viewName:r._("viewName")||""}),A.call(r,"onReady")}),r._("enabled",!0),i.outputUnplugger=r.output.plug(r.privateOutput.asEventStream()),r.privateOutput.emit("componentInputReady"),t=b.count.call({bucket:"render"},"blue/component","emit",r.name,"enable");for(;a.length;)n=a.shift(),"binding"!==n.type&&r.output.emit(n);t(),delete r._queueData}},I.prototype.onData=function(e,t,n){var r="n"+E++,a=this._("listeners"),i=e.split(".")[0],o=n||{},s={h:t,s:o.context||this},u=a[i]||(a[i]={});if(u[r]=s,!("init"in o)||o.init)try{s.h.call(s.s,this[i],i)}catch(e){v.error("["+this.context.getStack()+"]",'Calling "'+i+'" data-change listener',e)}return function(){delete u[r]}},I.prototype.validate=function(e){var t=this,n=this._("data"),r=t.model,a={isValid:!0,updated:{},passed:{},failed:{}};return(e?d.array(e)?e:e in n?[e]:[]:i(n)).forEach(function(e){var i,o=n[e]||{},s=o.definition||{};!{Noop:1,NoConstraint:1}[s.type||"Noop"]||s.validator?o.validated?i=o.isValid:(o.validationResults=O.validate.call(t,s,e,void 0,e,r.get(e)),o.isValid=i=o.validationResults.isValid,o.validated=!0,a.updated[e]=!0):o.isValid=i=!0,a.isValid&=i,a[i?"passed":"failed"][e]=o.validationResults}),a},I.prototype.getSettingsValues=function(){var e={},t=this._("settings");return t&&i(t).forEach(function(t){e[t]=this.model.get(t)},this),e},I.prototype.getActionNames=function(){var e={},t=this._("actions");return t&&i(t).forEach(function(t){e[t]=1},this),e},I.prototype.on=function(e,t){var n,r;this._("enabled")&&(!d.string(e)&&d.object(e)?m(e,function(t,a){n=a.split("/"),n.unshift(this.name),r=n.join("/"),e[r]=t,delete e[a]},this):(n=e.split("/"),n.unshift(this.name),e=n.join("/")),this.output.on(e,t))},u.call(I.prototype,function(){return{CompID:this._("id")||"empty id",specName:this.name||"no spec name",model:this.model.toJSON(this.spec.data).model||"empty model"}}),I=s.call(I,{name:"component"})}),define("blue-app/service/interceptor/header",["require","blue/store/enumerable/session"],function(e){"use strict";var t=new(e("blue/store/enumerable/session"))("servicesettings");return{before:function(e){return e.header=t.get("serviceheader")||{},e}}}),define("blue-app/service/interceptor/error",["require","blue/log"],function(e){"use strict";var t=e("blue/log")("[blue:app]"),n=function(e){return 401===e.status||!!(403===e.status&&e.responseJSON&&e.responseJSON.attributes&&e.responseJSON.attributes.userType&&"FinancialAdvisor"===e.responseJSON.attributes.userType)},r=function(e,t,n,r){var a={},i={value:r||"",request:t,response:n},o=e.util.object.deepClone;e.application.broadcast("serviceError",i),a=o(i),a.code="blue:error:service:requestFailed",e.bubble(a.code,a)};return{around:function(e){var a=function(){},i=e.args[0],o=e.target.context,s=!!i.disableDefaultError;return new Promise(function(u,c){e.proceed().then(function(e){u(e)}).catch(function(e){var u,l,p,d;e instanceof Error?(t.error("["+o.getStack()+"]","service response error",e),s||r(o,i,e)):(e=e||{getResponseHeader:a},u=e.status,p=e.statusText,l=e.getResponseHeader("Support-Id"),d=e.getResponseHeader("Alt-Location"),t[401===u||0===u?"warn":"error"]("["+o.getStack()+"]","service request failed",i.url,u,p,l?"SupportId: "+l:""),(!s||d||n(e))&&(!e.status||e.status<300||e.status>399||d)&&r(o,i,e,u)),d||c(e)}).catch(function(e){t.error("["+o.getStack()+"]","service request catch error",e),c(e)})})}}}),define("blue-app/service/interceptor/cache",["require","blue/deferred"],function(e){"use strict";var t={},n=e("blue/deferred"),r={DELETE:1,ONCE:1,SESSION:1},a=function(e,t){var n,r=Object.keys(e||{}),a=Object.keys(t||{});if(r.length!==a.length)return!1;if(!r.length)return!0;for(n in e)if(e[n]!==t[n])return!1;for(n in t)if(e[n]!==t[n])return!1;return!0},i=function(e,n){for(var r,i=t[e]||[],o=i.length;o--;)if(r=i[o],a(n,r.request))return"ONCE"===r.usage&&(i.splice(o,1),!i.length&&delete t[e]),r.response},o=function(e,n){for(var r,i=n.response&&"DELETE"!==n.usage,o=t[e]||(i?t[e]=[]:[]),s=n.request||{},u=o.length;u--;)if(r=o[u],a(s,r.request))return void(i?o[u]=n:(o.splice(u,1),!o.length&&delete t[e]));i&&o.push(n)},s=function(e){return new Promise(function(t){setTimeout(function(){t(e)},0)})},u=function(e,t){var n,a,i,s,u=(t||{})[e];if(u&&u.constructor===Array&&(n=u.length))for(;n--;)s=u[n]||{},s.url&&s.response&&r[s.usage]&&(a=s.url,i=a.split("?")[0],o(i,s))};return{around:function(e){var t,a=e.args[0],c=a.url.split("?")[0],l=a.data||{},p=a.cachePropName||"cache",d=r[a.cacheResponse]&&a.cacheResponse,f=a.cacheData,m=f&&r[f.usage]&&f.usage,h=m&&f.response;if(m)return o(c,{usage:m,request:l,response:h}),u(p,h),s(h);if(d)t=new n,o(c,{usage:d,request:l,response:t.promise});else if(h=i(c,l))return s(h);return e.proceed().then(function(e){return u(p,e),d&&(o(c,{usage:d,request:l,response:e}),t.resolve(e)),e}).catch(function(e){throw d&&(o(c,{usage:"DELETE",request:l}),t.reject(e)),e})}}}),define("blue-app/with/serviceConfigAPI",[],function(){"use strict";var e=Object.defineProperty;return function(){var t,n=[];e(this,"disableServiceAPI",{value:function(){delete this.serviceInterceptors},writable:!1,configurable:!0,enumerable:!1}),t=this.serviceSettings||void 0,e(this,"serviceSettings",{get:function(){return this.context.serviceSettings},set:function(e){this.context.serviceSettings=e},configurable:!0,enumerable:!1}),t&&(this.serviceSettings=t),e(this,"serviceInterceptors",{set:function(e){n=e.slice()},configurable:!0,enumerable:!1}),e(this.context,"getServiceInterceptors",{value:function(e){var t=[],r=[],a=this,i=a,o=e?Object.getPrototypeOf(e).interceptors||[]:[];return Object.hasOwnProperty.call(a,"serviceSettings")&&a.serviceSettings.interceptors&&(r=a.serviceSettings.interceptors.concat()),i.parent&&Object.hasOwnProperty.call(i.parent,"getServiceInterceptors")&&(t=i.parent.getServiceInterceptors()),t=t||[],n.reverse().concat(r.reverse()).concat(t).concat(o.reverse())},configurable:!0,enumerable:!1,writable:!1})}}),define("blue-app/service",["require","exports","module","blue/as/constructable","blue/as/contextual","blue/as/serializable","blue/log","./service/interceptor/header","./service/interceptor/error","./service/interceptor/cache","blue/is","./settings","blue/intercept","blue/http","blue/util","mout/object/mixIn","mout/random/guid","blue/store/enumerable/session","blue/store/enumerable/cookie","blue/root","blue/perf","blue-app/with/serviceConfigAPI"],function(e,t,n){"use strict";var r=Object.create.bind(Object,null),a=e("blue/as/constructable"),i=e("blue/as/contextual"),o=e("blue/as/serializable"),s=e("blue/log"),u=e("./service/interceptor/header"),c=e("./service/interceptor/error"),l=e("./service/interceptor/cache"),p=e("blue/is"),d=e("./settings"),f=e("blue/intercept"),m=e("blue/http"),h=e("blue/util").object.deepClone,b=e("mout/object/mixIn"),g=e("mout/random/guid"),v=new(e("blue/store/enumerable/session"))("servicesettings"),y=new(e("blue/store/enumerable/cookie"))(null,!0),E=e("blue/root").channel,x=e("blue/perf"),_=e("blue-app/with/serviceConfigAPI"),S=Object.prototype.hasOwnProperty,A=n.config(),C=A?A.CSRF||{}:{},R=s("[blue:app]"),w=0,O=0,N=function(e,t){var n=e.length,r=t.length,a=0;if(n!==r)return!1;for(;a<=n;a++)if(e[a]!==t[a])return!1;return!0};"undefined"!==E&&"string"==typeof E||(E=!1),E&&(E="id="+E),C.header=C.header||"x-jpmc-csrf-token",C.cookie=C.cookie||"authcsrftoken";var T=function(e,t){this.name=e,this.id="<"+e+"Service:"+w+++">",this.defineContext(t,{name:e,logger:s("[service:"+e+"]")}),this.defineConstruct(this.context),this.defineInterceptors(),_.call(this),Object.defineProperty(this,"serviceCalls",{set:function(e){for(var t,n=Object.keys(e),r=0,a=n.length;r<a;r++)t=n[r],this.addServiceCall(t,e[t].settings)},configurable:!0,enumerable:!1}),p.function(this.init)&&this.init.call(this),this._appliedLocalInterceptors=!1,x.count.call({id:this.id,ref:this},"blue/service","create",e)};return T.prototype=r(),T.prototype.constructor=T,T.prototype.http=m,T.prototype.interceptors=[u,c,l],T.prototype.addServiceCall=function(e,t){var n=this;p.undefined(this._serviceCalls)&&(this._serviceCalls=r()),this._serviceCalls[e]=r(),this.settings(e,t),this[e]=function(t,r){var a,i,o,s=n._serviceCalls[e];if(O++,a=O,p.undefined(s.settings)){var u=h(n.context.serviceSettings)||{};n._appliedLocalInterceptors||(N(n._interceptors,Object.getPrototypeOf(n).interceptors)?n.interceptors=n.context.getServiceInterceptors(n).reverse():n.interceptors=n._interceptors.concat(n.context.getServiceInterceptors(n)).reverse(),n._appliedLocalInterceptors=!0),s.settings=n._serviceCalls[e].settings=u;for(o in s.defaults)S.call(s.defaults,o)&&(s.settings[o]=n._serviceCalls[e].settings[o]=s.defaults[o]);delete n._serviceCalls[e].defaults}return i=b({},s.settings,r||{}),n.prerequest(i,t),n.context.bubble("blue:service:serviceCallBegin",{msgType:"blue:service:serviceCallBegin",contextPath:n.context.getStack(),id:a,service:n.name||"",seviceCall:e,application:n.context.application?n.context.application.name||"":"",area:n.context.area?n.context.area.name||"":"",controller:n.context.controller?n.context.controller.name||"":""}),new Promise(function(t,r){n.request(i).then(function(r){n.context.bubble("blue:service:serviceCallComplete",{msgType:"blue:service:serviceCallComplete",contextPath:n.context.getStack(),id:a,service:n.name||"",seviceCall:e,application:n.context.application?n.context.application.name||"":"",area:n.context.area?n.context.area.name||"":"",controller:n.context.controller?n.context.controller.name||"":""}),t(r)}).catch(function(t){n.context.bubble("blue:service:serviceCallComplete",{msgType:"blue:service:serviceCallComplete",contextPath:n.context.getStack(),service:n.name||"",seviceCall:e,application:n.context.application?n.context.application.name||"":"",area:n.context.area?n.context.area.name||"":"",controller:n.context.controller?n.context.controller.name||"":""}),r(t)})})}},T.prototype.destroy=function(){for(var e,t=Object.keys(this._serviceCalls),n=t.length;n--;)e=t[n],delete this[e],delete this._serviceCalls[e];this.destroyConstruct(),this.destroyInterceptors(),this.destroyContext(),delete this._serviceCalls,delete this.serviceCalls,this.addServiceCall=this.destroy=this.prerequest=this.request=function(){},x.count.call({id:this.id},"blue/service","destroy",this.name)},T.prototype.prerequest=function(e,t){var n,a,i,o;return e.data=t||r(),0!==e.url.substr(0,4).toLowerCase().indexOf("http")&&(n=v.get("serviceFQDN"),e.url=n?n+e.url:e.url),C.token=y.get(C.cookie)||null,C.token&&d.set(C.cookie,C.token),a=!(!C.disable&&!e.disableCsrf),i=a||e.disableTrace,o=a||e.disableChannelId,e.headers=e.headers||{},i?i&&e.headers&&delete e.headers["x-jpmc-client-request-id"]:e.headers["x-jpmc-client-request-id"]=g(),!o&&E?e.headers["x-jpmc-channel"]=E:o&&e.headers&&delete e.headers["x-jpmc-channel"],a?a&&e.headers&&delete e.headers[C.header]:e.headers[C.header]=C.token||"NONE",e},T.prototype.request=function(e){return x.count("blue/service","request",e.url),new Promise(function(t,n){this.http.request(e).then(function(e){t(e)}).catch(function(t){R.warn("["+this.context.getStack()+"]","Service request failed (url:"+e.url+"; status:"+t.status+"; statusText:"+t.statusText+")"),n(t)}.bind(this))}.bind(this))},T.prototype.settings=function(e,t){var n;if(!(e in this._serviceCalls))throw new Error('service "'+e+'" does not exist');if(p.undefined(t))n=this._serviceCalls[e].defaults||this._serviceCalls[e].settings;else{if(!("url"in t))throw new Error('"url" is a required setting');this._serviceCalls[e].defaults=t,"settings"in this._serviceCalls[e]&&delete this._serviceCalls[e].settings}return n},o.call(T.prototype,function(){return{id:this.id||"empty id"}}),a.call(T.prototype),T=i.call(T,{name:"service"}),f.withInterceptors.call(T.prototype,"request"),T}),define("blue-app/with/locationAPI",["require"],function(e){"use strict";return function(){this.changeProtocol=function(e){var t=document.location.href,n=document.location.protocol;document.location=t.replace(n,e)},this.changeServer=function(e){var t=document.location.href,n=document.location.host;document.location=t.replace("//"+n+"/","//"+e+"/")},this.getLocationPath=function(){return document.location.pathname},this.getLocationProtocol=function(){return document.location.protocol},this.getLocationProtocolAndServer=function(){return document.location.origin},this.getLocationServer=function(){return document.location.host},this.getLocationURL=function(){return document.location.href},this.goURL=function(e){document.location=e}}}),define("blue-app/mvc/mapper/mapping",["blue/declare","blue/is"],function(e,t){"use strict";return e({constructor:function(e){if(this.mapping=e,t.undefined(this.mapping))throw new TypeError('"mapping" is undefined')},lookup:function(){if(t.function(this.mapping.lookup))return this.mapping.lookup.apply(this.mapping,arguments);throw new TypeError('"mapping.lookup()" is not a function')},toString:function(){return" Mapping "}})}),define("blue-app/mvc/mapper",["require","blue/is","./mapper/mapping","blue/compose","blue/util","blue/intercept","blue/declare","blue/log"],function(e){"use strict";var t=e("blue/is"),n=e("./mapper/mapping"),r=e("blue/compose"),a=e("blue/util").string.trim,i=e("blue/intercept"),o=e("blue/declare"),s=e("blue/log"),u=s("[blue:app]"),c=function(e){return new n(e)};return o(function(){var e={constructor:function(){var e,t,n;if(arguments.length){for(e=[this],t=0;t<arguments.length;t++)e.push(arguments[t]);r.apply(r,e)}Object.defineProperty(this,"mappings",{get:function(){return n},set:function(e){n=e.map(c)},enumerable:!0}),this.defineInterceptors()},destroy:function(){this.destroyInterceptors()},mapRequest:function(){var e,n,r=arguments,i=!1;return this.mappings&&this.mappings.length&&(e=this.mappings[this.mappings.length-1].mapping.toString(),-1===e.indexOf("IdentityMapping")&&-1===e.indexOf("ControllerNameMapping")&&u.warn("'IdentityMapping' or 'ControllerNameMapping' should succeed all other route mappings."),this.mappings.some(function(e){return n=e.lookup.apply(e,r),t.defined(n)&&(n=n.split(",").map(a),i=n.length>0),i},this)),n},toString:function(){return" Mapper "}};return i.withInterceptors.call(e,"mapRequest"),e})}),define("blue-app/routeHandler",["require","blue-app/mvc/mapper","blue/declare"],function(e){"use strict";var t=e("blue-app/mvc/mapper");return e("blue/declare")(t,{constructor:function(){t.apply(this,arguments),this.childTypes=this.childTypes||[]}})}),define("blue-app/mvc/handler/mapping/controllerName",["blue/declare"],function(e){"use strict";return e({constructor:function(){},lookup:function(e){return e},toString:function(){return" Handler ControllerNameMapping "}})}),define("blue-app/mvc/mapper/mapping/identity",["blue/declare"],function(e){"use strict";return e({constructor:function(){},lookup:function(e){return e},toString:function(){return" Handler IdentityMapping "}})}),define("blue-app/mvc/mapper/mapping/simplePattern",["blue/declare","blue/is"],function(e,t){"use strict";return e({constructor:function(e){if(!t.plainObject(e))throw new TypeError('"mappings" must be a plain object');this.mappings=e},lookup:function(e){var t=e?e.split("."):[],n=t[0]||"",r=t[0]&&t[1]?t[0]+"."+t[1]:"";return this.mappings[e]||this.mappings[r]||this.mappings[n]},toString:function(){return" Simple Pattern Mapping "}})}),define("blue-app/mvc/mapper/mapping/simplePatternAdditive",["blue/declare","blue/is"],function(e,t){"use strict";return e({constructor:function(e){if(!t.plainObject(e))throw new TypeError('"mappings" must be a plain object');this.mappings=e},lookup:function(e){var t,n,r=e?e.split("."):[],a=r[0]||"",i=r[0]&&r[1]?r[0]+"."+r[1]:"";return t=this.mappings[e]||this.mappings[i]||this.mappings[a],t&&(n=e+","+t),n},toString:function(){return" Simple Pattern Mapping "}})}),define("blue-app/with/routable",["require","blue/is","blue-app/routeHandler","blue-app/mvc/handler/mapping/controllerName","blue-app/mvc/mapper/mapping/identity","blue-app/mvc/mapper/mapping/simplePattern","blue-app/mvc/mapper/mapping/simplePatternAdditive"],function(e){"use strict";var t=Object.defineProperty,n=e("blue/is"),r=e("blue-app/routeHandler"),a=e("blue-app/mvc/handler/mapping/controllerName"),i=e("blue-app/mvc/mapper/mapping/identity"),o=e("blue-app/mvc/mapper/mapping/simplePattern"),s=e("blue-app/mvc/mapper/mapping/simplePatternAdditive"),u={IdentityMapping:i,ControllerNameMapping:a,SimpleUrlMapping:o,SimpleUrlAdditiveMapping:s};return function(e,a){var i,o=this;t(o,"routeHandler",{get:function(){return i},set:function(t){var s=i,u={};t instanceof r?u.handler=t:u=t,u.handler&&(s&&s.removeApi.call(o.context),i=u.handler,i.registry=e,i.childTypes=a||[]),Array.isArray(u.mappings)&&u.mappings.forEach(function(e){n.string(e)?o.addRouteMapping(e):e.mapping&&o.addRouteMapping(e.mapping,e.config)}),i.api.call(o.context)},enumerable:!1}),t(o,"addRouteMapping",{value:function(){var e=Array.prototype.slice.call(arguments);if(o.routeHandler){if(n.string(e[0])){if(!u[e[0]])throw new Error("Unknown route mapping: "+e[0]);e[0]=u[e[0]]}o.routeHandler.addMapping.apply(o.routeHandler,e)}},configurable:!0,enumerable:!1,writable:!1}),t(o,"addRouteInterceptor",{value:function(){o.routeHandler&&o.routeHandler.addInterceptor.apply(o.routeHandler,arguments)},configurable:!0,enumerable:!1,writable:!1}),o.context.on("blue:route:routeRequest",function(e){o.routeHandler.handleRequest(o,e)})}}),define("blue-app/mvc/routingAPI",["require","blue/dom","blue/is","blue/util","blue/hash","blue/log"],function(e){"use strict";function t(e){return!e.emit&&e.context&&e.context.emit?e.context:e}function n(e){var t,n=e;return n?(t=n.indexOf("#"),t>=0&&(n=n.length<=t+1?"":n.substr(t+1)),"/"===n[0]?n.substr(1):n):""}function r(e,n,r){var a,i,o=t(e),s=p.object.deepClone(n),u={app:"",area:"index",controller:"index",action:"index"},c={name:o.application?o.application.name:r.app.name,params:{}},l={name:o.area?o.area.name:r.area?r.area.name:"",params:{}},d={name:o.controller?o.controller.name:r.controller.name,params:{}},f={name:u.action,params:{}};for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(a=s[i],a?"string"==typeof a?s[i]={name:a,params:{}}:a.params||(a.params={}):s[i]={name:"",params:{}});return s.app.name&&s.action.name?s:(s.app.name&&(c.name=s.app.name),s.app.params&&(c.params=s.app.params),s.area.name&&(l.name=s.area.name),s.area.params&&(l.params=s.area.params),s.controller.name&&(d.name=s.controller.name),s.controller.params&&(d.params=s.controller.params),s.action.name&&(f.name=s.action.name),s.action.params&&(f.params=s.action.params),s.controller.name||s.action.name?s.action.name||(f.name=u.action):(d.name=u.controller,f.name=u.action),{app:c,area:l,controller:d,action:f,query:s.query})}function a(e,n){t(e).site.emitChildren("publicRoute",{route:n})}function i(e,n,r){t(e).site.emitChildren("privateRoute",{route:n,privateDataObject:r})}function o(){var e=l.string(arguments[0])?this.routeToObject(arguments[0]):arguments[0],t=arguments[1]||{},n=e.query?e.query.params:{},a=this.routeToObject();return l.string(arguments[0])&&arguments[0].length&&!arguments[1]&&"."!==arguments[0][0]?arguments[0]:(e=r(this,e,a),e.action.params=m(e.action.params,t,n),this.objectToRoute(e))}function s(e){var t,r,a,i,o={app:{name:"",params:{}},area:{name:"",params:{}},controller:{name:"",params:{}},action:{name:"",params:{}},query:{string:"",params:{}}};return(t=n(e||c.location.href))?(r=t.split("?"),a=r[0].split("/"),i=a.length,"."===a[0]&&2===i?o.action=d.parseSegment(a[1]):".."===a[0]&&2===i?o.controller=d.parseSegment(a[1]):".."===a[0]&&3===i?(o.controller=d.parseSegment(a[1]),o.action=d.parseSegment(a[2])):(3===i&&(o.app=d.parseSegment(a[0]),o.controller=d.parseSegment(a[1]),o.action=d.parseSegment(a[2])),4===i&&(o.app=d.parseSegment(a[0]),o.area=d.parseSegment(a[1]),o.controller=d.parseSegment(a[2]),o.action=d.parseSegment(a[3]))),r[1]&&(o.query.string=r[1],o.query.params=d.getParamsObj(t)||{}),o):o}var u,c=e("blue/dom"),l=e("blue/is"),p=e("blue/util"),d=e("blue/hash"),f=e("blue/log")("[app]"),m=p.object.merge,h=Object.defineProperty;return u=function(){h(this,"routeToObject",{value:function(e){return r(this,s(e),s(c.location.href))},configurable:!0,enumerable:!1}),h(this,"objectToRoute",{value:function(e){var t,n="";return t=r(this,e,this.routeToObject()),n+="/"+d.segmentObjectToString(t.app),t.area&&t.area.name&&(n+="/"+d.segmentObjectToString(t.area)),n+="/"+d.segmentObjectToString(t.controller),n+="/"+d.segmentObjectToString(t.action),t.query&&t.query.string&&(n+="?"===t.query.string[0]?t.query.string:"?"+t.query.string),n},configurable:!0,enumerable:!1}),h(this,"state",{value:function(){var e;return 0===arguments.length?this.routeToObject():(e=o.apply(this,arguments),e&&a(this,e),e)},configurable:!0,enumerable:!0}),h(this,"privateState",{value:function(){var e,t;if(0===arguments.length)return this.routeToObject();if(t=arguments[1]&&arguments[1].privateDataObject){try{t=JSON.parse(JSON.stringify(t))}catch(e){f.error("privateState - Unable to serialize privateDataObject"),t={}}delete arguments[1].privateDataObject}return e=o.apply(this,arguments),e&&i(this,e,t),e},configurable:!0,enumerable:!0}),h(this,"replaceState",{value:function(){var e;return 0===arguments.length?this.routeToObject():((e=o.apply(this,arguments))&&(d.replaceHash(e),i(this,e)),e)},configurable:!0,enumerable:!0})},u.clean=function(){delete this.routeToObject,delete this.objectToRoute,delete this.state,delete this.privateState,delete this.replaceState},u}),define("blue-app/mvc/handler",["require","blue-app/mvc/routingAPI","blue/log","blue-app/routeHandler","./mapper/mapping","blue/util","blue/event/channel/component","blue/declare","blue/hash","blue/is","blue/util"],function(e){"use strict";function t(e){return(e.map(function(e){return e.name})||[]).join(".")}function n(e){return e.map(function(e){return e.params||{}})||[]}function r(e,t){return e?e.split(".").map(function(e,n){return{name:e,params:t[n]||{}}}):[]}function a(e){return e.substr(0,1).toUpperCase()+e.substr(1)}function i(e,t,n){return e["is"+a(n)](t)}function o(e,t,n){return e["get"+(n.substr(0,1).toUpperCase()+n.substr(1))](t)}function s(e){var t=e.replace(/^ROOT\/SITE/,"").replace(/\/index$/,"");return 0===E.getHash().replace(/\?.*$/,"").split("/").map(function(e){return E.parseSegment(e).name}).join("/").indexOf(t)}function u(e,t){return e.actions?e.actions[t]:e[t]}function c(e,t,n,r){var a,i=this,o=n.controller?n.controller.getStack():n.getStack(),s=n.area?n.area.name:"",u={};return t?(a=n.page&&n.page.viewResolverOptions?n.page.viewResolverOptions:d,u={routeId:r,controllerAction:e,resolverPathOptions:a,viewEngine:n.viewEngine,areaName:s,contextStack:o,activityChannel:v},x.thenable(t.promise)?t.promise.then(function(e){u.cavList=e,n.bubble("blue:application:display",u)},function(e){throw S.warn("["+i.context.getStack()+"]","Action promise failed",e),e}):x.thenable(t)?t.then(function(e){u.cavList=e,n.bubble("blue:application:display",u)},function(e){throw S.warn("["+i.context.getStack()+"]","Action promise failed",e),e}):(u.cavList=t,n.bubble("blue:application:display",u),Promise.resolve())):Promise.resolve()}function l(e,t,n,r,a,i){var o,s,l=u(e,t),p=e.context.newChild(),d=e.context.area?e.context.area.name:"",f={},h={},b={},v=function(){setTimeout(p.destroy.bind(p),0)};e.context.bubble("blue:route:executeAction",{msgType:"blue:route:executeAction",id:n,contextPath:e.context.getStack(),route:t,params:r,query:a}),p.name=t,p.logger=m("[action:"+t+"]"),p.routeId=n,f=A({},r,a.params||{}),Object.keys(f).forEach(function(e){Object.defineProperty(p,e,{value:f[e],enumerable:!0,configurable:!0})}),i&&(p.privateDataObject=i);try{o=l.call(e,p)}catch(n){b.code="blue:app:error:actionExecutionError",b.description="Error in execution-of-action "+t,S.error("["+e.context.getStack()+"]",b.description,n),e.context.broadcast(b.code,b),h=g(b),h.code="blue:error:app:actionExecutionError",e.context.bubble(h.code,h)}finally{d&&e.context.application.emit("spinner:off",{name:d})}return o&&(s=c(t,o,p,n),x.thenable(o)?o.then(v,v):x.thenable(o.promise)?o.promise.then(v,v):p.destroy()),e.context.bubble("blue:route:executeActionComplete",{msgType:"blue:route:executeActionComplete",id:n,contextPath:e.context.getStack(),route:t,params:r,query:a}),s}function p(e,t,n){var r,a,i=e.context.area?e.context.area.areaName:"",o={},s={};if(t&&t.segments&&t.segments[0]){if((a=t.segments[0].name)&&(r=u(e,a))&&x.function(r))return l(e,a,t.routeId,t.segmentParams,t.query,t.privateDataObject);if(n)return i&&e.context.application.emit("spinner:off",{name:i}),s.code="blue:route:error:actionNotResolved",s.description="Error resolving executable-action for ",S.error("["+e.context.getStack()+"]",s.description,t),s.description+=a,e.context.broadcast(s.code,s),o=g(s),o.code="blue:error:route:actionNotResolved",e.context.bubble(o.code,o),Promise.reject()}return Promise.resolve()}var d=void 0,f=e("blue-app/mvc/routingAPI"),m=e("blue/log"),h=e("blue-app/routeHandler"),b=e("./mapper/mapping"),g=e("blue/util").object.deepClone,v=e("blue/event/channel/component"),y=e("blue/declare"),E=e("blue/hash"),x=e("blue/is"),_=e("blue/util"),S=m("[blue:app]"),A=_.object.mixIn;return y(h,{constructor:function(){h.apply(this,arguments),this.paramsCache={},this.api=f,this.removeApi=f.clean},getCachedParams:function(e){var t=this.paramsCache[e];return t?(delete this.paramsCache[e],t):d},addMapping:function(e,t){this.mappings||(this.mappings=[]),this.mappings.push(new b(new e(t)))},handleRequest:function(e,c){var l,d,f=this,m=0===c.segments.length,h=t(c.segments)||"index",b=n(c.segments),v={name:"index",params:{}},y={},_=function(t){var n=c.segmentParams;return n&&s(e.context.getStack())&&(A(e.context,n),Object.keys(n).forEach(function(t){Object.defineProperty(e.context,t,{value:n[t],enumerable:!0,configurable:!0})})),p(e,t,!f.childTypes.length)};f.paramsCache[c.routeId]=c.segmentParams,e.context.bubble("blue:route:handleRouteRequest",{msgType:"blue:route:handleRouteRequest",id:c.routeId,source:c.source,contextPath:e.context.getStack(),route:t(c.segments),nextSegment:c.segments[0]?c.segments[0].name:"",segments:c.segments,segmentParams:c.segmentParams,query:c.query}),s(e.context.getStack())&&m&&E.addSegmentToCurrentHash("index"),y=g(c),y.onSuccess=void 0,l=f.mapRequest(h,y),d=l.length,l&&0!==d?l.forEach(function(t,n){var l,p,m,h=r(t,b),y={},E={},C=[],R=h.shift(),w=g(c);w.segments=h,w.segmentParams=R.params||{},f.childTypes.length?(C=f.childTypes.filter(function(e){return i(f.registry,R.name,e)}),C[0]?(p=C[0],e.context.bubble("blue:route:mappedRequest",{msgType:"blue:route:mappedRequest",id:c.routeId,source:c.source,contextPath:e.context.getStack(),route:t,nextSegment:R.name,nextSegmentType:p,segments:h}),"area"===p&&e.context.application.emit("spinner:on",{name:R.name}),e.context.bubble("blue:route:lazyLoad",{msgType:"blue:route:lazyLoad",id:c.routeId,source:c.source,contextPath:e.context.getStack(),route:t,nextSegment:R.name,nextSegmentType:p,segments:h}),o(f.registry,R.name,p).then(function(n){w.segments=h,w.onSuccess.push(_.bind(e,w)),n.context.emit("blue:route:routeRequest",w),e.context.bubble("blue:route:lazyLoadComplete",{msgType:"blue:route:lazyLoadComplete",id:c.routeId,source:c.source,contextPath:e.context.getStack(),route:t,nextSegment:R.name,nextSegmentType:p,segments:h})}).catch(function(n){var r=e.context.area?e.context.area.areaName:"";r&&e.context.application.emit("spinner:off",{name:r}),e.context.bubble("blue:route:lazyLoadComplete",{msgType:"blue:route:lazyLoadComplete",id:c.routeId,source:c.source,contextPath:e.context.getStack(),route:t,nextSegment:R.name,nextSegmentType:p,segments:h}),n.requireType&&"timeout"===n.requireType?(S.error("["+e.context.getStack()+"]","Network timeout loading "+p+' module "'+R.name+'". Error: '+n.message),E.code="blue:route:error:areaLoadTimeout",E.description=a(p)+" "+R.name+" failed to load due to network timeout. Application may not proceed normally.",e.context.broadcast("blue:route:error:"+p+"LoadTimeout",E),y=g(E),y.code="blue:error:route:moduleNotFound",e.context.bubble("blue:error:route:"+p+"LoadTimeout",y)):(S.error("["+e.context.getStack()+"]","Unable to invoke "+a(p)+' "'+R.name+'". Error: '+n.message),E.code="blue:route:error:areaNotFound",E.description="Defined "+p+" "+R.name+" could not be invoked. Application may not proceed normally.",e.context.broadcast("blue:route:error:"+p+"NotFound",E),y=g(E),y.code="blue:error:route:moduleNotFound",e.context.bubble("blue:error:route:"+p+"NotFound",y))})):(m=f.childTypes.map(function(e){return a(e)}).join(" or "),S.error("["+e.context.getStack()+"]",m+' "'+R.name+'" not found. Note: It could be mapped as an alias too, check your application main.js'),E.code="blue:route:error:moduleNotFound",E.description="A non-existent "+m+" has been requested by route. Application may not proceed normally.",e.context.broadcast(E.code,E),y=g(E),y.code="blue:error:route:moduleNotFound",e.context.bubble(y.code,y))):(A(R.params,w.query.params||{}),w.segments.unshift(R||v),s(e.context.getStack())||(w.onSuccess=[]),w.onSuccess.push(_.bind(e,w)),e.context.bubble("blue:route:mappedRequest",{msgType:"blue:route:mappedRequest",id:c.routeId,source:c.source,mappedLength:d,contextPath:e.context.getStack(),route:t,nextSegment:R.name,nextSegmentType:"action",segments:h}),(l=u(e,R.name))&&x.function(l)&&w.onSuccess.forEach(function(e){e()}))}):S.warn("["+e.context.getStack()+"]",e.context.name+" mapped route to null action list for routeRequest:",h)},handleSuccess:function(e,t){var n=this.getCachedParams(e);n&&s(t.context.getStack())&&A(t.context,n)},toString:function(){return" MvcHandler "}})}),define("blue-app/controller",["require","blue/compose","blue/is","blue/log","./component","blue-app/service","blue/observable","./with/locationAPI","blue-app/with/serviceConfigAPI","blue/as/contextual","blue/as/constructable","blue/as/dataProvider","blue/as/registry","blue/as/serializable","blue-app/with/routable","./mvc/handler","blue/perf"],function(e){"use strict";var t=Object.defineProperty,n=e("blue/compose"),r=e("blue/is"),a=e("blue/log"),i=e("./component"),o=e("blue-app/service"),s=e("blue/observable"),u=e("./with/locationAPI"),c=e("blue-app/with/serviceConfigAPI"),l=e("blue/as/contextual"),p=e("blue/as/constructable"),d=e("blue/as/dataProvider"),f=e("blue/as/registry"),m=e("blue/as/serializable"),h=e("blue-app/with/routable"),b=e("./mvc/handler"),g=e("blue/perf"),v=a("[blue:app]"),y=0,E=function(e,n){var i,o=this,u=s.Model();o.defineContext(n,{name:e,controllerName:e,logger:a("[controller:"+e+"]")}),o.defineConstruct(o.context),o.name=e,o.id="<"+e+"Controller:"+y+++">",t(o,"model",{get:function(){return u},set:function(e){e||(e={}),u!==e&&(u&&r.function(u.lens)&&u.destroy(),r.function(e.lens)?(e.destroyed&&(v.error("["+o.context.getStack()+"]","Tried to create-controller with destroyed model"),e=s.Model()),u=e):u=s.Model(e))},enumerable:!0}),t(o,"viewPath",{get:function(){return o.context.page?o.context.page.viewResolverOptions:void 0},set:function(e){!Object.hasOwnProperty.call(o.context,"page")&&(o.context.page={}),o.context.page.viewResolverOptions=e}}),h.call(o),o.routeHandler=new b,i=d(o),
o.defineComponentsRegistry(o.context),o.defineServicesRegistry(o.context),o.register={components:function(e,t){t.forEach(function(e){var t,n,r=e.name;try{e.keepAlive=!0,e.legacy=!0,e.controller=o,t=o.registry.hasComponent(r)?o.registry.destroyComponent(r):Promise.resolve(),o.registry.registerComponent(r,e,!0),n=o.components[r],n.oldComponent=t}catch(e){throw v.error("["+o.context.getStack()+"]","Problems wiring together component "+r,e),e}})}},o.executeCAV=o.context.executeCAV.bind(o.context),o.destroy=function(){var e=Promise.all([o.destroyComponentsRegistry(),o.destroyServicesRegistry()]).catch(function(){}).then(function(){i.destroy(),o.destroyConstruct(),o.destroyContext()});return g.count.call({id:o.id},"blue/controller","destroy",o.name),e},c.call(o),g.count.call({id:o.id,ref:o},"blue/controller","create",o.name)};return E.prototype=Object.create(null),E.prototype.constructor=E,E.prototype.reroute=function(e){this.context.site.emitChildren("publicRoute",{route:e})},E.prototype.returnData=function(e){return e},m.call(E.prototype,function(){return{CtrlID:this.id||"empty id",components:this.components?Object.keys(this.components):"empty components"}}),E=l.call(E,{name:"controller"}),p.call(E.prototype),f.call(E.prototype,"component",i,{onCreate:function(e,t){var n,r=this;if("model"in t){switch(t.model||v.warn("["+r.context.getStack()+"]","Component registry model passed as a 'falsy' value, resulting in empty lens path."),(n=t.model)&&n.constructor){case Object:case r.model.constructor:return;case String:break;default:n=""}t.model=n?r.model.lens(n):r.model.lens()}}}),f.call(E.prototype,"service",o),n(E.prototype,u),E}),define("blue-app/area",["require","./controller","./service","blue/site","blue/as/registry","blue/as/constructable","blue/as/contextual","blue/is","blue/log","blue-app/with/serviceConfigAPI","blue-app/with/routable","./routeHandler","./mvc/handler","wire"],function(e){"use strict";function t(e,t){return t.routeHandler.mappings&&t.routeHandler.mappings.length||t.addRouteMapping("IdentityMapping"),t}var n=e("./controller"),r=e("./service"),a=e("blue/site"),i=e("blue/as/registry"),o=e("blue/as/constructable"),s=e("blue/as/contextual"),u=e("blue/is"),c=e("blue/log"),l=e("blue-app/with/serviceConfigAPI"),p=e("blue-app/with/routable"),d=e("./routeHandler"),f=e("./mvc/handler"),m=e("wire"),h=function(e,t){var n=this;this.defineContext(t,{name:e,areaName:e,logger:c("[area:"+e+"]"),page:{}}),this.name=e,this.defineConstruct(this.context),this.defineControllersRegistry(this.context),this.defineServicesRegistry(this.context),this.context.executeCAV=function(e){return n.context.application.executeCAV.call(this,e,n.context.areaName)},Object.defineProperties(this,{initialized:{value:!1,configurable:!0,enumerable:!1,writable:!1},viewPath:{get:function(){return n.context.page?n.context.page.viewResolverOptions:void 0},set:function(e){!Object.hasOwnProperty.call(n.context,"page")&&(n.context.page={}),n.context.page.viewResolverOptions=e}}}),p.call(this,this.registry,["controller"]),this.routeHandler=new f,l.call(this),this.wakeCount=0};return h.prototype=Object.create(null),h.prototype.constructor=h,h.prototype.loadSpec=function(){var e,t,n=this,r=new Promise(function(n,r){e=n,t=r}),i=[];return n.spec&&u.plainObject(n.spec)?m(n.spec).then(function(r){n.settings=r,n.mapAreaComponents(r),r.services&&(n.services=r.services),n.services&&(n.context.services=n.services),r.controllers&&(n.controllers=r.controllers),r.context&&n.configureAreaContext(n.context,r.context),r.imports?a.context._internal.import(n,r.imports).then(function(){e(n)},t):e(n)}).catch(function(e){t(e)}):n.init||n.onInit||n.onLoad||n.onComplete?(n.services&&(n.context.services=n.services),e(n)):(n.mapAreaComponents(n),n.services&&(n.context.services=n.services),Object.keys(n.controllers).forEach(function(e){i.push(n.controllers[e])}),Promise.all(i).then(function(){e(n)})),r},h.prototype.mapAreaComponents=function(e){var t,n=this,r=Object.keys(e);e.mappingHandler||r.some(function(r,a){if((t=e[r])instanceof d)return n.routeHandler={handler:t},!0})},h.prototype.configureAreaContext=function(e,t){var n,r,a;if(r=Object.keys(t),r.length)for(n=r.length;n--;)a=r[n],e[a]=t[a],delete t[a]},h.prototype.destroy=function(){var e=this;return Promise.all([e.destroyControllersRegistry(),e.destroyServicesRegistry()]).catch(function(){}).then(function(){e.destroyConstruct(),e.destroyContext(),delete e.initialized})},h.prototype.disable=function(){},h.prototype.enable=function(){!this.initialized&&u.function(this.init)&&(Object.defineProperty(this,"initialized",{value:!0}),this.init())},o.call(h.prototype),h=s.call(h,{name:"area"}),i.call(h.prototype,"controller",n,{lazy:!0,onAfterCreate:t,immediate:!1}),i.call(h.prototype,"service",r,{immediate:!0}),h}),define("blue-app/mvc/targeter",["require","blue-app/mvc/mapper","blue/declare"],function(e){"use strict";var t=e("blue-app/mvc/mapper");return e("blue/declare")(t,{constructor:function(){t.call(this)},targetRequest:function(e,t){return this.mapRequest(e,t)},toString:function(){return" Targeter "}})}),define("blue-app/load",["require","blue/is","blue/resolver/module"],function(e){"use strict";var t=e("blue/is"),n=e("blue/resolver/module"),r=new n;return r.prefix="wire!",r.suffix="/main",function(e,n,a){if(!t.string(e))throw new TypeError("name must be a string");if(!t.function(n))throw new TypeError("callback must be a function");void 0===a&&(a=this),r.resolve(e).onValue(function(e){n.call(a,e)})}}),define("blue-app/cache/oneTimeCache",["blue/declare","blue/store/enumerable/memory"],function(e,t){"use strict";return new(e({constructor:function(){this.store=new t("OneTimeCache")},has:function(e){return this.store.has(e)},get:function(e){var t=this.store.get(e);return this.store.remove(e),t},set:function(e,t){this.store.set(e,t)},remove:function(e){this.store.remove(e)}}))}),define("blue-app/cache/sessionCache",["blue/declare","blue/store/enumerable/memory"],function(e,t){"use strict";return new(e({constructor:function(){this.store=new t("SessionCache")},has:function(e){return this.store.has(e)},get:function(e){return this.store.get(e)},set:function(e,t){this.store.set(e,t)},remove:function(e){this.store.remove(e)}}))}),define("blue-app/app",["require","exports","module","blue/as/contextual","blue/as/constructable","blue/as/registry","blue/site","blue-app/area","blue-app/service","blue-app/controller","blue/deferred","blue/event/channel","blue/event/channel/component","blue-app/with/routable","blue-app/with/serviceConfigAPI","blue/has","blue/hash","blue/is","blue-app/routeHandler","blue-app/mvc/handler","blue-app/mvc/targeter","blue/intercept","blue-app/service/interceptor/cache","blue-app/load","blue/log","blue/root","blue/device/platform","blue-app/cache/oneTimeCache","blue-app/cache/sessionCache"],function(e,t,n){"use strict";function r(e,t){var n="",r={};t&&t.code&&(n=t.code.split(":")),r=e.util.object.deepClone(t),r.code="blue:error",n.length&&4===n.length&&(r.code=r.code+":"+n[1]+":"+n[3]),e.bubble(r.code,r)}function a(){return JSON.stringify(j)}function i(e,t,n){setTimeout(function(){n.done||(n.done=!0,n.actions={},e.emit("blue:route:routeComplete",{id:t}))},20)}function o(e,t){var n,r=0,a=0,o=!1,s=[],u=function(e){o&&(o=!1,e.emit("blue:route:routeBatchCompleteForced",{id:a,routes:s}),e.emit("blue:route:routeBatchComplete",{id:a,routes:s}),r=0,s=[]),n=void 0};e.on("blue:route",function(){n&&clearTimeout(n),n=setTimeout(u,1e3,e,n)}),e.on("blue:route:newRouteExecuting",function(n){"external"===n.source&&r>0&&(e.emit("blue:route:routeBatchComplete",{id:a,routes:s}),l(t).forEach(function(e){t[e].done=!0}),o=!1,r=0,s=[]),o||(a++,r=0,o=!0,e.emit("blue:route:routeBatchBegin",{id:a,routes:s})),r++,s.push({id:n.id,route:n.route,source:n.source}),void 0===t[n.id]&&("private"!==n.source&&l(t).forEach(function(n){t[n].done||"private"===t[n].source||i(e,n,t[n])}),t[n.id]={source:n.source,route:n.route,actions:{},services:{},views:{},start:0,stop:0})}),e.on("blue:route:routeComplete",function(t){r--,setTimeout(function(){o&&r<1&&(o=!1,e.emit("blue:route:routeBatchComplete",{id:a,routes:s}),r=0,s=[])},250)}),e.on("blue:route:newRouteRequestAborted",function(){r--,setTimeout(function(){o&&r<1&&(o=!1,e.emit("blue:route:routeBatchComplete",{id:a,routes:s}),r=0,s=[])},250)}),e.on("blue:service:serviceCallBegin",function(e){var n=e.contextPath.replace(/[^\/]+$/,"");l(t).forEach(function(r){!t[r].done&&l(t[r].actions).forEach(function(a){a.indexOf(n)>=0&&(t[r].start++,t[r].services[e.id]=!0)})})}),e.on("blue:service:serviceCallComplete",function(n){var r=n.contextPath.replace(/[^\/]+$/,"");l(t).forEach(function(a){!t[a].done&&l(t[a].actions).forEach(function(o){o.indexOf(r)>=0&&t[a].services[n.id]&&(t[a].stop++,!t[a].done&&t[a].stop>=t[a].start&&i(e,a,t[a]))})})}),e.on("blue:route:lazyLoad",function(e){t[e.id]&&t[e.id].start++}),e.on("blue:route:executeAction",function(e){t[e.id]&&(t[e.id].start++,t[e.id].actions[e.contextPath]=!0)}),e.on("blue:route:viewRenderStart",function(e){t[e.id]?(t[e.id].start++,t[e.id].views[e.displayReqId]=!0):l(t).forEach(function(n){var r=t[n];r.done||(r.start++,r.views[e.displayReqId]=!0)})}),e.on("blue:route:viewRenderComplete",function(n){var r=!1;t[n.id]?(t[n.id].stop++,!t[n.id].done&&t[n.id].stop>=t[n.id].start&&i(e,n.id,t[n.id])):l(t).forEach(function(a){var o=t[a];!o.done&&o.views[n.displayReqId]&&(o.stop++,r=!0,o.stop>=o.start&&i(e,a,o))})}),e.on("blue:route:executeActionComplete",function(n){t[n.id]&&(t[n.id].stop++,!t[n.id].done&&t[n.id].stop>=t[n.id].start&&i(e,n.id,t[n.id]))}),e.on("blue:route:lazyLoadComplete",function(n){t[n.id]&&(t[n.id].stop++,!t[n.id].done&&t[n.id].stop>=t[n.id].start&&i(e,n.id,t[n.id]))})}function s(e,t){return t.routeHandler.mappings&&t.routeHandler.mappings.length||t.addRouteMapping("IdentityMapping"),t}function u(e,t){var n=this;return new Promise(function(r,a){t.routeHandler.mappings&&t.routeHandler.mappings.length||t.addRouteMapping("IdentityMapping"),t.wakeCount?(t.wakeCount++,t.initComplete.promise.then(function(e){r(e)})):(t.wakeCount=1,t.initComplete=new y,t.loadSpec().then(function(e){e.page&&e.page.viewResolverOptions&&(e.context.page.viewResolverOptions=e.page.viewResolverOptions),Promise.resolve(new Promise(function(t){t(R.function(n.onAreaLoad)?n.onAreaLoad(e):Promise.resolve())}).then(function(){Promise.resolve(new Promise(function(t){t(R.function(e.onLoad)?e.onLoad():Promise.resolve())}).then(function(){r(e),e.initComplete.resolve(e)},function(t){M.error("["+e.context.getStack()+"]","Error processing area's onLoad callback for area \""+name+'"',t),e.context.broadcast("blue:route:error:onLoadFailed",{code:"blue:route:error:onLoadFailed",description:'Error initializing area "'+name+'" after load: error in onLoad callback '}),a(t),e.initComplete.reject(t)}))},function(t){M.error("["+e.context.getStack()+"]",'Error processing onAreaLoad callback for area "'+name+'"',t),e.context.broadcast("blue:route:error:onAreaLoadFailed",{code:"blue:route:error:onAreaLoadFailed",description:'Error initializing area "'+name+'" after load: error in onAreaLoad callback '}),a(t),e.initComplete.reject(t)}))}).catch(function(n){M.error("["+t.context.getStack()+"]","Error processing area's wire config for area \""+e+'"',n),t.context.application.broadcast("blue:route:error:areaWireLoadFailed",{code:"blue:route:error:areaWireLoadFailed",description:'Error initializing area "'+e+'". Error encountered while processing area wire config: '+n}),t.initComplete.reject(n),a(n)}))})}var c,l=Object.keys,p=n.config(),d=e("blue/as/contextual"),f=e("blue/as/constructable"),m=e("blue/as/registry"),h=e("blue/site"),b=e("blue-app/area"),g=e("blue-app/service"),v=e("blue-app/controller"),y=e("blue/deferred"),E=e("blue/event/channel"),x=e("blue/event/channel/component"),_=e("blue-app/with/routable"),S=e("blue-app/with/serviceConfigAPI"),A=e("blue/has"),C=e("blue/hash"),R=e("blue/is"),w=e("blue-app/routeHandler"),O=e("blue-app/mvc/handler"),N=e("blue-app/mvc/targeter"),T=e("blue/intercept"),P=e("blue-app/service/interceptor/cache"),k=e("blue-app/load"),I=e("blue/log"),F=e("blue/root"),j=e("blue/device/platform"),L=0,M=I("[blue:app]"),D=function(){this.request=function(){}};return e("blue-app/cache/oneTimeCache"),e("blue-app/cache/sessionCache"),T.withInterceptors.call(D.prototype,"request"),c=function(e,t){var n=this,a={};n.loadConfig=p,n.channel=new E({eventTarget:n}),n.viewTargeter=void 0,n.plugHandler=void 0,n.htmlTemplate=void 0,n.defaultHtmlTemplate=void 0,n.name=e,e&&(n.appName=e),n.defineContext(t,{name:e,appName:e,applicationName:e,config:n.loadConfig,logger:I("[application:"+e+"]")}),n.context.executeCAV=function(e,t){var r,a,i=new Promise(function(e,t){r=e,a=t}),o=this;return o&&M.warn("["+o.getStack()+"]","DEPRECATED:BLUEJS-3051:executeCAV is unnecessary when following the view first pattern"),L++,n.context.emit("blue:route:viewRenderStart",{msgType:"blue:route:viewRenderStart",id:o.routeId||"unknown",displayReqId:L,contextPath:o.getStack()}),n.tellPage("application:display",{routeId:o.routeId||"unknown",displayReqId:L,cavList:e,areaName:t||"",resolverPathOptions:o.page?o.page.viewResolverOptions:void 0,contextStack:o.controller?o.controller.getStack():o.getStack(),viewEngine:o.viewEngine,activityChannel:x,resolve:r,reject:a}),i},n.context.on({"page:error":function(e){n.context.broadcast(e.code,e),r(n.context,e)},"blue:site:error":function(e){r(n.context,e)}}),n.defineConstruct(n.context),n.defineControllersRegistry(n.context),n.defineAreasRegistry(n.context),n.defineServicesRegistry(n.context),S.call(n),n.tellPage=function(){},n.context.page={},_.call(n,n.registry,["controller","area"]),n.routeHandler=new O,n.context.on("blue:application:display",function(e){L++,n.context.emit("blue:route:viewRenderStart",{msgType:"blue:route:viewRenderStart",id:e.routeId,displayReqId:L,contextPath:e.contextStack}),e.displayReqId=L,n.tellPage("application:display",e)}),o(n.context,a)},c.prototype=Object.create(null),c.prototype.constructor=c,c.prototype.destroy=function(){this.destroyAreasRegistry(),this.destroyControllersRegistry(),this.destroyServicesRegistry(),this.destroyConstruct(),this.destroyContext()},c.prototype.loadSpec=function(){var e,t,n,r=this,i=new Promise(function(e,r){t=e,n=r}),o=p&&p.cache?p.cache:{};return M.error("Client platform signature: "+a()),o&&o.constructor===Array&&o.length&&(e=new D,e.interceptors=[P],e.defineInterceptors(),o.forEach(function(t){e.request({url:t.url,cacheData:{usage:t.usage,response:t.response||{}}})})),k(r.context.appName,function(e){r.settings=e,r.mapAppComponents(),r.routeHandler.mappings&&r.routeHandler.mappings.length||r.addRouteMapping("IdentityMapping"),e.services||(e.services={}),e.controllers&&(r.controllers=e.controllers),e.areas&&(r.areas=e.areas),e.services&&(r.services=e.services),e.services&&(r.context.services=r.services),e.context&&r.configureAppContext(r.context,e.context),r.context.on("blue:route:routeRequest",function(e){var t,n,a=C.parseMatrixParamHash(C.getHash()),i="/"+a.app+"/",o=[];for(n=0;n<e.segments.length;n++)o.push(C.segmentObjectToString(e.segments[n]));i+=o.join("/")+(e.query.string?"?"+e.query.string:""),t=C.parseMatrixParamHash(i),t.mapping=t.pathSegments.join("."),"private"===e.source&&(t.privateDataObject=e.privateDataObject),r.context.broadcast("blue:routeChange",t)}),e.imports?h.context._internal.import(r,e.imports).then(function(){R.plainObject(r.context.areaMessageMap)&&l(r.context.areaMessageMap).forEach(function(e){r.configureAreaWakeUp(e,r.context.areaMessageMap[e])}),t(r)},n):(R.plainObject(r.context.areaMessageMap)&&l(r.context.areaMessageMap).forEach(function(e){r.configureAreaWakeUp(e,r.context.areaMessageMap[e])}),t(r)),e.viewEngine&&(r.context.viewEngine=e.viewEngine)}),Blue.status.applicationLoaded.resolve().then(function(){var e;if(A("localstorage")&&F.localStorage.getItem)try{e=F.localStorage.getItem("blueNetworkAnalysisData"),e=JSON.parse(e),e&&(Blue.network.stats.speed=e.derivedSpeed||0,M.info("["+r.context.getStack()+"]","Network analysis data",e))}catch(e){M.warn("["+r.context.getStack()+"]","Unable to fetch blueNetworkAnalysisData from localStorage")}}),i.then(function(){r.context.broadcast("blue:applicationConfigComplete")}),i},c.prototype.configureAppContext=function(e,t){var n,r,a;if(r=l(t),r.length)for(n=r.length;n--;)a=r[n],e[a]=t[a],delete t[a]},c.prototype.configureAreaWakeUp=function(e,t){var n=this;t.split(/,\s*/).forEach(function(t){n.registry.isArea(t)&&n.context.once(e,function(r){n.registry.hasArea(t)||n.registry.getArea(t).then(function(t){t.context.broadcast(e,r)}).catch(function(e){throw M.error("["+n.context.getStack()+"]","Error doing initial-load of area "+t,e),n.context.broadcast("blue:route:error:areaInitialLoadFailed",{code:"blue:route:error:areaInitialLoadFailed",description:"Error doing initial load of area "+t}),e})})})},c.prototype.mapAppComponents=function(){var e,t=this,n=l(t.settings),r=n.length;n.some(function(n,a){return e=t.settings[n],e instanceof w?t.routeHandler=e:e instanceof N&&(t.viewTargeter=e),a<r&&!1})},c.prototype.renderCAVList=function(e,t){return this.insertComponentView(this,null,null,e,t)},m.call(c.prototype,"area",b,{lazy:!0,onAfterCreate:u}),m.call(c.prototype,"controller",v,{lazy:!0,onAfterCreate:s,immediate:!0}),m.call(c.prototype,"service",g),f.call(c.prototype),c=d.call(c,{name:"application"})}),define("blue-app/mvc/handler/interceptor/mocking",[],function(){"use strict";return{after:function(e){return e.push("mocking.index"),e}}}),define("blue-app/mvc/handler/interceptor/shell",["blue/declare","blue/util"],function(e,t){"use strict";var n=t.array.find;return e({constructor:function(){var e;for(this.name="ShellInterceptor",this.hasRun=!1,this.actions=[],e=0;e<arguments.length;e++)this.actions.push(arguments[e])},afterReturning:function(e){var t=n(this.interceptors,function(e){return"ShellInterceptor"===e.name});return t.hasRun||(t.actions.forEach(function(t){e.unshift(t)}),t.hasRun=!0),e}})}),define("blue-app/service/interceptor/offline",[],function(){"use strict";var e=[],t=function(t){for(var n,r=[];n=e.shift();)r.push(n);r.forEach(function(e){e(t)})},n=function(n,r,a,i,o){var s,u=function(c){if(!c)return a(s);n.proceed().then(r).catch(function(n){if(!i.env||!("onLine"in i.env)||i.env.onLine)return a(n);e.push(u),s=n,1===e.length&&o(t)})};return u};return{around:function(e){var t=e.args[0]||{},r=t.disableOfflineHandler,a=e.target.context,i=a.onOfflineError;return r||!i?e.proceed():new Promise(function(t,r){n(e,t,r,a,i)(!0)})}}}),define("blue-app/service/interceptor/status",[],function(){"use strict";var e={300:!0,301:!0,302:!0,303:!0,305:!0,306:!0,307:!0,308:!0},t=function(e,t){for(var n=t.split(".");e=e[n.shift()];)if(e.constructor===Function)return e};return{around:function(n){var r=1,a=n.args[0];return new Promise(function(i,o){var s=function(){n.proceed().then(function(e){var n=t(a,"handleSuccess");if(n)return i(n.call(e,e));(n=t(a,"handleStatus.200"))&&n.call(e,e),i(e)}).catch(function(n){var i,u=n.status;if(e[u]&&a.redirect&&r++<3)return a.url=n.getResponseHeader("Location"),s();(i=t(a,"handleError"))&&i.call(n,n),(i=t(a,"handleStatus."+u))&&i.call(n,n),o(n)})};s()})}}}),define("blue-app/userSettings",["require","blue/resource/persona"],function(e){"use strict";var t=new(e("blue/resource/persona")),n={persona:t.read()};return Object.keys(n).forEach(function(e){n[e]||delete n[e]}),n}),define("blue-app/message/reporter/network",["require","blue/root"],function(e){"use strict";var t=e("blue/root"),n=function(){var e=self,t=/%20/g,n=/^(?:GET|HEAD)$/,r={lastModified:{},etag:{}},a={text:function(e){return e.text()},json:function(e){return e.json().catch(function(t){throw e.headers&&(t.headers=e.headers),e.status&&(t.status=e.status,t.statusText=e.statusText),t})},xml:function(e){return e.text().then(function(e){return(new DOMParser).parseFromString(e,"text/xml")})},image:function(e){return e._bodyBlob?Promise.resolve(e._bodyBlob):"function"==typeof e.blob?e.blob():e.body&&e.body instanceof ReadableStream?e:Promise.reject(new Error("Blue:fetch - expected image blob, blob not found"))}},i={text:a.text,"application/json":a.json,"text/json":a.json,"application/xml":a.xml,"text/xml":a.xml,"image/bmp":a.image,"image/gif":a.image,"image/x-icon":a.image,"image/jpeg":a.image,"image/png":a.image,"image/svg+xml":a.image,"image/tiff":a.image,"image/webp":a.image},o=function(e,t){var n=e.headers.get("Content-Type")||"",r=n.split("/"),o=a[t]||i[n]||i[r[0]];return o?o(e):e.text()},s=function(e){var n=[],r=function(e,t){var r;r=t&&t.constructor===Function?t():null===t?"":t,n.push(encodeURIComponent(e)+"="+encodeURIComponent(r))};switch(e&&e.constructor){case Array:e.forEach(function(e){e&&r(e.name,e.value)});break;case Object:Object.keys(e).forEach(function(t){r(t,e[t])})}return n.join("&").replace(t,"+")},u=function(){var t;e.onmessage=function(a){var i,u=a.data.url,c=a.data.options,l=c.data,p={cache:"default",credentials:"same-origin",headers:c.headers||{},method:c.method||c.type||"GET",mode:"cors",redirect:"follow"};c.xhrFields&&c.xhrFields.withCredentials&&(p.credentials="include"),c.contentType&&(p.headers["Content-Type"]=c.contentType),c.ifModified&&((i=r.lastModified[u])&&(p.headers["If-Modified-Since"]=i),(i=r.etag[u])&&(p.headers["If-None-Match"]=i)),!l||l.constructor===String||"processData"in c&&!c.processData||(l=s(l)),l&&(n.test(p.method)?u+=(-1===u.indexOf("?")?"?":"&")+l:p.body=l),t=e.fetch(new e.Request(u),p).then(function(e){var t={headers:e.headers,status:e.status,statusText:e.statusText,url:e.url||""};return e.ok||isPhantomBug(t)?(c.ifModified&&((i=e.headers.get("Last-Modified"))&&(r.lastModified[u]=i),(i=e.headers.get("etag"))&&(r.etag[u]=i)),o(e,c.dataType).then(function(e){return t.data=e,t})):e.text().then(function(e){throw t.data=e,t})}).catch(function(t){throw t.headers?t:{headers:new e.Headers,status:0,statusText:t.message,url:u}}),t.then(function(t){e.postMessage({id:a.data.id,data:t.data})})}};u.prototype=Object.create(null),u.prototype.constructor=u,new u},r=function(){var e=n.toString();return e=e.replace(/^[\s\r\n]*function\s*\(\)\s*\{[\s\r\n]*/,""),e=e.replace(/\}[\s\r\n]?$/,"")},a=function(){var e=r();return new Blob([e],{type:"application/javascript"})},i=function(){return(t.URL||t.webkitURL).createObjectURL(a())},o=function(e,t){t.forEach(function(t){try{t(e)}catch(e){}})},s=function(e){var n=this;if(this.type=e||"worker",this._callbacks=[],"worker"!==this.type)throw new Error('Network Worker type "'+e+'" not supported.');if(!t.Worker)throw new Error("Web Workers are not supported.");this.worker=new Worker(i()),this.worker.onmessage=function(e){o(e.data,n._callbacks)}};return s.prototype=Object.create(null),s.prototype.constructor=s,s.prototype.destroy=function(){this._callbacks=void 0,this.worker.terminate(),this.worker=void 0},s.prototype.subscribe=function(e){this._callbacks.push(e)},s.prototype.sendMessage=function(e){"worker"===this.type&&this.worker&&this.worker.postMessage(e)},s}),define("blue-app/message/collector",["require","blue/observable","blue-app/message/reporter/network","blue/root","blue/util","blue-app/service"],function(e){"use strict";var t=e("blue/observable"),n=e("blue-app/message/reporter/network"),r=e("blue/root"),a=e("blue/util"),i=a.object.merge,o=e("blue-app/service"),s=0,u={},c=0,l={},p={NetworkReporter:n},d=function(e){if(e=e||"NetworkReporter",!p[e])throw new Error("Unknown reporter type requested: "+e);return new p[e]},f=function(e){l[e.id]&&(e.error?l[e.id].reject&&l[e.id].reject(e.error):l[e.id].resolve&&l[e.id].resolve(e.data),l[e.id]=void 0)},m=function(e,t){return"time"===t.buffer?e.bufferWithTimeOrCount(t.interval,void 0):"count"===t.buffer?e.bufferWithCount(t.interval):e},h=function(e){var t=this;this.reporter=d(e),this.reporter.subscribe(f),this._id=++s,u[this._id]={streamMap:{},configMap:{}},r.addEventListener("beforeunload",function(){t.unloading=!0,t.destroy()})};return h.prototype=Object.create(null),h.prototype.constructor=h,h.prototype.destroy=function(){var e=this;this._destroyed||(this._destroyed=!0,Object.keys(u[this._id].streamMap).forEach(function(t){u[e._id].streamMap[t].end()}),this.reporter.destroy(),this.reporter=void 0,u[this._id]=void 0)},h.prototype.plug=function(e,n,r){var a=this,s=u[this._id].streamMap,l=u[a._id].configMap[e];if(!this._destroyed){if(s[e])throw new Error("Stream name is already in use: "+e);if(!l||!l.url)throw new Error('No network configuration exists for stream "'+e+'"');r=r||{},s[e]={},s[e].sourceStream=t.stream(function(t){var r=n.onValue(function(e){t.emit(e)});return s[e].end=t.end,function(){r()}}),s[e].bufferedStream=m(s[e].sourceStream,r||{}),s[e].bufferedStream.onValue(function(t){var n={};!t||Array.isArray(t)&&!t[0]||(n.id=++c,n.stream=e,n.options=i({},l),n.url=l.url,n.shutdown=a._destroyed||!1,Array.isArray(t)?n.options.data={events:t}:n.options.data=t,r.stringify&&(n.options.data=JSON.stringify(n.options.data)),o.prototype.prerequest.call(null,n.options,n.options.data),a.reporter.sendMessage(n))})}},h.prototype.unplug=function(e){this._destroyed||u[this._id].streamMap[e].end()},h.prototype.send=function(e,t){var n=this,r={id:++c,url:e};if(this._destroyed)return Promise.resolve();if(r.options=i(u[n._id].configMap[e]||{},t),0===Object.keys(r.options).length)throw new Error('No network configuration exists for URL "'+e+'"');return r.options.url=e,o.prototype.prerequest.call(null,r.options,r.options.data),new Promise(function(e,t){l[r.id]={id:r.id,message:r,resolve:e,reject:t},n.reporter.sendMessage(r)})},h.prototype.configureStream=function(e,t){if(!this._destroyed){if(!e)throw new Error("configureStream requires a stream name");u[this._id].configMap[e]=i({},t)}},h.prototype.configureURL=function(e,t){if(!this._destroyed){if(!e)throw new Error("configureURL requires a URL");u[this._id].configMap[e]=i({},t)}},h}),define("blue-app/main",function(){});
//# sourceMappingURL=../../../../../../sourcemap/blue-app/dist/2.18.0/blue-app/js/main.js.map
